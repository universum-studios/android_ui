<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../.resources/report.css" type="text/css"/><link rel="shortcut icon" href="../.resources/report.gif" type="image/gif"/><title>CircularNumberPicker.java</title><link rel="stylesheet" href="../.resources/prettify.css" type="text/css"/><script type="text/javascript" src="../.resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=0;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../.sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">debugAndroidTest</a> &gt; <a href="index.source.html" class="el_package">universum.studios.android.ui.widget</a> &gt; <span class="el_source">CircularNumberPicker.java</span></div><h1>CircularNumberPicker.java</h1><pre class="source lang-java linenums">/*
 * =================================================================================================
 *                             Copyright (C) 2017 Universum Studios
 * =================================================================================================
 *         Licensed under the Apache License, Version 2.0 or later (further &quot;License&quot; only).
 * -------------------------------------------------------------------------------------------------
 * You may use this file only in compliance with the License. More details and copy of this License
 * you may obtain at
 *
 * 		http://www.apache.org/licenses/LICENSE-2.0
 *
 * You can redistribute, modify or publish any part of the code written within this file but as it
 * is described in the License, the software distributed under the License is distributed on an
 * &quot;AS IS&quot; BASIS, WITHOUT WARRANTIES or CONDITIONS OF ANY KIND.
 *
 * See the License for the specific language governing permissions and limitations under the License.
 * =================================================================================================
 */
package universum.studios.android.ui.widget;

import android.annotation.TargetApi;
import android.content.Context;
import android.content.res.ColorStateList;
import android.content.res.Resources;
import android.content.res.TypedArray;
import android.graphics.Canvas;
import android.graphics.Paint;
import android.graphics.PorterDuff;
import android.graphics.Rect;
import android.graphics.Typeface;
import android.graphics.drawable.Drawable;
import android.os.Build;
import android.os.Parcel;
import android.os.Parcelable;
import android.support.annotation.AttrRes;
import android.support.annotation.ColorInt;
import android.support.annotation.DrawableRes;
import android.support.annotation.FloatRange;
import android.support.annotation.NonNull;
import android.support.annotation.Nullable;
import android.support.annotation.StyleRes;
import android.util.AttributeSet;
import android.util.TypedValue;
import android.view.MotionEvent;
import android.view.accessibility.AccessibilityEvent;
import android.view.accessibility.AccessibilityNodeInfo;

import java.text.DecimalFormat;
import java.text.NumberFormat;

import universum.studios.android.font.Font;
import universum.studios.android.font.FontWidget;
import universum.studios.android.font.util.FontApplier;
import universum.studios.android.ui.R;
import universum.studios.android.ui.UiConfig;
import universum.studios.android.ui.graphics.drawable.TintDrawable;
import universum.studios.android.ui.util.ResourceUtils;

/**
 * A view that can be used to present a circular picker within a layout that allows to a user to pick
 * one number from the predefined set of numbers that are drawn in arc.
 * &lt;p&gt;
 * Use {@link #setNumbers(int[])} to specify set of numbers from which can a user pick one. If you
 * want to allow to the user to pick from &quot;more discrete&quot; interval than that which is described
 * by the count of specified numbers, you can do so by specifying selection range via {@link #setSelectionRange(int)}
 * that will be used to properly pick the current selected number. This is useful for example when
 * you want to display only 12 numbers representing set of minutes within one hour, but want to allow
 * to the user to pick the desired minute from the range {@code [0, 59]}, than you will specify
 * numbers for minutes {@code CircularNumberPicker.setNumbers({0, 5, ..., 55})} and selection range
 * {@code CircularNumberPicker.setSelectionRange(60)} so the user will be able to pick also minutes
 * between {@code [0, 5]}, {@code [5, 10]} and so on.
 * &lt;p&gt;
 * Initial selected number can be specified via {@link #setSelection(int)} and the current selected
 * can be obtained via {@link #getSelection()}.
 * &lt;p&gt;
 * &lt;b&gt;Note&lt;/b&gt;, that this view saves its current state, so it can be later restored (in case of
 * orientation change for example).
 *
 * &lt;h3&gt;Callbacks&lt;/h3&gt;
 * Use {@link OnNumberSelectionListener} to listen for callback for a selected number. This listener
 * can be registered via {@link #setOnNumberSelectionListener(OnNumberSelectionListener)}. For callback
 * for changed number use {@link OnNumberChangeListener} that can be registered via
 * {@link #setOnNumberChangeListener(OnNumberChangeListener)} of which callback is fired whenever
 * user changes highlighted number by dragging a selection indicator.
 *
 * &lt;h3&gt;XML attributes&lt;/h3&gt;
 * See {@link ViewWidget},
 * {@link R.styleable#Ui_NumberPicker_Circular CircularNumberPicker Attributes}
 *
 * &lt;h3&gt;Default style attribute&lt;/h3&gt;
 * {@link R.attr#uiNumberPickerCircularStyle uiNumberPickerCircularStyle}
 *
 * @author Martin Albedinsky
 */
public class CircularNumberPicker extends ViewWidget implements FontWidget {

	/**
	 * Interface ===================================================================================
	 */

	/**
	 * Listener that can receive callback about selected number value within {@link CircularNumberPicker}
	 * widget.
	 *
	 * @author Martin Albedinsky
	 */
	public interface OnNumberSelectionListener {

		/**
		 * Invoked whenever the specified &lt;var&gt;number&lt;/var&gt; has been selected within the given
		 * &lt;var&gt;picker&lt;/var&gt;.
		 * &lt;p&gt;
		 * &lt;b&gt;Note&lt;/b&gt;, that by selected is meant that the selection indicator has been released after
		 * it was dragged or just pressed within the selectable area (arc with numbers) of the picker.
		 *
		 * @param picker The picker instance within which was the specified number selected.
		 * @param number The selected number. &lt;b&gt;Note&lt;/b&gt;, that this doesn't need to be necessary the
		 *               number from the current set of numbers, set to the picker. The specified number
		 *               is calculated as the current selection for the current position of selection
		 *               indicator against the current selection range of the picker.
		 * @see #setSelectionRange(int)
		 */
		void onNumberSelected(@NonNull CircularNumberPicker picker, int number);
	}

	/**
	 * Listener that can receive callback about changed number value within {@link CircularNumberPicker}
	 * widget.
	 *
	 * @author Martin Albedinsky
	 */
	public interface OnNumberChangeListener {

		/**
		 * Invoked whenever the specified &lt;var&gt;number&lt;/var&gt; has been changed within the given
		 * &lt;var&gt;picker&lt;/var&gt;.
		 * &lt;p&gt;
		 * &lt;b&gt;Note&lt;/b&gt;, that by changed is meant that the selection indicator has been pressed within
		 * the selectable area (arc with numbers) of the picker and dragged.
		 *
		 * @param picker The picker instance within which was the specified number changed.
		 * @param number The changed number. &lt;b&gt;Note&lt;/b&gt;, that this doesn't need to be necessary the
		 *               number from the current set of numbers, set to the picker. The specified number
		 *               is calculated as the current selection for the current position of selection
		 *               indicator against the current selection range of the picker.
		 * @see #setSelectionRange(int)
		 */
		void onNumberChanged(@NonNull CircularNumberPicker picker, int number);
	}

	/**
	 * Constants ===================================================================================
	 */

	/**
	 * Log TAG.
	 */
	// private static final String TAG = &quot;CircularNumberPicker&quot;;

	/**
	 * Ratio for a user touch on the numbers arc. This ratio is used to compute tolerance for touch
	 * distance from the center of this picker. Tolerance distance is computed from the radius of
	 * area needed to draw graphics of one number.
	 */
	private static final float TOUCH_TOLERANCE_RATIO = 0.5f;

	/**
	 * Flag indicating whether a user is dragging selection indicator or not.
	 */
	private static final int PFLAG_DRAGGING = 0x00000001 &lt;&lt; 16;

	/**
	 * Flag indicating whether this picker is currently being animated or not.
	 */
	private static final int PFLAG_ANIMATING = 0x00000001 &lt;&lt; 17;

	/**
	 * Static members ==============================================================================
	 */

	/**
	 * Members =====================================================================================
	 */

	/**
	 * Graphics info for numbers text.
	 */
<span class="nc" id="L188">	private final TextInfo TEXT_INFO = new TextInfo();</span>

	/**
	 * Graphics info for indicator's bearing line.
	 */
<span class="nc" id="L193">	private final BearingLineInfo BEARING_LINE_INFO = new BearingLineInfo();</span>

	/**
	 * Graphics info for picker's middle circle.
	 */
<span class="nc" id="L198">	private final MiddleCircleInfo MIDDLE_CIRCLE_INFO = new MiddleCircleInfo();</span>

	/**
	 * Set of private flags of this dialog view.
	 */
	private int mPrivateFlags;

	/**
	 * Radius in which should be drawn numbers of this picker.
	 */
	private float mRadius;

	/**
	 * Padding to be applied to the graphics of this picker. Higher padding will move the numbers
	 * closer to the picker's center.
	 */
	private float mPadding;

	/**
	 * Current center of number picker view.
	 */
	private float mCenter;

	/**
	 * Set of numbers which should be drawn in the arc of this picker view. These numbers are only
	 * for presentation purpose, to be drawn in arc. To determine the current selection of this picker,
	 * see {@link #mSelectionRange} for info.
	 */
	private int[] mNumbers;

	/**
	 * Count of the current {@link #mNumbers} set for better accessibility.
	 */
	private int mNumbersCount;

	/**
	 * Current selection of this picker.
	 */
	private int mSelection;

	/**
	 * The range in which can be numbers of this picker selected. This will be used to compute value
	 * of the current {@link #mSelection} of this picker.
	 */
	private int mSelectionRange;

	/**
	 * Callback to be invoked whenever a specific number is selected within this picker.
	 */
	private OnNumberSelectionListener mSelectionListener;

	/**
	 * Callback to be invoked whenever a specific number is changed within this picker.
	 */
	private OnNumberChangeListener mChangeListener;

	/**
	 * Drawable used to draw selection indicator for the currently selected number.
	 *
	 * @see #mSelection
	 */
	private Drawable mSelectionIndicator;

	/**
	 * Resource id of the {@link #mSelectionIndicator} if indicator has been specified via
	 * {@link #setSelectionIndicator(int)}.
	 */
	private int mSelectionIndicatorRes;

	/**
	 * Data used when tinting components of this view.
	 */
	private TintInfo mTintInfo;

	/**
	 * Current drawable state set. See {@link #drawableStateChanged()}.
	 */
	private int[] mDrawableStateSet;

	/**
	 * Current drawable state set with selected flag. See {@link #drawableStateChanged()}.
	 */
	private int[] mDrawableStateSetSelected;

	/**
	 * Helper rect used when we need to obtain bounds or padding of some component.
	 */
	private Rect mRect;

	/**
	 * Constructors ================================================================================
	 */

	/**
	 * Same as {@link #CircularNumberPicker(android.content.Context, android.util.AttributeSet)} without
	 * attributes.
	 */
	public CircularNumberPicker(@NonNull Context context) {
<span class="nc" id="L296">		this(context, null);</span>
<span class="nc" id="L297">	}</span>

	/**
	 * Same as {@link #CircularNumberPicker(android.content.Context, android.util.AttributeSet, int)} with
	 * {@link R.attr#uiNumberPickerCircularStyle} as attribute for default style.
	 */
	public CircularNumberPicker(@NonNull Context context, @Nullable AttributeSet attrs) {
<span class="nc" id="L304">		this(context, attrs, R.attr.uiNumberPickerCircularStyle);</span>
<span class="nc" id="L305">	}</span>

	/**
	 * Same as {@link #CircularNumberPicker(android.content.Context, android.util.AttributeSet, int, int)}
	 * with {@code 0} as default style.
	 */
	public CircularNumberPicker(@NonNull Context context, @Nullable AttributeSet attrs, @AttrRes int defStyleAttr) {
<span class="nc" id="L312">		super(context, attrs, defStyleAttr);</span>
<span class="nc" id="L313">		this.init(context, attrs, defStyleAttr, 0);</span>
<span class="nc" id="L314">	}</span>

	/**
	 * Creates a new instance of CircularNumberPicker for the given &lt;var&gt;context&lt;/var&gt;.
	 *
	 * @param context      Context in which will be the new view presented.
	 * @param attrs        Set of Xml attributes used to configure the new instance of this view.
	 * @param defStyleAttr An attribute which contains a reference to a default style resource for
	 *                     this view within a theme of the given context.
	 * @param defStyleRes  Resource id of the default style for the new view.
	 */
	@TargetApi(Build.VERSION_CODES.LOLLIPOP)
	public CircularNumberPicker(@NonNull Context context, @Nullable AttributeSet attrs, @AttrRes int defStyleAttr, @StyleRes int defStyleRes) {
<span class="nc" id="L327">		super(context, attrs, defStyleAttr, defStyleRes);</span>
<span class="nc" id="L328">		this.init(context, attrs, defStyleAttr, defStyleRes);</span>
<span class="nc" id="L329">	}</span>

	/**
	 * Methods =====================================================================================
	 */

	/**
	 * Called from one of constructors of this view to perform its initialization.
	 * &lt;p&gt;
	 * Initialization is done via parsing of the specified &lt;var&gt;attrs&lt;/var&gt; set and obtaining for
	 * this view specific data from it that can be used to configure this new view instance. The
	 * specified &lt;var&gt;defStyleAttr&lt;/var&gt; and &lt;var&gt;defStyleRes&lt;/var&gt; are used to obtain default data
	 * from the current theme provided by the specified &lt;var&gt;context&lt;/var&gt;.
	 */
	@SuppressWarnings({&quot;ConstantConditions&quot;, &quot;ResourceType&quot;})
	private void init(Context context, AttributeSet attrs, int defStyleAttr, int defStyleRes) {
<span class="nc" id="L345">		this.ensureRect();</span>
<span class="nc bnc" id="L346" title="All 2 branches missed.">		if (!isInEditMode()) {</span>
<span class="nc" id="L347">			final Resources.Theme theme = context.getTheme();</span>
			// Try to apply font presented within text appearance style.
<span class="nc" id="L349">			final TypedArray appearanceAttributes = theme.obtainStyledAttributes(attrs, new int[]{android.R.attr.textAppearance}, defStyleAttr, defStyleRes);</span>
<span class="nc" id="L350">			final int appearance = appearanceAttributes.getResourceId(0, -1);</span>
<span class="nc bnc" id="L351" title="All 2 branches missed.">			if (appearance != -1) {</span>
<span class="nc" id="L352">				FontApplier.applyFont(this, appearance);</span>
			}
<span class="nc" id="L354">			appearanceAttributes.recycle();</span>
			// Try to apply font presented within xml attributes.
<span class="nc" id="L356">			FontApplier.applyFont(this, attrs, defStyleAttr, defStyleRes);</span>
		}

<span class="nc" id="L359">		final TypedArray attributes = context.obtainStyledAttributes(attrs, R.styleable.Ui_NumberPicker_Circular, defStyleAttr, defStyleRes);</span>
<span class="nc" id="L360">		this.ensureTintInfo();</span>
<span class="nc bnc" id="L361" title="All 2 branches missed.">		for (int i = 0; i &lt; attributes.getIndexCount(); i++) {</span>
<span class="nc" id="L362">			final int index = attributes.getIndex(i);</span>
<span class="nc bnc" id="L363" title="All 2 branches missed.">			if (index == R.styleable.Ui_NumberPicker_Circular_uiPickerNumbers) {</span>
<span class="nc" id="L364">				final int resId = attributes.getResourceId(index, -1);</span>
<span class="nc bnc" id="L365" title="All 2 branches missed.">				if (resId != -1) {</span>
<span class="nc" id="L366">					setNumbers(context.getResources().getIntArray(resId));</span>
				}
<span class="nc bnc" id="L368" title="All 2 branches missed.">			} else if (index == R.styleable.Ui_NumberPicker_Circular_uiPickerNumberFormat) {</span>
<span class="nc" id="L369">				setNumberFormat(attributes.getString(index));</span>
<span class="nc bnc" id="L370" title="All 2 branches missed.">			} else if (index == R.styleable.Ui_NumberPicker_Circular_uiPickerSelection) {</span>
<span class="nc" id="L371">				setSelection(attributes.getInt(index, mSelection));</span>
<span class="nc bnc" id="L372" title="All 2 branches missed.">			} else if (index == R.styleable.Ui_NumberPicker_Circular_uiPickerSelectionRange) {</span>
<span class="nc" id="L373">				setSelectionRange(attributes.getInt(index, mSelectionRange));</span>
<span class="nc bnc" id="L374" title="All 2 branches missed.">			} else if (index == R.styleable.Ui_NumberPicker_Circular_android_radius) {</span>
<span class="nc" id="L375">				setRadius(attributes.getDimensionPixelSize(index, 0));</span>
<span class="nc bnc" id="L376" title="All 2 branches missed.">			} else if (index == R.styleable.Ui_NumberPicker_Circular_android_textAppearance) {</span>
<span class="nc" id="L377">				setTextAppearance(attributes.getResourceId(index, 0));</span>
<span class="nc bnc" id="L378" title="All 2 branches missed.">			} else if (index == R.styleable.Ui_NumberPicker_Circular_android_textColor) {</span>
<span class="nc" id="L379">				setTextColor(attributes.getColorStateList(index));</span>
<span class="nc bnc" id="L380" title="All 2 branches missed.">			} else if (index == R.styleable.Ui_NumberPicker_Circular_android_textSize) {</span>
<span class="nc" id="L381">				setTextSize(attributes.getDimensionPixelSize(index, 0));</span>
<span class="nc bnc" id="L382" title="All 2 branches missed.">			} else if (index == R.styleable.Ui_NumberPicker_Circular_android_textStyle) {</span>
<span class="nc" id="L383">				setTypeface(TEXT_INFO.paint.getTypeface(), attributes.getInt(index, Typeface.NORMAL));</span>
<span class="nc bnc" id="L384" title="All 2 branches missed.">			} else if (index == R.styleable.Ui_NumberPicker_Circular_uiSelectionIndicator) {</span>
<span class="nc" id="L385">				setSelectionIndicator(attributes.getDrawable(index));</span>
<span class="nc bnc" id="L386" title="All 2 branches missed.">			} else if (index == R.styleable.Ui_NumberPicker_Circular_uiSelectionIndicatorTint) {</span>
<span class="nc" id="L387">				mTintInfo.tintList = attributes.getColorStateList(index);</span>
<span class="nc bnc" id="L388" title="All 2 branches missed.">			} else if (index == R.styleable.Ui_NumberPicker_Circular_uiSelectionIndicatorTintMode) {</span>
<span class="nc" id="L389">				mTintInfo.tintMode = TintManager.parseTintMode(attributes.getInt(index, 0), PorterDuff.Mode.SRC_IN);</span>
<span class="nc bnc" id="L390" title="All 2 branches missed.">			} else if (index == R.styleable.Ui_NumberPicker_Circular_uiPickerBearingLineColor) {</span>
<span class="nc" id="L391">				setBearingLineColor(attributes.getColorStateList(index));</span>
<span class="nc bnc" id="L392" title="All 2 branches missed.">			} else if (index == R.styleable.Ui_NumberPicker_Circular_uiPickerBearingLineThickness) {</span>
<span class="nc" id="L393">				setBearingLineThickness(attributes.getDimensionPixelSize(index, 0));</span>
<span class="nc bnc" id="L394" title="All 2 branches missed.">			} else if (index == R.styleable.Ui_NumberPicker_Circular_uiPickerMiddleCircleColor) {</span>
<span class="nc" id="L395">				setMiddleCircleColor(attributes.getColor(index, 0));</span>
<span class="nc bnc" id="L396" title="All 2 branches missed.">			} else if (index == R.styleable.Ui_NumberPicker_Circular_uiPickerMiddleCircleRadius) {</span>
<span class="nc" id="L397">				setMiddleCircleRadius(attributes.getDimensionPixelSize(index, 0));</span>
			}
		}
<span class="nc" id="L400">		attributes.recycle();</span>
<span class="nc bnc" id="L401" title="All 2 branches missed.">		mTintInfo.hasTintList = mTintInfo.tintList != null;</span>
<span class="nc bnc" id="L402" title="All 2 branches missed.">		mTintInfo.hasTintMode = mTintInfo.tintMode != null;</span>
<span class="nc" id="L403">		this.applySelectionIndicatorTint();</span>
<span class="nc" id="L404">	}</span>

	/**
	 */
	@Override
	@TargetApi(Build.VERSION_CODES.ICE_CREAM_SANDWICH)
	public void onInitializeAccessibilityEvent(@NonNull AccessibilityEvent event) {
<span class="nc" id="L411">		super.onInitializeAccessibilityEvent(event);</span>
<span class="nc" id="L412">		event.setClassName(CircularNumberPicker.class.getName());</span>
<span class="nc" id="L413">	}</span>

	/**
	 */
	@Override
	@TargetApi(Build.VERSION_CODES.ICE_CREAM_SANDWICH)
	public void onInitializeAccessibilityNodeInfo(@NonNull AccessibilityNodeInfo info) {
<span class="nc" id="L420">		super.onInitializeAccessibilityNodeInfo(info);</span>
<span class="nc" id="L421">		info.setClassName(CircularNumberPicker.class.getName());</span>
<span class="nc" id="L422">	}</span>

	/**
	 * Ensures that the {@link #mRect} is initialized.
	 */
	private void ensureRect() {
<span class="nc bnc" id="L428" title="All 2 branches missed.">		if (mRect == null) this.mRect = new Rect();</span>
<span class="nc" id="L429">	}</span>

	/**
	 * Ensures that the tint info object is initialized.
	 */
	private void ensureTintInfo() {
<span class="nc bnc" id="L435" title="All 2 branches missed.">		if (mTintInfo == null) this.mTintInfo = new TintInfo();</span>
<span class="nc" id="L436">	}</span>

	/**
	 * Registers a callback to be invoked whenever a specific number is selected within this picker.
	 *
	 * @param listener The desired listener to register.
	 */
	public void setOnNumberSelectionListener(@Nullable OnNumberSelectionListener listener) {
<span class="nc" id="L444">		this.mSelectionListener = listener;</span>
<span class="nc" id="L445">	}</span>

	/**
	 * Registers a callback to be invoked whenever a specific number is changed within this picker.
	 *
	 * @param listener The desired listener to register.
	 */
	public void setOnNumberChangeListener(@Nullable OnNumberChangeListener listener) {
<span class="nc" id="L453">		this.mChangeListener = listener;</span>
<span class="nc" id="L454">	}</span>

	/**
	 * Sets a set of numbers that should be presented within this picker. The given numbers will
	 * be drawn in the circular area within this picker.
	 * &lt;p&gt;
	 * &lt;b&gt;Note&lt;/b&gt;, that this will also set a value of the &lt;b&gt;selection range&lt;/b&gt; to size of the
	 * specified &lt;var&gt;numbers&lt;/var&gt;. If this picker requires different selection range, you should
	 * change it after this call via {@link #setSelectionRange(int)}.
	 *
	 * @param numbers The desired set of numbers.
	 * @see R.attr#uiPickerNumbers ui:uiPickerNumbers
	 * @see #getNumbers()
	 */
	public void setNumbers(@Nullable int[] numbers) {
<span class="nc" id="L469">		this.mNumbers = numbers;</span>
<span class="nc bnc" id="L470" title="All 2 branches missed.">		this.mNumbersCount = mNumbers != null ? mNumbers.length : 0;</span>
<span class="nc" id="L471">		this.mSelectionRange = mNumbersCount;</span>
<span class="nc" id="L472">		invalidate();</span>
<span class="nc" id="L473">	}</span>

	/**
	 * Returns the set of numbers presented within this picker. These are the numbers that are drawn
	 * in the circular area of this picker.
	 *
	 * @return Set of numbers.
	 * @see #setNumbers(int[])
	 */
	@Nullable
	public int[] getNumbers() {
<span class="nc" id="L484">		return mNumbers;</span>
	}

	/**
	 * Returns the count of the numbers presented within this picker.
	 *
	 * @return Count of current numbers.
	 * @see #getNumbers()
	 */
	public int getNumbersCount() {
<span class="nc" id="L494">		return mNumbersCount;</span>
	}

	/**
	 * Same as {@link #setNumberFormat(NumberFormat)} for string value.
	 *
	 * @param format The desired string format.
	 */
	public void setNumberFormat(@NonNull String format) {
<span class="nc" id="L503">		setNumberFormat(new DecimalFormat(format));</span>
<span class="nc" id="L504">	}</span>

	/**
	 * Sets a number format used to format the current number values during drawing of theirs text
	 * representations.
	 *
	 * @param format The desired format.
	 * @see R.attr#uiPickerNumberFormat ui:uiPickerNumberFormat
	 * @see #setNumberFormat(String)
	 * @see #getNumberFormat()
	 */
	public void setNumberFormat(@NonNull NumberFormat format) {
<span class="nc" id="L516">		this.TEXT_INFO.format = format;</span>
<span class="nc" id="L517">		this.invalidateNumbersArea();</span>
<span class="nc" id="L518">	}</span>

	/**
	 * Returns the number format of this picker.
	 *
	 * @return Format used for numbers text formatting.
	 * @see #setNumberFormat(NumberFormat)
	 */
	@NonNull
	public NumberFormat getNumberFormat() {
<span class="nc" id="L528">		return TEXT_INFO.format;</span>
	}

	/**
	 * Sets a selection of this picker. This should be number from the range {@code [0, {@link #getSelectionRange()}]}.
	 *
	 * @param selection The desired selection value to determine which number within this picker
	 *                  should be highlighted by the selection indicator.
	 * @see R.attr#uiPickerSelection ui:uiPickerSelection
	 * @see #getSelection()
	 */
	public void setSelection(int selection) {
<span class="nc bnc" id="L540" title="All 2 branches missed.">		if (mSelection != selection) {</span>
<span class="nc" id="L541">			this.mSelection = selection;</span>
<span class="nc" id="L542">			this.invalidateNumbersArea();</span>
<span class="nc bnc" id="L543" title="All 2 branches missed.">			if (mSelectionListener != null) {</span>
<span class="nc" id="L544">				mSelectionListener.onNumberSelected(this, mSelection);</span>
			}
		}
<span class="nc" id="L547">	}</span>

	/**
	 * Returns the current selection of this picker. This is the number value which is currently
	 * highlighted by the selection indicator.
	 *
	 * @return Current selection value.
	 * @see #setSelection(int)
	 */
	public int getSelection() {
<span class="nc" id="L557">		return mSelection;</span>
	}

	/**
	 * Sets a range in which can be numbers within this picker selected. This range is used to compute
	 * the selection of this picker.
	 *
	 * @param range The desired range.
	 * @see R.attr#uiPickerSelectionRange ui:uiPickerSelectionRange
	 * @see #getSelectionRange()
	 */
	public void setSelectionRange(int range) {
<span class="nc bnc" id="L569" title="All 2 branches missed.">		if (mSelectionRange != range) {</span>
<span class="nc" id="L570">			this.mSelectionRange = range;</span>
<span class="nc" id="L571">			invalidate();</span>
		}
<span class="nc" id="L573">	}</span>

	/**
	 * Returns the selection range of this picker.
	 *
	 * @return Selection range.
	 * @see #setSelectionRange(int)
	 */
	public int getSelectionRange() {
<span class="nc" id="L582">		return mSelectionRange;</span>
	}

	/**
	 * Sets a radius determining size of the numbers circle.
	 *
	 * @param radius The desired radius.
	 * @see android.R.attr#radius android:radius
	 * @see #getRadius()
	 */
	public void setRadius(@FloatRange(from = 0) float radius) {
<span class="nc bnc" id="L593" title="All 2 branches missed.">		if (mRadius != radius) {</span>
<span class="nc" id="L594">			this.mRadius = Math.max(0, radius);</span>
<span class="nc" id="L595">			requestLayout();</span>
		}
<span class="nc" id="L597">	}</span>

	/**
	 * Returns the radius of the numbers circle.
	 *
	 * @return Numbers circle radius.
	 * @see #setRadius(float)
	 */
	@FloatRange(from = 0)
	public float getRadius() {
<span class="nc" id="L607">		return mRadius;</span>
	}

	/**
	 * Sets a text color, size, and style for the numbers text from the specified TextAppearance
	 * resource.
	 *
	 * @param resId Resource id of the desired TextAppearance style.
	 * @see android.R.attr#textAppearance android:textAppearance
	 */
	public void setTextAppearance(@StyleRes int resId) {
<span class="nc bnc" id="L618" title="All 4 branches missed.">		if (TEXT_INFO.fromTextAppearanceStyle(getContext(), resId) &amp;&amp; TEXT_INFO.updatePaint(getDrawableState())) {</span>
<span class="nc" id="L619">			this.invalidateNumbersArea();</span>
		}
<span class="nc" id="L621">	}</span>

	/**
	 * Same as {@link #setTextSize(int, float)} in {@link TypedValue#COMPLEX_UNIT_SP} and the specified
	 * &lt;var&gt;size&lt;/var&gt;.
	 *
	 * @see android.R.attr#textSize android:textSize
	 * @see #getTextSize()
	 */
	public void setTextSize(float size) {
<span class="nc" id="L631">		setTextSize(TypedValue.COMPLEX_UNIT_SP, size);</span>
<span class="nc" id="L632">	}</span>

	/**
	 * Sets a size for the numbers text to the given &lt;var&gt;unit&lt;/var&gt; and &lt;var&gt;size&lt;/var&gt;.
	 *
	 * @param unit The desired dimension unit. See {@link TypedValue} for possible units.
	 * @param size The desired size in the specified unit.
	 */
	public void setTextSize(int unit, float size) {
<span class="nc" id="L641">		setRawTextSize(TypedValue.applyDimension(unit, size, getResources().getDisplayMetrics()));</span>
<span class="nc" id="L642">	}</span>

	/**
	 * Sets the raw text size for the Paint used to draw numbers graphics.
	 *
	 * @param size The desired raw size in pixels.
	 */
	private void setRawTextSize(float size) {
<span class="nc bnc" id="L650" title="All 2 branches missed.">		if (TEXT_INFO.updateTextSize(size)) this.invalidateNumbersArea();</span>
<span class="nc" id="L651">	}</span>

	/**
	 * Returns the size of the numbers text.
	 *
	 * @return Size used when drawing numbers text graphics.
	 * @see #setTextSize(int, float)
	 * @see #setTextAppearance(int)
	 */
	public float getTextSize() {
<span class="nc" id="L661">		return TEXT_INFO.paint.getTextSize();</span>
	}

	/**
	 * Sets a single color for the numbers text.
	 *
	 * @param color The desired color.
	 * @see android.R.attr#textColor android:textColor
	 * @see #setTextColor(ColorStateList)
	 * @see #getTextColors()
	 */
	public void setTextColor(@ColorInt int color) {
<span class="nc" id="L673">		setTextColor(ColorStateList.valueOf(color));</span>
<span class="nc" id="L674">	}</span>

	/**
	 * Sets colors for the numbers text.
	 *
	 * @param colors The desired colors state list.
	 * @see android.R.attr#textColor android:textColor
	 * @see #setTextColor(int)
	 * @see #getTextColors()
	 */
	public void setTextColor(@NonNull ColorStateList colors) {
<span class="nc bnc" id="L685" title="All 2 branches missed.">		if (TEXT_INFO.updateTextColor(colors, getDrawableState())) this.invalidateNumbersArea();</span>
<span class="nc" id="L686">	}</span>

	/**
	 * Returns the colors for the numbers text.
	 *
	 * @return List of colors used when drawing numbers text graphics.
	 * @see #setTextColor(ColorStateList)
	 * @see #setTextColor(int)
	 * @see #getCurrentTextColor()
	 */
	@NonNull
	@SuppressWarnings(&quot;ConstantConditions&quot;)
	public ColorStateList getTextColors() {
<span class="nc" id="L699">		return TEXT_INFO.mAppearance.getTextColor();</span>
	}

	/**
	 * Returns the current color used to draw the numbers text.
	 *
	 * @return Current numbers text color.
	 * @see #getTextColors()
	 * @see #setTextColor(ColorStateList)
	 */
	@ColorInt
	public int getCurrentTextColor() {
<span class="nc" id="L711">		return TEXT_INFO.paint.getColor();</span>
	}

	/**
	 */
	@Override
	public void setFont(@NonNull String fontPath) {
<span class="nc" id="L718">		FontApplier.applyFont(this, fontPath);</span>
<span class="nc" id="L719">	}</span>

	/**
	 */
	@Override
	public void setFont(@Nullable Font font) {
<span class="nc" id="L725">		FontApplier.applyFont(this, font);</span>
<span class="nc" id="L726">	}</span>

	/**
	 * Sets the typeface and style in which the numbers text should be displayed, and turns on the
	 * fake bold and italic bits in the Paint if the Typeface that you provided does not have all the
	 * bits in the style that you specified.
	 *
	 * @param typeface The desired typeface. May be {@code null} to create default one from the specified
	 *                 &lt;var&gt;style&lt;/var&gt;.
	 * @param style    One of {@link Typeface#NORMAL}, {@link Typeface#BOLD}, {@link Typeface#ITALIC}
	 *                 or {@link Typeface#BOLD_ITALIC}.
	 */
	@Override
	public void setTypeface(@Nullable Typeface typeface, @TextAppearance.TextStyle int style) {
<span class="nc bnc" id="L740" title="All 2 branches missed.">		if (TEXT_INFO.updateTypeface(typeface, style)) this.invalidateNumbersArea();</span>
<span class="nc" id="L741">	}</span>

	/**
	 * Sets the typeface and style in which the numbers text should be displayed.
	 *
	 * @param typeface The desired typeface. May be {@code null} to use a default one.
	 */
	@Override
	public void setTypeface(@Nullable Typeface typeface) {
<span class="nc bnc" id="L750" title="All 2 branches missed.">		if (TEXT_INFO.updateTypeface(typeface)) this.invalidateNumbersArea();</span>
<span class="nc" id="L751">	}</span>

	/**
	 * Returns the typeface used to draw text of the numbers.
	 *
	 * @return Numbers text typeface.
	 * @see #setTypeface(Typeface, int)
	 * @see #setTypeface(Typeface)
	 * @see #getTypefaceStyle()
	 * @see #setTextAppearance(int)
	 */
	@Nullable
	public Typeface getTypeface() {
<span class="nc" id="L764">		return TEXT_INFO.paint.getTypeface();</span>
	}

	/**
	 * Returns the style of the typeface used to draw the numbers text.
	 *
	 * @return Typeface style.
	 * @see #getTypeface()
	 * @see #setTypeface(Typeface, int)
	 */
	@TextAppearance.TextStyle
	@SuppressWarnings(&quot;ResourceType&quot;)
	public int getTypefaceStyle() {
<span class="nc" id="L777">		final Typeface typeface = TEXT_INFO.paint.getTypeface();</span>
<span class="nc bnc" id="L778" title="All 2 branches missed.">		return typeface != null ? typeface.getStyle() : Typeface.NORMAL;</span>
	}

	/**
	 * Same as {@link #setSelectionIndicator(android.graphics.drawable.Drawable)} for resource id.
	 *
	 * @param resId Resource id of the desired drawable for selection indicator. May be {@code 0} to
	 *              remove the current indicator.
	 */
	public void setSelectionIndicator(@DrawableRes int resId) {
<span class="nc bnc" id="L788" title="All 2 branches missed.">		if (resId == 0) {</span>
<span class="nc" id="L789">			setSelectionIndicator(null);</span>
<span class="nc bnc" id="L790" title="All 2 branches missed.">		} else if (mSelectionIndicatorRes != resId) {</span>
<span class="nc" id="L791">			setSelectionIndicator(ResourceUtils.getDrawable(</span>
<span class="nc" id="L792">					getResources(),</span>
					mSelectionIndicatorRes = resId,
<span class="nc" id="L794">					getContext().getTheme())</span>
			);
		}
<span class="nc" id="L797">	}</span>

	/**
	 * Sets the drawable used to draw the number selection indicator.
	 *
	 * @param indicator The desired drawable for selection indicator. May be {@code null} to clear
	 *                  the current one.
	 * @see R.attr#uiSelectionIndicator ui:uiSelectionIndicator
	 * @see #setSelectionIndicatorTintList(ColorStateList)
	 * @see #setSelectionIndicatorTintMode(PorterDuff.Mode)
	 * @see #getSelectionIndicator()
	 */
	public void setSelectionIndicator(@Nullable Drawable indicator) {
<span class="nc bnc" id="L810" title="All 2 branches missed.">		if (mSelectionIndicator != indicator) {</span>
			final boolean needUpdate;
<span class="nc bnc" id="L812" title="All 2 branches missed.">			if (mSelectionIndicator != null) {</span>
<span class="nc" id="L813">				mSelectionIndicator.setCallback(null);</span>
<span class="nc" id="L814">				unscheduleDrawable(mSelectionIndicator);</span>
<span class="nc" id="L815">				needUpdate = true;</span>
			} else {
<span class="nc" id="L817">				needUpdate = false;</span>
			}

<span class="nc bnc" id="L820" title="All 2 branches missed.">			if (indicator != null) {</span>
<span class="nc" id="L821">				indicator.setCallback(this);</span>
<span class="nc bnc" id="L822" title="All 2 branches missed.">				indicator.setVisible(getVisibility() == VISIBLE, false);</span>
<span class="nc bnc" id="L823" title="All 2 branches missed.">				if (indicator.getPadding(mRect)) {</span>
<span class="nc" id="L824">					TEXT_INFO.padding = Math.max(mRect.left, Math.max(mRect.top, Math.max(mRect.right, mRect.bottom)));</span>
				}
			} else {
<span class="nc" id="L827">				this.mSelectionIndicatorRes = 0;</span>
			}
<span class="nc" id="L829">			this.mSelectionIndicator = indicator;</span>
<span class="nc" id="L830">			this.applySelectionIndicatorTint();</span>
<span class="nc bnc" id="L831" title="All 2 branches missed.">			if (needUpdate) {</span>
<span class="nc bnc" id="L832" title="All 2 branches missed.">				if (mSelectionIndicator.isStateful()) {</span>
<span class="nc" id="L833">					mSelectionIndicator.setState(getDrawableState());</span>
				}
<span class="nc" id="L835">				this.invalidateNumbersArea();</span>
			}
		}
<span class="nc" id="L838">	}</span>

	/**
	 * Returns the current selection indicator's drawable.
	 * &lt;p&gt;
	 * &lt;b&gt;Note, that on pre {@link android.os.Build.VERSION_CODES#LOLLIPOP LOLLIPOP} Android versions
	 * this method will return an instance of {@link TintDrawable TintDrawable} if tint has been applied
	 * via {@link #setSelectionIndicatorTintList(ColorStateList)}.&lt;/b&gt;
	 * &lt;p&gt;
	 * The original wrapped indicator drawable can be obtained via {@link TintDrawable#getDrawable()}.
	 *
	 * @return Selection indicator's drawable.
	 * @see #setSelectionIndicator(Drawable)
	 */
	@Nullable
	public Drawable getSelectionIndicator() {
<span class="nc" id="L854">		return mSelectionIndicator;</span>
	}

	/**
	 * Applies a tint to the selection indicator. This call does not modify the current tint mode,
	 * which is {@link PorterDuff.Mode#SRC_IN} by default.
	 *
	 * @param tint The tint to apply, may be {@code null} to clear the current tint.
	 * @see R.attr#uiSelectionIndicatorTint ui:uiSelectionIndicatorTint
	 * @see #getSelectionIndicatorTintList()
	 */
	public void setSelectionIndicatorTintList(@Nullable ColorStateList tint) {
<span class="nc" id="L866">		this.ensureTintInfo();</span>
<span class="nc" id="L867">		mTintInfo.tintList = tint;</span>
<span class="nc" id="L868">		mTintInfo.hasTintList = true;</span>
<span class="nc" id="L869">		this.applySelectionIndicatorTint();</span>
<span class="nc" id="L870">	}</span>

	/**
	 * Returns the tint applied to the selection indicator's graphics.
	 *
	 * @return The discrete indicator's drawable tint.
	 * @see #setSelectionIndicatorTintList(ColorStateList)
	 */
	@Nullable
	public ColorStateList getSelectionIndicatorTintList() {
<span class="nc bnc" id="L880" title="All 2 branches missed.">		return mTintInfo != null ? mTintInfo.tintList : null;</span>
	}

	/**
	 * Specifies the blending mode used to apply the tint specified by {@link #setSelectionIndicatorTintList(ColorStateList)}}
	 * to the selection indicator. The default mode is {@link PorterDuff.Mode#SRC_IN}.
	 *
	 * @param tintMode The blending mode used to apply the tint, may be {@code null} to clear the
	 *                 current tint.
	 * @see R.attr#uiSelectionIndicatorTintMode ui:uiSelectionIndicatorTintMode
	 * @see #getSelectionIndicatorTintMode()
	 */
	public void setSelectionIndicatorTintMode(@Nullable PorterDuff.Mode tintMode) {
<span class="nc" id="L893">		this.ensureTintInfo();</span>
<span class="nc" id="L894">		mTintInfo.tintMode = tintMode;</span>
<span class="nc" id="L895">		mTintInfo.hasTintMode = true;</span>
<span class="nc" id="L896">		this.applySelectionIndicatorTint();</span>
<span class="nc" id="L897">	}</span>

	/**
	 * Returns the blending mode used to apply the tint to the selection indicator's graphics.
	 *
	 * @return The selection indicator's graphics blending mode used to apply the tint.
	 * @see #setSelectionIndicatorTintMode(PorterDuff.Mode)
	 */
	@Nullable
	public PorterDuff.Mode getSelectionIndicatorTintMode() {
<span class="nc bnc" id="L907" title="All 2 branches missed.">		return mTintInfo != null ? mTintInfo.tintMode : null;</span>
	}

	/**
	 * Applies current tint from {@link #mTintInfo} to the current selection indicator.
	 */
	@SuppressWarnings(&quot;NewApi&quot;)
	private void applySelectionIndicatorTint() {
<span class="nc" id="L915">		this.ensureTintInfo();</span>
<span class="nc bnc" id="L916" title="All 6 branches missed.">		if (mSelectionIndicator == null || (!mTintInfo.hasTintList &amp;&amp; !mTintInfo.hasTintMode)) {</span>
<span class="nc" id="L917">			return;</span>
		}
<span class="nc bnc" id="L919" title="All 2 branches missed.">		if (UiConfig.MATERIALIZED) {</span>
<span class="nc" id="L920">			this.mSelectionIndicator = mSelectionIndicator.mutate();</span>
<span class="nc bnc" id="L921" title="All 2 branches missed.">			if (mTintInfo.hasTintList) {</span>
<span class="nc" id="L922">				mSelectionIndicator.setTintList(mTintInfo.tintList);</span>
			}
<span class="nc bnc" id="L924" title="All 2 branches missed.">			if (mTintInfo.hasTintMode) {</span>
<span class="nc" id="L925">				mSelectionIndicator.setTintMode(mTintInfo.tintMode);</span>
			}

<span class="nc bnc" id="L928" title="All 2 branches missed.">			if (mSelectionIndicator.isStateful()) {</span>
<span class="nc" id="L929">				mSelectionIndicator.setState(getDrawableState());</span>
			}
<span class="nc" id="L931">			return;</span>
		}
<span class="nc" id="L933">		final boolean isTintDrawable = mSelectionIndicator instanceof TintDrawable;</span>
<span class="nc bnc" id="L934" title="All 2 branches missed.">		final TintDrawable tintDrawable = isTintDrawable ? (TintDrawable) mSelectionIndicator : new TintDrawable(mSelectionIndicator);</span>
<span class="nc bnc" id="L935" title="All 2 branches missed.">		if (mTintInfo.hasTintList) {</span>
<span class="nc" id="L936">			tintDrawable.setTintList(mTintInfo.tintList);</span>
		}
<span class="nc bnc" id="L938" title="All 2 branches missed.">		if (mTintInfo.hasTintMode) {</span>
<span class="nc" id="L939">			tintDrawable.setTintMode(mTintInfo.tintMode);</span>
		}
<span class="nc bnc" id="L941" title="All 2 branches missed.">		if (isTintDrawable) {</span>
<span class="nc" id="L942">			return;</span>
		}
<span class="nc" id="L944">		mSelectionIndicator.setCallback(this);</span>
<span class="nc bnc" id="L945" title="All 2 branches missed.">		if (mSelectionIndicator.isStateful()) {</span>
<span class="nc" id="L946">			mSelectionIndicator.setState(getDrawableState());</span>
		}
<span class="nc" id="L948">	}</span>

	/**
	 * Sets a single color for the bearing line pointing to the selection indicator position.
	 *
	 * @param color The desired color.
	 * @see R.attr#uiPickerBearingLineColor ui:uiPickerBearingLineColor
	 * @see #setBearingLineColor(ColorStateList)
	 * @see #getBearingLineColors()
	 */
	public void setBearingLineColor(@ColorInt int color) {
<span class="nc" id="L959">		setBearingLineColor(ColorStateList.valueOf(color));</span>
<span class="nc" id="L960">	}</span>

	/**
	 * Sets colors for the bearing line pointing to the selection indicator position.
	 *
	 * @param colors The desired colors state list.
	 * @see R.attr#uiPickerBearingLineColor ui:uiPickerBearingLineColor
	 * @see #setBearingLineColor(int)
	 * @see #getBearingLineColors()
	 */
	public void setBearingLineColor(@NonNull ColorStateList colors) {
<span class="nc bnc" id="L971" title="All 2 branches missed.">		if (BEARING_LINE_INFO.updateColors(colors, getDrawableState())) invalidate();</span>
<span class="nc" id="L972">	}</span>

	/**
	 * Returns the colors for the bearing line.
	 *
	 * @return List of colors used when drawing the selection indicator's bearing line.
	 * @see #setBearingLineColor(ColorStateList)
	 * @see #setBearingLineColor(int)
	 * @see #getBearingLineCurrentColor()
	 */
	@NonNull
	public ColorStateList getBearingLineColors() {
<span class="nc" id="L984">		return BEARING_LINE_INFO.colors;</span>
	}

	/**
	 * Returns the current color used to draw the selection indicator's bearing line.
	 *
	 * @return Current bearing line color.
	 * @see #getBearingLineColors()
	 * @see #setBearingLineColor(ColorStateList)
	 */
	@ColorInt
	public int getBearingLineCurrentColor() {
<span class="nc" id="L996">		return BEARING_LINE_INFO.paint.getColor();</span>
	}

	/**
	 * Sets a thickness for bearing line of the selection indicator drawn from the center of this
	 * picker to the edge of the circle with numbers at position of the currently selected number.
	 *
	 * @param thickness The desired line thickness. Should be positive value.
	 * @see R.attr#uiPickerBearingLineThickness ui:uiPickerBearingLineThickness
	 * @see #getBearingLineThickness()
	 */
	public void setBearingLineThickness(@FloatRange(from = 0) float thickness) {
<span class="nc bnc" id="L1008" title="All 2 branches missed.">		if (BEARING_LINE_INFO.thickness != thickness) {</span>
<span class="nc" id="L1009">			BEARING_LINE_INFO.thickness = Math.max(0, thickness);</span>
<span class="nc" id="L1010">			invalidate();</span>
		}
<span class="nc" id="L1012">	}</span>

	/**
	 * Returns the thickness of the selection indicator's bearing line.
	 *
	 * @return Line thickness.
	 * @see #setBearingLineThickness(float)
	 */
	@FloatRange(from = 0)
	public float getBearingLineThickness() {
<span class="nc" id="L1022">		return BEARING_LINE_INFO.thickness;</span>
	}


	/**
	 * Sets a single color for the circle drawn in the middle of this picker as origin point for the
	 * selection indicator's bearing line.
	 *
	 * @param color The desired circle color.
	 * @see R.attr#uiPickerMiddleCircleColor ui:uiPickerMiddleCircleColor
	 * @see #getMiddleCircleColors()
	 * @see #getMiddleCircleCurrentColor()
	 */
	public void setMiddleCircleColor(@ColorInt int color) {
<span class="nc" id="L1036">		setMiddleCircleColor(ColorStateList.valueOf(color));</span>
<span class="nc" id="L1037">	}</span>

	/**
	 * Sets colors for the circle drawn in the middle of this picker as origin point for the selection
	 * indicator's bearing line.
	 *
	 * @param colors The desired colors state list.
	 * @see R.attr#uiPickerMiddleCircleColor ui:uiPickerMiddleCircleColor
	 * @see #getMiddleCircleColors()
	 * @see #getMiddleCircleCurrentColor() ()
	 */
	public void setMiddleCircleColor(@NonNull ColorStateList colors) {
<span class="nc bnc" id="L1049" title="All 2 branches missed.">		if (MIDDLE_CIRCLE_INFO.updateColors(colors, getDrawableState()))</span>
<span class="nc" id="L1050">			this.invalidateMiddleCircleArea();</span>
<span class="nc" id="L1051">	}</span>

	/**
	 * Returns the middle circle colors.
	 *
	 * @return Colors used to draw the middle circle of this picker.
	 * @see #setMiddleCircleColor(ColorStateList)
	 * @see #setMiddleCircleColor(int)
	 */
	@NonNull
	public ColorStateList getMiddleCircleColors() {
<span class="nc" id="L1062">		return MIDDLE_CIRCLE_INFO.colors;</span>
	}

	/**
	 * Returns the current color used to draw the middle circle of this picker.
	 *
	 * @return Current middle circle color.
	 * @see #setMiddleCircleColor(ColorStateList)
	 * @see #setMiddleCircleColor(int)
	 */
	public int getMiddleCircleCurrentColor() {
<span class="nc" id="L1073">		return MIDDLE_CIRCLE_INFO.paint.getColor();</span>
	}

	/**
	 * Sets a radius for the circle drawn in the middle of this picker as origin point for the selection
	 * indicator's bearing line.
	 *
	 * @param radius The desired circle radius. Should be positive value.
	 * @see R.attr#uiPickerMiddleCircleRadius ui:uiPickerMiddleCircleRadius
	 * @see #getMiddleCircleRadius()
	 */
	public void setMiddleCircleRadius(@FloatRange(from = 0) float radius) {
<span class="nc bnc" id="L1085" title="All 2 branches missed.">		if (MIDDLE_CIRCLE_INFO.radius != radius) {</span>
<span class="nc" id="L1086">			MIDDLE_CIRCLE_INFO.radius = Math.max(0, radius);</span>
<span class="nc" id="L1087">			invalidate();</span>
		}
<span class="nc" id="L1089">	}</span>

	/**
	 * Returns the radius of the middle circle.
	 *
	 * @return Middle circle's radius.
	 * @see #setMiddleCircleRadius(float)
	 */
	@FloatRange(from = 0)
	public float getMiddleCircleRadius() {
<span class="nc" id="L1099">		return MIDDLE_CIRCLE_INFO.radius;</span>
	}

	/**
	 */
	@Override
	public void setBackgroundDrawable(Drawable background) {
<span class="nc" id="L1106">		super.setBackgroundDrawable(background);</span>
<span class="nc" id="L1107">		this.resolvePadding();</span>
<span class="nc" id="L1108">	}</span>

	/**
	 */
	@Override
	public void setPadding(int left, int top, int right, int bottom) {
<span class="nc" id="L1114">		super.setPadding(left, top, right, bottom);</span>
<span class="nc" id="L1115">		this.resolvePadding();</span>
<span class="nc" id="L1116">	}</span>

	/**
	 */
	@Override
	public void setPaddingRelative(int start, int top, int end, int bottom) {
<span class="nc" id="L1122">		super.setPaddingRelative(start, top, end, bottom);</span>
<span class="nc" id="L1123">		this.resolvePadding();</span>
<span class="nc" id="L1124">	}</span>

	/**
	 * Updates value of {@link #mPadding} according to the current specified padding values where
	 * also padding of the background's drawable is taken into count.
	 */
	private void resolvePadding() {
<span class="nc" id="L1131">		int paddingLeft = getPaddingLeft();</span>
<span class="nc" id="L1132">		int paddingTop = getPaddingTop();</span>
<span class="nc" id="L1133">		int paddingRight = getPaddingRight();</span>
<span class="nc" id="L1134">		int paddingBottom = getPaddingBottom();</span>
<span class="nc" id="L1135">		final Drawable background = getBackground();</span>
<span class="nc" id="L1136">		this.ensureRect();</span>
<span class="nc bnc" id="L1137" title="All 4 branches missed.">		if (background != null &amp;&amp; background.getPadding(mRect)) {</span>
<span class="nc" id="L1138">			paddingLeft = Math.max(paddingLeft, mRect.left);</span>
<span class="nc" id="L1139">			paddingTop = Math.max(paddingTop, mRect.top);</span>
<span class="nc" id="L1140">			paddingRight = Math.max(paddingRight, mRect.right);</span>
<span class="nc" id="L1141">			paddingBottom = Math.max(paddingBottom, mRect.bottom);</span>
		}
<span class="nc" id="L1143">		this.mPadding = Math.max(paddingLeft, Math.max(paddingTop, Math.max(paddingRight, paddingBottom)));</span>
<span class="nc" id="L1144">	}</span>

	/**
	 */
	@Override
	@SuppressWarnings(&quot;SuspiciousNameCombination&quot;)
	protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
<span class="nc" id="L1151">		final int widthMode = MeasureSpec.getMode(widthMeasureSpec);</span>
<span class="nc" id="L1152">		final int heightMode = MeasureSpec.getMode(heightMeasureSpec);</span>
<span class="nc" id="L1153">		final int widthSize = MeasureSpec.getSize(widthMeasureSpec);</span>
<span class="nc" id="L1154">		final int heightSize = MeasureSpec.getSize(heightMeasureSpec);</span>
<span class="nc" id="L1155">		final int diameter = Math.round(mRadius * 2);</span>
<span class="nc" id="L1156">		int width = diameter;</span>
<span class="nc" id="L1157">		int height = diameter;</span>

<span class="nc bnc" id="L1159" title="All 3 branches missed.">		switch (widthMode) {</span>
			case MeasureSpec.AT_MOST:
<span class="nc" id="L1161">				width = Math.min(width, widthSize);</span>
<span class="nc" id="L1162">				break;</span>
			case MeasureSpec.EXACTLY:
<span class="nc" id="L1164">				width = widthSize;</span>
<span class="nc" id="L1165">				break;</span>
			case MeasureSpec.UNSPECIFIED:
			default:
				break;
		}

<span class="nc bnc" id="L1171" title="All 3 branches missed.">		switch (heightMode) {</span>
			case MeasureSpec.AT_MOST:
<span class="nc" id="L1173">				height = Math.min(height, heightSize);</span>
<span class="nc" id="L1174">				break;</span>
			case MeasureSpec.EXACTLY:
<span class="nc" id="L1176">				height = heightSize;</span>
<span class="nc" id="L1177">				break;</span>
			case MeasureSpec.UNSPECIFIED:
			default:
				break;
		}

		// Check also against minimum size.
<span class="nc" id="L1184">		width = Math.max(width, getSuggestedMinimumWidth());</span>
<span class="nc" id="L1185">		height = Math.max(height, getSuggestedMinimumHeight());</span>

		// Ensure that the width and height are equals.
<span class="nc bnc" id="L1188" title="All 2 branches missed.">		if (width != height) {</span>
<span class="nc bnc" id="L1189" title="All 2 branches missed.">			if (width &gt; height) {</span>
<span class="nc" id="L1190">				width = height;</span>
			} else {
<span class="nc" id="L1192">				height = width;</span>
			}
		}
<span class="nc" id="L1195">		this.mRadius = width / 2f;</span>
<span class="nc" id="L1196">		setMeasuredDimension(width, height);</span>
<span class="nc" id="L1197">	}</span>

	/**
	 */
	@Override
	protected void onSizeChanged(int w, int h, int oldw, int oldh) {
<span class="nc" id="L1203">		super.onSizeChanged(w, h, oldw, oldh);</span>
<span class="nc" id="L1204">		this.mCenter = w / 2f;</span>
<span class="nc" id="L1205">	}</span>

	/**
	 */
	@Override
	protected void onAnimationStart() {
<span class="nc" id="L1211">		super.onAnimationStart();</span>
<span class="nc" id="L1212">		this.updatePrivateFlags(PFLAG_ANIMATING, true);</span>
<span class="nc" id="L1213">	}</span>

	/**
	 */
	@Override
	protected void onAnimationEnd() {
<span class="nc" id="L1219">		super.onAnimationEnd();</span>
<span class="nc" id="L1220">		this.updatePrivateFlags(PFLAG_ANIMATING, false);</span>
<span class="nc" id="L1221">	}</span>

	/**
	 */
	@Override
	public boolean onTouchEvent(@NonNull MotionEvent event) {
		// Do not process touches if this view is disabled or some animation is running upon it.
<span class="nc bnc" id="L1228" title="All 4 branches missed.">		if (!isEnabled() || hasPrivateFlag(PFLAG_ANIMATING)) {</span>
<span class="nc" id="L1229">			return super.onTouchEvent(event);</span>
		}

<span class="nc" id="L1232">		final float touchX = event.getX();</span>
<span class="nc" id="L1233">		final float touchY = event.getY();</span>

<span class="nc" id="L1235">		boolean invalidate = false;</span>
<span class="nc" id="L1236">		boolean processed = super.onTouchEvent(event);</span>
<span class="nc bnc" id="L1237" title="All 4 branches missed.">		switch (event.getAction() &amp; MotionEvent.ACTION_MASK) {</span>
			case MotionEvent.ACTION_DOWN:
				// Check if the touch is within the numbers area.
<span class="nc bnc" id="L1240" title="All 2 branches missed.">				if (isTouchWithinNumbersArc(touchX, touchY)) {</span>
<span class="nc" id="L1241">					this.updatePrivateFlags(PFLAG_DRAGGING, true);</span>
<span class="nc" id="L1242">					setPressed(true);</span>
<span class="nc" id="L1243">					this.changeSelectionTo(calculateSelection(touchX, touchY));</span>
<span class="nc" id="L1244">					processed = true;</span>
<span class="nc" id="L1245">					invalidate = true;</span>
				} else {
<span class="nc" id="L1247">					this.updatePrivateFlags(PFLAG_DRAGGING, false);</span>
<span class="nc" id="L1248">					processed = false;</span>
				}
<span class="nc" id="L1250">				break;</span>
			case MotionEvent.ACTION_MOVE:
<span class="nc bnc" id="L1252" title="All 4 branches missed.">				if (hasPrivateFlag(PFLAG_DRAGGING) &amp;&amp; isTouchWithinNumbersArc(touchX, touchY)) {</span>
<span class="nc" id="L1253">					this.changeSelectionTo(calculateSelection(touchX, touchY));</span>
<span class="nc" id="L1254">					invalidate = true;</span>
				} else {
<span class="nc" id="L1256">					this.updatePrivateFlags(PFLAG_DRAGGING, false);</span>
<span class="nc" id="L1257">					processed = true;</span>
<span class="nc" id="L1258">					setPressed(false);</span>
				}
<span class="nc" id="L1260">				break;</span>
			case MotionEvent.ACTION_UP:
			case MotionEvent.ACTION_CANCEL:
<span class="nc" id="L1263">				setPressed(false);</span>
<span class="nc bnc" id="L1264" title="All 2 branches missed.">				if (hasPrivateFlag(PFLAG_DRAGGING)) {</span>
<span class="nc bnc" id="L1265" title="All 2 branches missed.">					if (mSelectionListener != null) {</span>
<span class="nc" id="L1266">						mSelectionListener.onNumberSelected(this, mSelection);</span>
					}
<span class="nc" id="L1268">					processed = true;</span>
				}
<span class="nc" id="L1270">				this.updatePrivateFlags(PFLAG_DRAGGING, false);</span>
<span class="nc" id="L1271">				invalidate = true;</span>
				break;
		}
<span class="nc bnc" id="L1274" title="All 2 branches missed.">		if (invalidate) {</span>
<span class="nc" id="L1275">			invalidate();</span>
		}
<span class="nc" id="L1277">		return processed;</span>
	}

	/**
	 * Checks whether a touch with the specified coordinates is within numbers arc of this picker
	 * or not.
	 *
	 * @param touchX The x coordinate of the touch.
	 * @param touchY The y coordinate of the touch.
	 * @return {@code True} if touch with the given coordinates is within the numbers arc,
	 * {@code false} otherwise.
	 */
	private boolean isTouchWithinNumbersArc(float touchX, float touchY) {
<span class="nc" id="L1290">		final double dist = Math.sqrt(Math.pow(mCenter - touchX, 2) + Math.pow(mCenter - touchY, 2));</span>
<span class="nc" id="L1291">		final float outerRadius = mCenter - mPadding;</span>
<span class="nc" id="L1292">		final float numberAreaRadius = TEXT_INFO.padding + TEXT_INFO.paint.getTextSize();</span>
<span class="nc" id="L1293">		final float touchDistTolerance = numberAreaRadius * TOUCH_TOLERANCE_RATIO;</span>
<span class="nc bnc" id="L1294" title="All 4 branches missed.">		return dist &lt;= (outerRadius + touchDistTolerance) &amp;&amp; dist &gt;= (outerRadius - touchDistTolerance - numberAreaRadius);</span>
	}

	/**
	 * Calculates a new selection value depending on the specified &lt;var&gt;touchX&lt;/var&gt; and &lt;var&gt;touchY&lt;/var&gt;
	 * coordinates.
	 *
	 * @param touchX The x touch coordinate.
	 * @param touchY The y touch coordinate.
	 * @return Selection number for the specified touch coordinates.
	 */
	private int calculateSelection(float touchX, float touchY) {
<span class="nc" id="L1306">		final int selection = Math.round((float) (angleAgainstCenter(touchX, touchY) / 360) * mSelectionRange);</span>
<span class="nc bnc" id="L1307" title="All 2 branches missed.">		return selection &lt; mSelectionRange ? selection : 0;</span>
	}

	/**
	 * Computes the angle against the current center of this picker for the specified point coordinates.
	 *
	 * @param pointX The x coordinate of point for which to compute angle.
	 * @param pointY The y coordinate of point for which to compute angle.
	 * @return Computed angle in degrees from the range {@code [0, 360]}.
	 */
	private double angleAgainstCenter(float pointX, float pointY) {
<span class="nc" id="L1318">		double rads = Math.atan2(mCenter - pointX, mCenter - pointY);</span>
<span class="nc bnc" id="L1319" title="All 2 branches missed.">		if (rads &lt; 0) rads = Math.abs(rads);</span>
<span class="nc" id="L1320">		else rads = Math.PI * 2 - rads;</span>
<span class="nc" id="L1321">		return Math.toDegrees(rads);</span>
	}

	/**
	 * Changes the current value of selection to the specified one and notifies {@link OnNumberChangeListener}
	 * if it is set.
	 *
	 * @param selection The new selection to be changed.
	 * @return {@code True} if selection has changed, {@code false} otherwise.
	 */
	private boolean changeSelectionTo(int selection) {
<span class="nc bnc" id="L1332" title="All 2 branches missed.">		if (mSelection != selection) {</span>
<span class="nc" id="L1333">			this.mSelection = selection;</span>
<span class="nc bnc" id="L1334" title="All 2 branches missed.">			if (mChangeListener != null) {</span>
<span class="nc" id="L1335">				mChangeListener.onNumberChanged(this, mSelection);</span>
			}
<span class="nc" id="L1337">			return true;</span>
		}
<span class="nc" id="L1339">		return false;</span>
	}

	/**
	 */
	@Override
	protected void drawableStateChanged() {
<span class="nc" id="L1346">		super.drawableStateChanged();</span>
<span class="nc" id="L1347">		this.mDrawableStateSet = getDrawableState();</span>
<span class="nc" id="L1348">		this.mDrawableStateSetSelected = WidgetStateSet.expandStates(mDrawableStateSet, mDrawableStateSet.length + 1);</span>
<span class="nc" id="L1349">		this.mDrawableStateSetSelected[mDrawableStateSetSelected.length - 1] = android.R.attr.state_selected;</span>
<span class="nc bnc" id="L1350" title="All 4 branches missed.">		if (mSelectionIndicator != null &amp;&amp; mSelectionIndicator.isStateful()) {</span>
<span class="nc" id="L1351">			mSelectionIndicator.setState(mDrawableStateSet);</span>
		} else {
<span class="nc" id="L1353">			this.invalidateNumbersArea();</span>
		}
<span class="nc" id="L1355">	}</span>

	/**
	 * Invalidates this view in area where the numbers are drawn.
	 *
	 * @see #invalidate(Rect)
	 */
	private void invalidateNumbersArea() {
<span class="nc" id="L1363">		invalidate(</span>
				(int) mPadding,
				(int) mPadding,
				(int) (mRadius * 2 - mPadding),
				(int) (mRadius * 2 - mPadding)
		);
<span class="nc" id="L1369">	}</span>

	/**
	 * Invalidates this view in area where the middle circle is drawn.
	 *
	 * @see #MIDDLE_CIRCLE_INFO
	 * @see #invalidate(int, int, int, int)
	 */
	private void invalidateMiddleCircleArea() {
<span class="nc" id="L1378">		final float circleRadius = (int) MIDDLE_CIRCLE_INFO.radius;</span>
<span class="nc" id="L1379">		invalidate(</span>
				(int) (mCenter - circleRadius),
				(int) (mCenter - circleRadius),
				(int) (mCenter + circleRadius),
				(int) (mCenter + circleRadius)
		);
<span class="nc" id="L1385">	}</span>

	/**
	 */
	@Override
	protected void onDraw(Canvas canvas) {
<span class="nc" id="L1391">		super.onDraw(canvas);</span>
<span class="nc bnc" id="L1392" title="All 2 branches missed.">		if (mNumbersCount == 0) {</span>
<span class="nc" id="L1393">			return;</span>
		}
		// Draw small circle in the middle as origin point for selection indicator.
<span class="nc" id="L1396">		this.drawMiddleCircle(canvas);</span>
		// Draw selection indicator behind numbers.
<span class="nc" id="L1398">		this.drawSelectionIndicator(canvas);</span>
		// Draw set of numbers.
<span class="nc bnc" id="L1400" title="All 2 branches missed.">		for (int i = 0; i &lt; mNumbersCount; i++) {</span>
<span class="nc" id="L1401">			this.drawNumber(canvas, i, mNumbers[i]);</span>
		}
<span class="nc" id="L1403">	}</span>

	/**
	 * Draws a simple circle in the middle of this picker.
	 *
	 * @param canvas Canvas on which to draw the middle circle.
	 */
	private void drawMiddleCircle(Canvas canvas) {
<span class="nc" id="L1411">		MIDDLE_CIRCLE_INFO.updatePaintColor(mDrawableStateSet);</span>
<span class="nc" id="L1412">		canvas.drawCircle(mCenter, mCenter, MIDDLE_CIRCLE_INFO.radius, MIDDLE_CIRCLE_INFO.paint);</span>
<span class="nc" id="L1413">	}</span>

	/**
	 * Draws the selection indicator for the current value of {@link #mSelection}. The indicator consists
	 * of the simple thin line drawn from the center of this picker to the start of the numbers circle
	 * where will be drawn an indicator to indicate the currently selected number.
	 * &lt;p&gt;
	 * The position (angle) where to draw selector will be calculated from the current {@link #mSelection}
	 * value against the value of allowed {@link #mSelectionRange}.
	 *
	 * @param canvas Canvas on which to draw the indicator.
	 */
	private void drawSelectionIndicator(Canvas canvas) {
<span class="nc bnc" id="L1426" title="All 2 branches missed.">		if (mSelectionIndicator == null) {</span>
<span class="nc" id="L1427">			return;</span>
		}
		// Compute radius at which to draw the indicator.
<span class="nc" id="L1430">		TEXT_INFO.paint.getTextBounds(&quot;0&quot;, 0, 1, mRect);</span>
<span class="nc" id="L1431">		final float textSize = mRect.height();</span>
<span class="nc" id="L1432">		final float radius = mRadius - mPadding - TEXT_INFO.padding - textSize / 2f;</span>
		// Compute indicator's center x + y coordinates.
<span class="nc" id="L1434">		final double xCos = Math.cos(mSelection * Math.PI / (mSelectionRange / 2) - Math.PI / 2);</span>
<span class="nc" id="L1435">		final double ySin = Math.sin(mSelection * Math.PI / (mSelectionRange / 2) - Math.PI / 2);</span>
<span class="nc" id="L1436">		final float centerX = Math.round(xCos * radius + mCenter);</span>
<span class="nc" id="L1437">		final float centerY = Math.round(ySin * radius + mCenter);</span>
		// Draw the indicator's bearing line.
<span class="nc" id="L1439">		BEARING_LINE_INFO.updatePaint(mDrawableStateSet);</span>
<span class="nc" id="L1440">		canvas.drawLine(</span>
				mCenter,
				mCenter,
				centerX,
				centerY,
				BEARING_LINE_INFO.paint
		);
		// Draw the indicator at the position of the current selection.
<span class="nc" id="L1448">		final float indicatorRadius = textSize / 2f + TEXT_INFO.padding;</span>
<span class="nc" id="L1449">		mSelectionIndicator.setBounds(</span>
				(int) (centerX - indicatorRadius),
				(int) (centerY - indicatorRadius),
				(int) (centerX + indicatorRadius),
				(int) (centerY + indicatorRadius)
		);
<span class="nc" id="L1455">		mSelectionIndicator.draw(canvas);</span>
<span class="nc" id="L1456">	}</span>

	/**
	 * Draws the text for the specified &lt;var&gt;number&lt;/var&gt; at the specified index on the numbers arc
	 * for the current {@link #mRadius}.
	 *
	 * @param canvas Canvas on which to draw the number.
	 * @param index  The index of the specified number within the set of numbers. This index is used
	 *               to compute position (angle) where to draw number's text on arc.
	 * @param number The number of which text to draw.
	 */
	private void drawNumber(Canvas canvas, int index, int number) {
<span class="nc bnc" id="L1468" title="All 2 branches missed.">		if ((mSelection / (float) (mSelectionRange / mNumbersCount)) == index) {</span>
<span class="nc" id="L1469">			TEXT_INFO.updatePaintColor(mDrawableStateSetSelected);</span>
		} else {
<span class="nc" id="L1471">			TEXT_INFO.updatePaintColor(mDrawableStateSet);</span>
		}
<span class="nc" id="L1473">		final Paint textPaint = TEXT_INFO.paint;</span>
<span class="nc" id="L1474">		TEXT_INFO.paint.getTextBounds(&quot;0&quot;, 0, 1, mRect);</span>
<span class="nc" id="L1475">		final float textSize = mRect.height();</span>
<span class="nc" id="L1476">		final float radius = mRadius - mPadding - TEXT_INFO.padding - textSize / 2f;</span>
<span class="nc" id="L1477">		final float x = Math.round(Math.cos(index * Math.PI / (mNumbersCount / 2) - Math.PI / 2) * radius + mCenter);</span>
<span class="nc" id="L1478">		final float y = Math.round(Math.sin(index * Math.PI / (mNumbersCount / 2) - Math.PI / 2) * radius + mCenter);</span>
<span class="nc" id="L1479">		canvas.drawText(TEXT_INFO.format.format(number), x, y + textSize / 2, textPaint);</span>
<span class="nc" id="L1480">	}</span>

	/**
	 */
	@Override
	protected Parcelable onSaveInstanceState() {
<span class="nc" id="L1486">		final SavedState savedState = new SavedState(super.onSaveInstanceState());</span>
<span class="nc" id="L1487">		savedState.selection = mSelection;</span>
<span class="nc" id="L1488">		savedState.selectionRange = mSelectionRange;</span>
<span class="nc bnc" id="L1489" title="All 2 branches missed.">		if (mNumbers != null) {</span>
<span class="nc" id="L1490">			savedState.numbers = mNumbers;</span>
		}
<span class="nc" id="L1492">		savedState.numberFormat = TEXT_INFO.format;</span>
<span class="nc" id="L1493">		return savedState;</span>
	}

	/**
	 */
	@Override
	protected void onRestoreInstanceState(Parcelable state) {
<span class="nc bnc" id="L1500" title="All 2 branches missed.">		if (!(state instanceof SavedState)) {</span>
<span class="nc" id="L1501">			super.onRestoreInstanceState(state);</span>
<span class="nc" id="L1502">			return;</span>
		}

<span class="nc" id="L1505">		final SavedState savedState = (SavedState) state;</span>
<span class="nc" id="L1506">		super.onRestoreInstanceState(savedState.getSuperState());</span>
<span class="nc" id="L1507">		TEXT_INFO.format = savedState.numberFormat;</span>
<span class="nc" id="L1508">		this.mNumbers = savedState.numbers;</span>
<span class="nc bnc" id="L1509" title="All 2 branches missed.">		this.mNumbersCount = mNumbers != null ? mNumbers.length : 0;</span>
<span class="nc" id="L1510">		this.mSelection = savedState.selection;</span>
<span class="nc" id="L1511">		this.mSelectionRange = savedState.selectionRange;</span>
<span class="nc" id="L1512">	}</span>

	/**
	 * Updates the current private flags.
	 *
	 * @param flag Value of the desired flag to add/remove to/from the current private flags.
	 * @param add  Boolean flag indicating whether to add or remove the specified &lt;var&gt;flag&lt;/var&gt;.
	 */
	@SuppressWarnings(&quot;unused&quot;)
	private void updatePrivateFlags(int flag, boolean add) {
<span class="nc bnc" id="L1522" title="All 2 branches missed.">		if (add) this.mPrivateFlags |= flag;</span>
<span class="nc" id="L1523">		else this.mPrivateFlags &amp;= ~flag;</span>
<span class="nc" id="L1524">	}</span>

	/**
	 * Returns a boolean flag indicating whether the specified &lt;var&gt;flag&lt;/var&gt; is contained within
	 * the current private flags or not.
	 *
	 * @param flag Value of the flag to check.
	 * @return {@code True} if the requested flag is contained, {@code false} otherwise.
	 */
	@SuppressWarnings(&quot;unused&quot;)
	private boolean hasPrivateFlag(int flag) {
<span class="nc bnc" id="L1535" title="All 2 branches missed.">		return (mPrivateFlags &amp; flag) != 0;</span>
	}

	/**
	 * Inner classes ===============================================================================
	 */

	/**
	 * A {@link WidgetSavedState} implementation used to ensure that the state of {@link CircularNumberPicker}
	 * is properly saved.
	 *
	 * @author Martin Albedinsky
	 */
	public static class SavedState extends WidgetSavedState {

		/**
		 * Creator used to create an instance or array of instances of SavedState from {@link Parcel}.
		 */
<span class="nc" id="L1553">		public static final Creator&lt;SavedState&gt; CREATOR = new Creator&lt;SavedState&gt;() {</span>
			/**
			 */
			@Override
			public SavedState createFromParcel(@NonNull Parcel source) {
<span class="nc" id="L1558">				return new SavedState(source);</span>
			}

			/**
			 */
			@Override
			public SavedState[] newArray(int size) {
<span class="nc" id="L1565">				return new SavedState[size];</span>
			}
		};

		/**
		 */
		int selection, selectionRange;

		/**
		 */
<span class="nc" id="L1575">		int[] numbers = {};</span>

		/**
		 */
		NumberFormat numberFormat;

		/**
		 * Creates a new instance of SavedState with the given &lt;var&gt;superState&lt;/var&gt; to allow chaining
		 * of saved states in {@link #onSaveInstanceState()} and also in {@link #onRestoreInstanceState(android.os.Parcelable)}.
		 *
		 * @param superState The super state obtained from {@code super.onSaveInstanceState()} within
		 *                   {@code onSaveInstanceState()}.
		 */
		protected SavedState(@NonNull Parcelable superState) {
<span class="nc" id="L1589">			super(superState);</span>
<span class="nc" id="L1590">		}</span>

		/**
		 * Called from {@link #CREATOR} to create an instance of SavedState form the given parcel
		 * &lt;var&gt;source&lt;/var&gt;.
		 *
		 * @param source Parcel with data for the new instance.
		 */
		protected SavedState(@NonNull Parcel source) {
<span class="nc" id="L1599">			super(source);</span>
<span class="nc" id="L1600">			this.selection = source.readInt();</span>
<span class="nc" id="L1601">			this.selectionRange = source.readInt();</span>
<span class="nc" id="L1602">			source.readIntArray(numbers = new int[source.readInt()]);</span>
<span class="nc" id="L1603">			this.numberFormat = (NumberFormat) source.readSerializable();</span>
<span class="nc" id="L1604">		}</span>

		/**
		 */
		@Override
		public void writeToParcel(@NonNull Parcel dest, int flags) {
<span class="nc" id="L1610">			super.writeToParcel(dest, flags);</span>
<span class="nc" id="L1611">			dest.writeInt(selection);</span>
<span class="nc" id="L1612">			dest.writeInt(selectionRange);</span>
<span class="nc" id="L1613">			dest.writeInt(numbers.length);</span>
<span class="nc" id="L1614">			dest.writeIntArray(numbers);</span>
<span class="nc" id="L1615">			dest.writeSerializable(numberFormat);</span>
<span class="nc" id="L1616">		}</span>
	}

	/**
	 * Graphics info that holds all parameters necessary to draw numbers text.
	 */
	private static final class TextInfo extends TextGraphicsInfo {

		/**
		 * Format used to format value of the number text to be drawn.
		 */
<span class="nc" id="L1627">		NumberFormat format = new DecimalFormat(&quot;0&quot;);</span>

		/**
		 * Padding to be applied to the text in selection indicator's area.
		 */
		int padding;

		/**
		 * Creates a new instance of TextInfo with Paint with text aligned to CENTER.
		 */
		TextInfo() {
<span class="nc" id="L1638">			super();</span>
<span class="nc" id="L1639">			paint.setTextAlign(Paint.Align.CENTER);</span>
<span class="nc" id="L1640">		}</span>
	}

	/**
	 * Graphics info that holds all parameters necessary to draw picker's middle circle.
	 */
	private static final class MiddleCircleInfo extends ColorGraphicsInfo {

		/**
		 * Radius of the circle.
		 */
		float radius;

		/**
		 * Creates a new instance of MiddleCircleInfo.
		 */
		MiddleCircleInfo() {
<span class="nc" id="L1657">			super();</span>
<span class="nc" id="L1658">			paint.setStyle(Paint.Style.FILL);</span>
<span class="nc" id="L1659">		}</span>
	}

	/**
	 * Graphics info that holds all parameters necessary to draw indicator's bearing line.
	 */
	private static final class BearingLineInfo extends ColorGraphicsInfo {

		/**
		 * Thickness of the bearing line.
		 */
		float thickness;

		/**
		 * Creates a new instance of BearingLineInfo.
		 */
		BearingLineInfo() {
<span class="nc" id="L1676">			super();</span>
<span class="nc" id="L1677">			paint.setStyle(Paint.Style.STROKE);</span>
<span class="nc" id="L1678">		}</span>

		/**
		 */
		@Override
		public boolean updatePaint(@Nullable int[] stateSet) {
<span class="nc" id="L1684">			boolean updated = super.updatePaint(stateSet);</span>
<span class="nc bnc" id="L1685" title="All 2 branches missed.">			if (thickness != paint.getStrokeWidth()) {</span>
<span class="nc" id="L1686">				paint.setStrokeWidth(thickness);</span>
<span class="nc" id="L1687">				updated = true;</span>
			}
<span class="nc" id="L1689">			return updated;</span>
		}
	}
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.eclemma.org/jacoco">JaCoCo</a> 0.7.5.201505241946</span>Generated by the Android Gradle plugin 2.3.0</div></body></html>