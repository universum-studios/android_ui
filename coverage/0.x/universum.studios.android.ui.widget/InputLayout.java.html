<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../.resources/report.css" type="text/css"/><link rel="shortcut icon" href="../.resources/report.gif" type="image/gif"/><title>InputLayout.java</title><link rel="stylesheet" href="../.resources/prettify.css" type="text/css"/><script type="text/javascript" src="../.resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=0;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../.sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">debugAndroidTest</a> &gt; <a href="index.source.html" class="el_package">universum.studios.android.ui.widget</a> &gt; <span class="el_source">InputLayout.java</span></div><h1>InputLayout.java</h1><pre class="source lang-java linenums">/*
 * =================================================================================================
 *                             Copyright (C) 2017 Universum Studios
 * =================================================================================================
 *         Licensed under the Apache License, Version 2.0 or later (further &quot;License&quot; only).
 * -------------------------------------------------------------------------------------------------
 * You may use this file only in compliance with the License. More details and copy of this License 
 * you may obtain at
 * 
 * 		http://www.apache.org/licenses/LICENSE-2.0
 * 
 * You can redistribute, modify or publish any part of the code written within this file but as it 
 * is described in the License, the software distributed under the License is distributed on an 
 * &quot;AS IS&quot; BASIS, WITHOUT WARRANTIES or CONDITIONS OF ANY KIND.
 * 
 * See the License for the specific language governing permissions and limitations under the License.
 * =================================================================================================
 */
package universum.studios.android.ui.widget;

import android.animation.Animator;
import android.animation.AnimatorListenerAdapter;
import android.annotation.TargetApi;
import android.content.Context;
import android.content.res.ColorStateList;
import android.content.res.Resources;
import android.content.res.TypedArray;
import android.graphics.Color;
import android.os.Build;
import android.os.Parcel;
import android.os.Parcelable;
import android.support.annotation.AttrRes;
import android.support.annotation.IntDef;
import android.support.annotation.NonNull;
import android.support.annotation.Nullable;
import android.support.annotation.StringRes;
import android.support.annotation.StyleRes;
import android.text.TextUtils;
import android.util.AttributeSet;
import android.util.TypedValue;
import android.view.View;
import android.view.ViewGroup;
import android.view.accessibility.AccessibilityEvent;
import android.view.accessibility.AccessibilityNodeInfo;
import android.widget.FrameLayout;
import android.widget.TextView;

import java.lang.annotation.Retention;
import java.lang.annotation.RetentionPolicy;

import universum.studios.android.ui.R;

/**
 * A {@link FrameLayoutWidget} implementation that represents a container for a view component of
 * which content/input can be dynamically changed by a user and few secondary view components that
 * show current state of that input component. The input view is the primary part of each InputLayout.
 * It can be for example {@link android.widget.EditText EditText} into which can user type characters
 * from a soft keyboard while the secondary views would show how many characters did user typed and
 * which characters are allowed and which are not.
 *
 * &lt;h3&gt;View hierarchy&lt;/h3&gt;
 * View hierarchy of InputLayout is predefined by its current implementation, but can by changed by
 * inheritance instances of the InputLayout class. Default implementation will layout a label view
 * at the beginning of the layout. Below the label view will be laid out an input view. InputLayout
 * can also contain two more views that will be laid out below the input view. A note view for note
 * text or error text, laid out from the start, and/or constraint view for constraint text, laid out
 * from the end of layout.
 * &lt;p&gt;
 * &lt;b&gt;Note, that the input view is essential for this layout and if it is not presented before
 * measurement, InputLayout will throw {@link IllegalStateException}.&lt;/b&gt;
 * &lt;p&gt;
 * &lt;b&gt;Simple view hierarchy model:&lt;/b&gt;
 * &lt;pre&gt;
 * Label
 * ---------------------------
 * Input .....................
 * ---------------------------
 * Note             Constraint
 * &lt;/pre&gt;
 * Whether to show or not some of views mentioned above, can be done by requesting the desired input
 * features upon an instance of InputLayout via {@link #requestInputFeatures(int)}.
 *
 * &lt;h3&gt;XML layout&lt;/h3&gt;
 * Implementations or directly InputLayout can be of course inflated from an Xml layout as any view.
 * InputLayout identifies its child views based on the type flag specified for {@link R.attr#uiInputChildType uiInputChildType}
 * attribute. The accepted types are listed below:
 * &lt;ul&gt;
 * &lt;li&gt;&lt;b&gt;input&lt;/b&gt; - input view&lt;/li&gt;
 * &lt;li&gt;&lt;b&gt;label&lt;/b&gt; - label view&lt;/li&gt;
 * &lt;li&gt;&lt;b&gt;note&lt;/b&gt; - note view&lt;/li&gt;
 * &lt;li&gt;&lt;b&gt;constraint&lt;/b&gt; - input view&lt;/li&gt;
 * &lt;/ul&gt;
 * InputLayout based on these types handles correct ordering to ensure proper measuring and layout
 * process of its view hierarchy.
 *
 * &lt;h3&gt;Input features&lt;/h3&gt;
 * &lt;ul&gt;
 * &lt;li&gt;{@link #FEATURE_LABEL} - specifies whether to show label view or not&lt;/li&gt;
 * &lt;li&gt;{@link #FEATURE_NOTE} - specifies whether to show note view or not&lt;/li&gt;
 * &lt;li&gt;{@link #FEATURE_CONSTRAINT} - specifies whether to show constraint view or not&lt;/li&gt;
 * &lt;/ul&gt;
 * All features can be requested via {@link #requestInputFeatures(int)} with feature flags as follows:
 * &lt;b&gt;requestInputFeatures({@link #FEATURE_LABEL} | {@link #FEATURE_NOTE} | {@link #FEATURE_CONSTRAINT})&lt;/b&gt;
 *
 * &lt;h3&gt;XML attributes&lt;/h3&gt;
 * See {@link FrameLayoutWidget},
 * {@link R.styleable#Ui_InputLayout InputLayout Attributes}
 *
 * &lt;h3&gt;Default style attribute&lt;/h3&gt;
 * {@code 0}
 *
 * @author Martin Albedinsky
 * @see EditLayout
 * @see SpinnerLayout
 */
public class InputLayout extends FrameLayoutWidget implements ErrorWidget {

	/**
	 * Interface ===================================================================================
	 */

	/**
	 * Constants ===================================================================================
	 */

	/**
	 * Log TAG.
	 */
	// private static final String TAG = &quot;InputLayout&quot;;

	/**
	 * Feature flag to clear all before requested features or just to not request any features at all.
	 */
	public static final int FEATURE_NONE = 0x00000000;

	/**
	 * Feature flag to request a view which can present a label text above the input view.
	 */
	public static final int FEATURE_LABEL = 0x00000001;

	/**
	 * Feature flag to request a view which can present a note text below the input view.
	 */
	public static final int FEATURE_NOTE = 0x00000001 &lt;&lt; 1;

	/**
	 * Feature flag to request a view which can present a constraint text below the input view.
	 */
	public static final int FEATURE_CONSTRAINT = 0x00000001 &lt;&lt; 2;

	/**
	 * Defines an annotation for determining set of allowed input feature flags.
	 */
	@Retention(RetentionPolicy.SOURCE)
	@IntDef(flag = true, value = {FEATURE_NONE, FEATURE_LABEL, FEATURE_NOTE, FEATURE_CONSTRAINT})
	public @interface InputFeature {
	}

	/**
	 * Flag indicating whether this input layout has some error set via {@link #setError(CharSequence)}
	 * or not.
	 */
	static final int PFLAG_HAS_ERROR = 0x00000001 &lt;&lt; 16;

	/**
	 * Flag indicating whether this input layout has error highlight visible or not.
	 */
	static final int PFLAG_ERROR_HIGHLIGHT_VISIBLE = 0x00000001 &lt;&lt; 17;

	/**
	 * Static members ==============================================================================
	 */

	/**
	 * Members =====================================================================================
	 */

	/**
	 * Context in which is this view presented.
	 */
	Context mContext;

	/**
	 * Application resources.
	 */
	Resources mResources;

	/**
	 * Input view of this input layout.
	 */
	View mInputView;

	/**
	 * Text view to present the label text above the input view.
	 */
	TextView mLabelView;

	/**
	 * Text view to present the note text below the input view.
	 */
	TextView mNoteView;

	/**
	 * Text view to present the constraint text below the input view.
	 */
	TextView mConstraintView;

	/**
	 * Data used when tinting components of this view.
	 */
	TintInfo mTintInfo;

	/**
	 * Label text.
	 */
<span class="nc" id="L216">	private CharSequence mLabel = &quot;&quot;;</span>

	/**
	 * Note text.
	 */
<span class="nc" id="L221">	private CharSequence mNote = &quot;&quot;;</span>

	/**
	 * Error text.
	 */
<span class="nc" id="L226">	private CharSequence mError = &quot;&quot;;</span>

	/**
	 * Constraint text.
	 */
<span class="nc" id="L231">	private CharSequence mConstraint = &quot;&quot;;</span>

	/**
	 * Set of private flags of this dialog view.
	 */
<span class="nc" id="L236">	int mPrivateFlags = PrivateFlags.PFLAG_ALLOWS_DEFAULT_SELECTION;</span>

	/**
	 * Set of currently handled features by this input layout.
	 */
<span class="nc" id="L241">	int mFeatures = FEATURE_LABEL | FEATURE_NOTE;</span>

	/**
	 * All colors used within this view.
	 */
<span class="nc" id="L246">	private ColorsInfo mColorsInfo = new ColorsInfo();</span>

	/**
	 * Listener used for change note text and colors animation.
	 */
	private NoteTextChangeListener mNoteTextChangeListener;

	/**
	 * Duration for change note text and colors animation.
	 */
<span class="nc" id="L256">	long mNoteTextChangeDuration = 100;</span>

	/**
	 * Constructors ================================================================================
	 */

	/**
	 * Same as {@link #InputLayout(android.content.Context, android.util.AttributeSet)} without attributes.
	 */
	public InputLayout(@NonNull Context context) {
<span class="nc" id="L266">		this(context, null);</span>
<span class="nc" id="L267">	}</span>

	/**
	 * Same as {@link #InputLayout(android.content.Context, android.util.AttributeSet, int)} with
	 * {@code 0} as attribute for default style.
	 */
	public InputLayout(@NonNull Context context, @Nullable AttributeSet attrs) {
<span class="nc" id="L274">		this(context, attrs, 0);</span>
<span class="nc" id="L275">	}</span>

	/**
	 * Same as {@link #InputLayout(android.content.Context, android.util.AttributeSet, int, int)}
	 * with {@code 0} as default style.
	 */
	public InputLayout(@NonNull Context context, @Nullable AttributeSet attrs, @AttrRes int defStyleAttr) {
<span class="nc" id="L282">		super(context, attrs, defStyleAttr);</span>
<span class="nc" id="L283">		this.init(context, attrs, defStyleAttr, 0);</span>
<span class="nc" id="L284">	}</span>

	/**
	 * Creates a new instance of InputLayout for the given &lt;var&gt;context&lt;/var&gt;.
	 *
	 * @param context      Context in which will be the new view presented.
	 * @param attrs        Set of Xml attributes used to configure the new instance of this view.
	 * @param defStyleAttr An attribute which contains a reference to a default style resource for
	 *                     this view within a theme of the given context.
	 * @param defStyleRes  Resource id of the default style for the new view.
	 */
	@TargetApi(Build.VERSION_CODES.LOLLIPOP)
	public InputLayout(@NonNull Context context, @Nullable AttributeSet attrs, @AttrRes int defStyleAttr, @StyleRes int defStyleRes) {
<span class="nc" id="L297">		super(context, attrs, defStyleAttr, defStyleRes);</span>
<span class="nc" id="L298">		this.init(context, attrs, defStyleAttr, defStyleRes);</span>
<span class="nc" id="L299">	}</span>

	/**
	 * Methods =====================================================================================
	 */

	/**
	 * Called from one of constructors of this view to perform its initialization.
	 * &lt;p&gt;
	 * Initialization is done via parsing of the specified &lt;var&gt;attrs&lt;/var&gt; set and obtaining for
	 * this view specific data from it that can be used to configure this new view instance. The
	 * specified &lt;var&gt;defStyleAttr&lt;/var&gt; and &lt;var&gt;defStyleRes&lt;/var&gt; are used to obtain default data
	 * from the current theme provided by the specified &lt;var&gt;context&lt;/var&gt;.
	 */
	private void init(Context context, AttributeSet attrs, int defStyleAttr, int defStyleRes) {
<span class="nc" id="L314">		this.mContext = context;</span>
<span class="nc" id="L315">		this.mResources = context.getResources();</span>
<span class="nc bnc" id="L316" title="All 2 branches missed.">		if (ANIMABLE) {</span>
<span class="nc" id="L317">			this.mNoteTextChangeListener = new NoteTextChangeListener();</span>
		}

<span class="nc" id="L320">		final TypedArray attributes = context.obtainStyledAttributes(attrs, R.styleable.Ui_InputLayout, defStyleAttr, defStyleRes);</span>
<span class="nc bnc" id="L321" title="All 2 branches missed.">		for (int i = 0; i &lt; attributes.getIndexCount(); i++) {</span>
<span class="nc" id="L322">			final int index = attributes.getIndex(i);</span>
<span class="nc bnc" id="L323" title="All 2 branches missed.">			if (index == R.styleable.Ui_InputLayout_android_enabled) {</span>
<span class="nc" id="L324">				setEnabled(attributes.getBoolean(index, true));</span>
<span class="nc bnc" id="L325" title="All 2 branches missed.">			} else if (index == R.styleable.Ui_InputLayout_android_minWidth) {</span>
<span class="nc" id="L326">				setMinimumWidth(attributes.getDimensionPixelSize(index, 0));</span>
<span class="nc bnc" id="L327" title="All 2 branches missed.">			} else if (index == R.styleable.Ui_InputLayout_android_minHeight) {</span>
<span class="nc" id="L328">				setMinimumHeight(attributes.getDimensionPixelSize(index, 0));</span>
<span class="nc bnc" id="L329" title="All 2 branches missed.">			} else if (index == R.styleable.Ui_InputLayout_android_label) {</span>
<span class="nc" id="L330">				setLabel(attributes.getText(index));</span>
<span class="nc bnc" id="L331" title="All 2 branches missed.">			} else if (index == R.styleable.Ui_InputLayout_uiNote) {</span>
<span class="nc" id="L332">				setNote(attributes.getText(index));</span>
<span class="nc bnc" id="L333" title="All 2 branches missed.">			} else if (index == R.styleable.Ui_InputLayout_uiNoteTextChangeDuration) {</span>
<span class="nc" id="L334">				this.mNoteTextChangeDuration = attributes.getInt(index, (int) mNoteTextChangeDuration);</span>
<span class="nc bnc" id="L335" title="All 2 branches missed.">			} else if (index == R.styleable.Ui_InputLayout_uiInputFeatures) {</span>
<span class="nc" id="L336">				this.mFeatures = attributes.getInteger(index, mFeatures);</span>
			}
		}
<span class="nc" id="L339">		attributes.recycle();</span>

<span class="nc" id="L341">		this.ensureTintInfo();</span>
<span class="nc" id="L342">		int tintColor = Color.TRANSPARENT;</span>
<span class="nc" id="L343">		final Resources.Theme theme = context.getTheme();</span>
<span class="nc bnc" id="L344" title="All 2 branches missed.">		if (theme != null) {</span>
<span class="nc" id="L345">			final TypedValue typedValue = new TypedValue();</span>
<span class="nc bnc" id="L346" title="All 2 branches missed.">			if (theme.resolveAttribute(R.attr.colorControlActivated, typedValue, true)) {</span>
<span class="nc" id="L347">				tintColor = typedValue.data;</span>
			}
<span class="nc bnc" id="L349" title="All 2 branches missed.">			if (theme.resolveAttribute(R.attr.uiColorErrorHighlight, typedValue, true)) {</span>
<span class="nc" id="L350">				mColorsInfo.errorColors = ColorStateList.valueOf(typedValue.data);</span>
			}
		}
<span class="nc" id="L353">		mTintInfo.labelTint = TintManager.createLabelTintColors(getContext(), tintColor);</span>
<span class="nc" id="L354">	}</span>

	/**
	 * Ensures that the tint info object is initialized.
	 */
	private void ensureTintInfo() {
<span class="nc bnc" id="L360" title="All 2 branches missed.">		if (mTintInfo == null) this.mTintInfo = new TintInfo();</span>
<span class="nc" id="L361">	}</span>

	/**
	 */
	@Override
	@TargetApi(Build.VERSION_CODES.ICE_CREAM_SANDWICH)
	public void onInitializeAccessibilityEvent(@NonNull AccessibilityEvent event) {
<span class="nc" id="L368">		super.onInitializeAccessibilityEvent(event);</span>
<span class="nc" id="L369">		event.setClassName(InputLayout.class.getName());</span>
<span class="nc" id="L370">	}</span>

	/**
	 */
	@Override
	@TargetApi(Build.VERSION_CODES.ICE_CREAM_SANDWICH)
	public void onInitializeAccessibilityNodeInfo(@NonNull AccessibilityNodeInfo info) {
<span class="nc" id="L377">		super.onInitializeAccessibilityNodeInfo(info);</span>
<span class="nc" id="L378">		info.setClassName(InputLayout.class.getName());</span>
<span class="nc" id="L379">	}</span>

	/**
	 */
	@Override
	protected FrameLayout.LayoutParams generateDefaultLayoutParams() {
<span class="nc" id="L385">		return new InputLayout.LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.WRAP_CONTENT);</span>
	}

	/**
	 */
	@Override
	protected ViewGroup.LayoutParams generateLayoutParams(ViewGroup.LayoutParams params) {
<span class="nc" id="L392">		return new InputLayout.LayoutParams(params);</span>
	}

	/**
	 */
	@Override
	public FrameLayout.LayoutParams generateLayoutParams(AttributeSet attrs) {
<span class="nc" id="L399">		return new InputLayout.LayoutParams(getContext(), attrs);</span>
	}

	/**
	 */
	@Override
	protected boolean checkLayoutParams(ViewGroup.LayoutParams params) {
<span class="nc" id="L406">		return params instanceof InputLayout.LayoutParams;</span>
	}

	/**
	 * Requests the given &lt;var&gt;features&lt;/var&gt; to be enabled for this input layout.
	 *
	 * @param features The desired input features. One of {@link #FEATURE_LABEL}, {@link #FEATURE_NOTE},
	 *                 {@link #FEATURE_CONSTRAINT} or theirs combination.
	 * @return {@code True} if the current features has been changed, {@code false} otherwise.
	 * @see R.attr#uiInputFeatures ui:uiInputFeatures
	 * @see #hasInputFeature(int)
	 * @see #clearInputFeatures()
	 */
	public boolean requestInputFeatures(@InputFeature int features) {
<span class="nc bnc" id="L420" title="All 2 branches missed.">		if (mFeatures != features) {</span>
<span class="nc" id="L421">			this.mFeatures = features;</span>
<span class="nc" id="L422">			this.updateFeaturesVisibility();</span>
<span class="nc" id="L423">			onInputFeaturesChange(mFeatures);</span>
<span class="nc" id="L424">			return true;</span>
		}
<span class="nc" id="L426">		return false;</span>
	}

	/**
	 * Clears the current input features enabled for this input layout.
	 *
	 * @see #requestInputFeatures(int)
	 */
	public void clearInputFeatures() {
<span class="nc" id="L435">		this.mFeatures = FEATURE_NONE;</span>
<span class="nc" id="L436">		this.updateFeaturesVisibility();</span>
<span class="nc" id="L437">		onInputFeaturesChange(mFeatures);</span>
<span class="nc" id="L438">	}</span>

	/**
	 * Returns a flag indicating whether this input layout has the specified &lt;var&gt;feature&lt;/var&gt;
	 * enabled or not.
	 *
	 * @param feature The desired input feature to check. One of {@link #FEATURE_LABEL}, {@link #FEATURE_NOTE},
	 *                {@link #FEATURE_CONSTRAINT} or theirs combination.
	 * @return {@code True} if input feature is enabled, {@code false} otherwise.
	 * @see #requestInputFeatures(int)
	 * @see #clearInputFeatures()
	 */
	public boolean hasInputFeature(@InputFeature int feature) {
<span class="nc" id="L451">		return this.hasFeature(feature);</span>
	}

	/**
	 * Adds the label view into this input layout. The label view will be layouted at the beginning
	 * of this layout above the input view.
	 *
	 * @param labelView The desired view to represent label view of this layout.
	 */
	public void addLabelView(@NonNull TextView labelView) {
<span class="nc" id="L461">		this.removeLabelView();</span>
<span class="nc" id="L462">		super.addView(mLabelView = labelView, 0, new LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.WRAP_CONTENT));</span>
<span class="nc" id="L463">		this.updateLabelFeatureVisibility();</span>
<span class="nc" id="L464">		onLabelViewChanged(mLabelView);</span>
<span class="nc" id="L465">	}</span>

	/**
	 * Returns the text view which represents the label for this input layout.
	 * &lt;p&gt;
	 * This view is basically displayed above the input view.
	 *
	 * @return Label text view.
	 */
	@NonNull
	public TextView getLabelView() {
<span class="nc" id="L476">		return mLabelView;</span>
	}

	/**
	 * Removes the current label view from this input layout if any.
	 *
	 * @return Removed label view or {@code null} if there was no label view presented.
	 */
	@Nullable
	public TextView removeLabelView() {
<span class="nc bnc" id="L486" title="All 2 branches missed.">		if (mLabelView != null){</span>
<span class="nc" id="L487">			removeView(mLabelView);</span>
<span class="nc" id="L488">			return mLabelView;</span>
		}
<span class="nc" id="L490">		return null;</span>
	}

	/**
	 * Adds the input view into this input layout. The input view will be layouted after the label
	 * view (if any).
	 *
	 * @param inputView The desired view to represent input view of this layout.
	 */
	public void addInputView(@NonNull View inputView) {
<span class="nc bnc" id="L500" title="All 2 branches missed.">		if (mInputView != null) {</span>
<span class="nc" id="L501">			removeView(mInputView);</span>
		}
<span class="nc" id="L503">		super.addView(mInputView = inputView, Math.min(1, getChildCount()), new LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.WRAP_CONTENT));</span>
<span class="nc" id="L504">		onInputViewChanged(mInputView);</span>
<span class="nc" id="L505">	}</span>

	/**
	 * Returns the input view of this input layout.
	 *
	 * @return Input view.
	 */
	@NonNull
	public View getInputView() {
<span class="nc" id="L514">		return mInputView;</span>
	}

	/**
	 * Adds the note view into this input layout. The note view will be layouted after the input view
	 * from the left. The given view will be also used to show error set to this layout by {@link #setError(CharSequence)}.
	 *
	 * @param noteView The desired view to represent note view of this layout.
	 */
	public void addNoteView(@NonNull TextView noteView) {
<span class="nc" id="L524">		this.removeNoteView();</span>
<span class="nc" id="L525">		super.addView(mNoteView = noteView, Math.min(2, getChildCount()), new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));</span>
<span class="nc" id="L526">		this.updateNoteFeatureVisibility();</span>
<span class="nc" id="L527">		onNoteViewChanged(mNoteView);</span>
<span class="nc" id="L528">	}</span>

	/**
	 * Returns the text view which presents note/error text set to this input layout.
	 * &lt;p&gt;
	 * This view is basically displayed below the input view.
	 *
	 * @return Error text view.
	 */
	@NonNull
	public TextView getNoteView() {
<span class="nc" id="L539">		return mNoteView;</span>
	}

	/**
	 * Removes the current note view from this input layout if any.
	 *
	 * @return Removed note view or {@code null} if there was no note view presented.
	 */
	@Nullable
	public TextView removeNoteView() {
<span class="nc bnc" id="L549" title="All 2 branches missed.">		if (mNoteView != null) {</span>
<span class="nc" id="L550">			removeView(mNoteView);</span>
<span class="nc" id="L551">			return mNoteView;</span>
		}
<span class="nc" id="L553">		return null;</span>
	}

	/**
	 * Adds the constraint view into this input layout. The constraint view will be layouted after
	 * the input view (at the same base line as the note view) but from the right.
	 *
	 * @param constraintView The desired view to represent constraint view of this layout.
	 */
	public void addConstraintView(@NonNull TextView constraintView) {
<span class="nc" id="L563">		this.removeConstraintView();</span>
<span class="nc" id="L564">		super.addView(mConstraintView = constraintView, Math.min(3, getChildCount()), new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));</span>
<span class="nc" id="L565">		this.updateConstraintFeatureVisibility();</span>
<span class="nc" id="L566">		onConstraintViewChanged(mConstraintView);</span>
<span class="nc" id="L567">	}</span>

	/**
	 * Returns the text view which presents constraint for input value of this input layout.
	 * &lt;p&gt;
	 * This view is basically displayed below the input view.
	 *
	 * @return Constraint text view.
	 */
	@NonNull
	public TextView getConstraintView() {
<span class="nc" id="L578">		return mConstraintView;</span>
	}

	/**
	 * Removes the current constraint view from this input layout if any.
	 *
	 * @return Removed constraint view or {@code null} if there was no constraint view presented.
	 */
	@Nullable
	public TextView removeConstraintView() {
<span class="nc bnc" id="L588" title="All 2 branches missed.">		if (mConstraintView != null) {</span>
<span class="nc" id="L589">			removeView(mConstraintView);</span>
<span class="nc" id="L590">			return mConstraintView;</span>
		}
<span class="nc" id="L592">		return null;</span>
	}

	/**
	 */
	@Override
	public void addView(@NonNull View child, int index, ViewGroup.LayoutParams params) {
<span class="nc bnc" id="L599" title="All 2 branches missed.">		if (validateInputView(child)) {</span>
<span class="nc" id="L600">			addInputView(child);</span>
<span class="nc" id="L601">			return;</span>
		}
<span class="nc" id="L603">		super.addView(child, index, params);</span>
<span class="nc" id="L604">	}</span>

	/**
	 * Same as {@link #setLabel(CharSequence)} for resource id.
	 *
	 * @param resId Resource id of the desired label text.
	 */
	public void setLabel(@StringRes int resId) {
<span class="nc" id="L612">		setLabel(mResources.getText(resId));</span>
<span class="nc" id="L613">	}</span>

	/**
	 * Sets the text for the label view of this input layout.
	 *
	 * @param label The desired label text.
	 * @see android.R.attr#label android:label
	 * @see #getLabel()
	 */
	public void setLabel(@Nullable CharSequence label) {
<span class="nc bnc" id="L623" title="All 2 branches missed.">		this.mLabel = label != null ? label : &quot;&quot;;</span>
<span class="nc bnc" id="L624" title="All 2 branches missed.">		if (mLabelView != null) mLabelView.setText(mLabel);</span>
<span class="nc" id="L625">	}</span>

	/**
	 * Returns the current text presented by label view of this layout.
	 *
	 * @return Label text set by {@link #setLabel(CharSequence)}.
	 */
	@NonNull
	public CharSequence getLabel() {
<span class="nc" id="L634">		return mLabel;</span>
	}

	/**
	 * Same as {@link #setNote(CharSequence)}, but for resource id.
	 *
	 * @param resId Resource id of the desired note text.
	 */
	public void setNote(@StringRes int resId) {
<span class="nc" id="L643">		setNote(mResources.getText(resId));</span>
<span class="nc" id="L644">	}</span>

	/**
	 * Sets the text for the note view of this input layout.
	 *
	 * @param note The desired note text.
	 * @see R.attr#uiNote ui:uiNote
	 * @see #getNote()
	 */
	public void setNote(@Nullable CharSequence note) {
<span class="nc bnc" id="L654" title="All 2 branches missed.">		this.mNote = note != null ? note : &quot;&quot;;</span>
<span class="nc bnc" id="L655" title="All 4 branches missed.">		if (mNoteView != null &amp;&amp; (mPrivateFlags &amp; PFLAG_HAS_ERROR) == 0) {</span>
<span class="nc" id="L656">			mNoteView.setText(mNote);</span>
		}
<span class="nc" id="L658">	}</span>

	/**
	 * Returns the current text presented by note view of this layout.
	 *
	 * @return Label text set by {@link #setNote(CharSequence)}.
	 */
	@NonNull
	public CharSequence getNote() {
<span class="nc" id="L667">		return mNote;</span>
	}

	/**
	 * Same as {@link #setConstraint(CharSequence)}, but for resource id.
	 *
	 * @param resId Resource id of the desired constraint text.
	 */
	public void setConstraint(@StringRes int resId) {
<span class="nc" id="L676">		setConstraint(mResources.getText(resId));</span>
<span class="nc" id="L677">	}</span>

	/**
	 * Sets the text for the constraint view of this input layout.
	 *
	 * @param constraint The desired constraint text.
	 * @see #getConstraint()
	 */
	public void setConstraint(@Nullable CharSequence constraint) {
<span class="nc bnc" id="L686" title="All 2 branches missed.">		this.mConstraint = constraint != null ? constraint : &quot;&quot;;</span>
<span class="nc bnc" id="L687" title="All 2 branches missed.">		if (mConstraintView != null) mConstraintView.setText(mConstraint);</span>
<span class="nc" id="L688">	}</span>

	/**
	 * Returns the current text presented by constraint view of this layout.
	 *
	 * @return Label text set by {@link #setConstraint(CharSequence)}.
	 */
	@NonNull
	public CharSequence getConstraint() {
<span class="nc" id="L697">		return mConstraint;</span>
	}

	/**
	 * Same as {@link #setError(CharSequence)}, but for resource id.
	 *
	 * @param resId Resource id of the desired error text.
	 */
	public void setError(@StringRes int resId) {
<span class="nc" id="L706">		setError(mResources.getText(resId));</span>
<span class="nc" id="L707">	}</span>

	/**
	 * Sets the error text for this input layout. Calling this method will also change the background
	 * of the current input view to the error one (commonly with red highlight) and marks this layout
	 * that it has error, so calling {@link #hasError()} will return {@code true}. Error can be later
	 * cleared by {@link #clearError()}.
	 * &lt;p&gt;
	 * &lt;b&gt;Note&lt;/b&gt;, that for displaying of error text is used note view and changing of the current
	 * note text for error text will be done by using of cross-fade animation so the error text will
	 * be displayed below the input view at the left.
	 *
	 * @param error The desired error text.
	 */
	@Override
	public void setError(@NonNull CharSequence error) {
<span class="nc bnc" id="L723" title="All 2 branches missed.">		if (!TextUtils.equals(mError, error)) {</span>
<span class="nc bnc" id="L724" title="All 2 branches missed.">			final boolean hasError = (mPrivateFlags &amp; PFLAG_HAS_ERROR) != 0;</span>
<span class="nc" id="L725">			this.updatePrivateFlags(PFLAG_HAS_ERROR, true);</span>
<span class="nc bnc" id="L726" title="All 2 branches missed.">			if (mInputView instanceof ErrorWidget) {</span>
<span class="nc" id="L727">				((ErrorWidget) mInputView).setError(error);</span>
			}
<span class="nc bnc" id="L729" title="All 2 branches missed.">			this.handleErrorUpdate(error, !hasError);</span>
		}
<span class="nc" id="L731">	}</span>

	/**
	 * Returns a flag indicating whether this input layout has some error set or not.
	 *
	 * @return {@code True} if this layout has error set, {@code false} otherwise.
	 * @see #setError(CharSequence)
	 */
	@Override
	public boolean hasError() {
<span class="nc bnc" id="L741" title="All 2 branches missed.">		return (mPrivateFlags &amp; PFLAG_HAS_ERROR) != 0;</span>
	}

	/**
	 * Returns the current error text set to this input layout.
	 *
	 * @return Error text set via {@link #setError(CharSequence)}.
	 */
	@NonNull
	@Override
	public CharSequence getError() {
<span class="nc" id="L752">		return mError;</span>
	}

	/**
	 * Clears the current error text of this input layout. Calling of this method will also change
	 * the background of the input view back to the original one. Also the current note text will
	 * be set back to the note view, as described in {@link #setError(CharSequence)}, error text for
	 * note text change will be handled by using of cross-fade animation.
	 */
	@Override
	public void clearError() {
<span class="nc bnc" id="L763" title="All 2 branches missed.">		if (mInputView instanceof ErrorWidget) {</span>
<span class="nc" id="L764">			((ErrorWidget) mInputView).clearError();</span>
		}
<span class="nc" id="L766">		clearError(true);</span>
<span class="nc" id="L767">	}</span>

	/**
	 * Returns a flag indicating whether this input layout has error highlight visible or not.
	 * &lt;p&gt;
	 * Error highlight is visible whenever this input layout has some error set ({@link #hasError()})
	 * or if the current input exceeds current constraints.
	 *
	 * @return {@code True} if error highlight is visible, {@code false} otherwise.
	 */
	public boolean isErrorHighlightVisible() {
<span class="nc bnc" id="L778" title="All 2 branches missed.">		return (mPrivateFlags &amp; PFLAG_ERROR_HIGHLIGHT_VISIBLE) != 0;</span>
	}

	/**
	 */
	@Override
	public void setEnabled(boolean enabled) {
<span class="nc" id="L785">		super.setEnabled(enabled);</span>
<span class="nc" id="L786">		this.updateChildrenEnabledState(enabled);</span>
<span class="nc" id="L787">	}</span>

	/**
	 * Sets the duration for the text change within note view used when changing note text for the
	 * error text played whenever {@link #setError(CharSequence)} or {@link #clearError()} are called
	 * and the mentioned texts need to be properly changed.
	 *
	 * @param duration The desired duration in milliseconds.
	 */
	public void setNoteTextChangeDuration(long duration) {
<span class="nc" id="L797">		this.mNoteTextChangeDuration = duration;</span>
<span class="nc" id="L798">	}</span>

	/**
	 * Returns the duration for the text change within note view used when changing note text for the
	 * error text and backwards.
	 * &lt;p&gt;
	 * Default value: &lt;b&gt;{@link 150 ms}&lt;/b&gt;
	 *
	 * @return Duration in milliseconds.
	 */
	public long getNoteTextChangeDuration() {
<span class="nc" id="L809">		return mNoteTextChangeDuration;</span>
	}

	/**
	 * Invoked whenever {@link #addLabelView(android.widget.TextView)} is called upon this layout
	 * and the specified &lt;var&gt;labelView&lt;/var&gt; has been changed.
	 *
	 * @param labelView The changed label view.
	 */
	protected void onLabelViewChanged(@NonNull TextView labelView) {
<span class="nc bnc" id="L819" title="All 2 branches missed.">		if (!TextUtils.isEmpty(mLabel)) {</span>
<span class="nc" id="L820">			labelView.setText(mLabel);</span>
		}
<span class="nc" id="L822">		this.applyLabelTextTint();</span>
<span class="nc" id="L823">	}</span>

	/**
	 * Called whenever some of {@code addView(...)} methods is called upon this input layout to validate
	 * if the specified &lt;var&gt;view&lt;/var&gt; can be input view for this input layout.
	 *
	 * @param view The view to be validated for input view.
	 * @return {@code True} to add the given view into this layout as input view by {@link #addInputView(android.view.View)},
	 * {@code false} to add as regular view.
	 */
	protected boolean validateInputView(@NonNull View view) {
<span class="nc" id="L834">		return false;</span>
	}

	/**
	 * Invoked whenever {@link #addInputView(android.view.View)} is called upon this layout
	 * and the specified &lt;var&gt;inputView&lt;/var&gt; has been changed.
	 *
	 * @param inputView The changed input view.
	 */
	protected void onInputViewChanged(@NonNull View inputView) {
<span class="nc" id="L844">	}</span>

	/**
	 * Invoked whenever {@link #addNoteView(android.widget.TextView)} is called upon this layout
	 * and the specified &lt;var&gt;noteView&lt;/var&gt; has been changed.
	 *
	 * @param noteView The changed note view.
	 */
	protected void onNoteViewChanged(@NonNull TextView noteView) {
<span class="nc bnc" id="L853" title="All 4 branches missed.">		if (!TextUtils.isEmpty(mNote) &amp;&amp; (mPrivateFlags &amp; PFLAG_HAS_ERROR) == 0) {</span>
<span class="nc" id="L854">			noteView.setText(mLabel);</span>
<span class="nc bnc" id="L855" title="All 4 branches missed.">		} else if (!TextUtils.isEmpty(mError) &amp;&amp; (mPrivateFlags &amp; PFLAG_HAS_ERROR) != 0) {</span>
<span class="nc" id="L856">			noteView.setText(mError);</span>
		}
<span class="nc" id="L858">	}</span>

	/**
	 * Invoked whenever {@link #addConstraintView(android.widget.TextView)} is called upon this layout
	 * and the specified &lt;var&gt;noteView&lt;/var&gt; has been changed.
	 *
	 * @param constraintView The changed constraint view.
	 */
	protected void onConstraintViewChanged(@NonNull TextView constraintView) {
<span class="nc bnc" id="L867" title="All 2 branches missed.">		if (!TextUtils.isEmpty(mConstraint)) {</span>
<span class="nc" id="L868">			constraintView.setText(mConstraint);</span>
		}
<span class="nc" id="L870">	}</span>

	/**
	 */
	@Override
	protected void onFinishInflate() {
<span class="nc" id="L876">		super.onFinishInflate();</span>
<span class="nc" id="L877">		final int childCount = getChildCount();</span>
<span class="nc bnc" id="L878" title="All 2 branches missed.">		for (int i = 0; i &lt; childCount; i++) {</span>
<span class="nc" id="L879">			final View child = getChildAt(i);</span>
<span class="nc" id="L880">			final LayoutParams layoutParams = (LayoutParams) child.getLayoutParams();</span>
<span class="nc bnc" id="L881" title="All 5 branches missed.">			switch (layoutParams.childType) {</span>
				case LayoutParams.TYPE_INPUT:
<span class="nc bnc" id="L883" title="All 2 branches missed.">					if (child != mInputView) {</span>
<span class="nc" id="L884">						removeView(mInputView);</span>
<span class="nc" id="L885">						this.mInputView = child;</span>
					}
					break;
				case LayoutParams.TYPE_LABEL:
<span class="nc bnc" id="L889" title="All 4 branches missed.">					if (child != mLabelView &amp;&amp; child instanceof TextView) {</span>
<span class="nc" id="L890">						removeView(mLabelView);</span>
<span class="nc" id="L891">						this.mLabelView = (TextView) child;</span>
					}
					break;
				case LayoutParams.TYPE_NOTE:
<span class="nc bnc" id="L895" title="All 4 branches missed.">					if (child != mNoteView &amp;&amp; child instanceof TextView) {</span>
<span class="nc" id="L896">						removeView(mNoteView);</span>
<span class="nc" id="L897">						this.mNoteView = (TextView) child;</span>
					}
					break;
				case LayoutParams.TYPE_CONSTRAINT:
<span class="nc bnc" id="L901" title="All 4 branches missed.">					if (child != mConstraintView &amp;&amp; child instanceof TextView) {</span>
<span class="nc" id="L902">						removeView(mConstraintView);</span>
<span class="nc" id="L903">						this.mConstraintView = (TextView) child;</span>
					}
					break;
			}
		}
<span class="nc bnc" id="L908" title="All 4 branches missed.">		if (mLabelView != null &amp;&amp; !TextUtils.isEmpty(mLabel)) {</span>
<span class="nc" id="L909">			mLabelView.setText(mLabel);</span>
		}
<span class="nc bnc" id="L911" title="All 2 branches missed.">		if (mNoteView != null) {</span>
<span class="nc bnc" id="L912" title="All 4 branches missed.">			if (!TextUtils.isEmpty(mNote) &amp;&amp; (mPrivateFlags &amp; PFLAG_HAS_ERROR) == 0) {</span>
<span class="nc" id="L913">				mNoteView.setText(mNote);</span>
<span class="nc bnc" id="L914" title="All 4 branches missed.">			} else if (!TextUtils.isEmpty(mError) &amp;&amp; (mPrivateFlags &amp; PFLAG_HAS_ERROR) != 0) {</span>
<span class="nc" id="L915">				mNoteView.setText(mError);</span>
			}
		}
<span class="nc" id="L918">		this.updateChildrenEnabledState(isEnabled());</span>
<span class="nc" id="L919">		this.applyLabelTextTint();</span>
<span class="nc" id="L920">		this.updateFeaturesVisibility();</span>
<span class="nc" id="L921">	}</span>

	/**
	 * Updates visibility of the featured views depends on the current input feature flags.
	 */
	private void updateFeaturesVisibility() {
<span class="nc" id="L927">		this.updateLabelFeatureVisibility();</span>
<span class="nc" id="L928">		this.updateNoteFeatureVisibility();</span>
<span class="nc" id="L929">		this.updateConstraintFeatureVisibility();</span>
<span class="nc" id="L930">	}</span>

	/**
	 * Updates visibility of the label view depends on if {@link #FEATURE_LABEL} feature is enabled
	 * for this input layout or not.
	 */
	private void updateLabelFeatureVisibility() {
<span class="nc" id="L937">		this.updateFeatureViewVisibility(mLabelView, FEATURE_LABEL);</span>
<span class="nc" id="L938">	}</span>

	/**
	 * Updates visibility of the note view depends on if {@link #FEATURE_NOTE} feature is enabled
	 * for this input layout or not.
	 */
	private void updateNoteFeatureVisibility() {
<span class="nc" id="L945">		this.updateFeatureViewVisibility(mNoteView, FEATURE_NOTE);</span>
<span class="nc" id="L946">	}</span>

	/**
	 * Updates visibility of the note view depends on if {@link #FEATURE_CONSTRAINT} feature is enabled
	 * for this input layout or not.
	 */
	private void updateConstraintFeatureVisibility() {
<span class="nc" id="L953">		this.updateFeatureViewVisibility(mConstraintView, FEATURE_CONSTRAINT);</span>
<span class="nc" id="L954">	}</span>

	/**
	 * Updates visibility of the specified &lt;var&gt;featureView&lt;/var&gt; depending on if a feature with the
	 * specified &lt;var&gt;featureFlag&lt;/var&gt; is enabled or not.
	 *
	 * @param featureView The feature view of which visibility to update.
	 * @param featureFlag Flag of the feature to determine the proper visibility.
	 */
	private void updateFeatureViewVisibility(View featureView, int featureFlag) {
<span class="nc bnc" id="L964" title="All 4 branches missed.">		if (featureView != null) featureView.setVisibility(</span>
				(mFeatures &amp; featureFlag) != 0 ? VISIBLE : GONE
		);
<span class="nc" id="L967">	}</span>

	/**
	 */
	@Override
	protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
<span class="nc bnc" id="L973" title="All 2 branches missed.">		if (mInputView == null) {</span>
<span class="nc" id="L974">			throw new IllegalStateException(&quot;Input view not found within InputLayout.&quot;);</span>
		}
<span class="nc" id="L976">		super.onMeasure(widthMeasureSpec, heightMeasureSpec);</span>
<span class="nc" id="L977">		int width = getMeasuredWidth();</span>
<span class="nc" id="L978">		int height = 0;</span>
<span class="nc bnc" id="L979" title="All 2 branches missed.">		if (mInputView.getVisibility() != View.GONE) {</span>
<span class="nc" id="L980">			final LayoutParams params = (LayoutParams) mInputView.getLayoutParams();</span>
<span class="nc" id="L981">			height += mInputView.getMeasuredHeight() + params.topMargin + params.bottomMargin;</span>

<span class="nc" id="L983">			final int contentWidth = width - getPaddingLeft() - getPaddingRight();</span>
<span class="nc bnc" id="L984" title="All 4 branches missed.">			if (params.width == LayoutParams.MATCH_PARENT &amp;&amp; mInputView.getMeasuredWidth() &lt; contentWidth) {</span>
				// Measure input view's width to match parent size.
<span class="nc" id="L986">				measureChild(mInputView,</span>
<span class="nc" id="L987">						MeasureSpec.makeMeasureSpec(contentWidth, MeasureSpec.EXACTLY),</span>
						heightMeasureSpec
				);
			}
		}
<span class="nc bnc" id="L992" title="All 4 branches missed.">		if (mLabelView != null &amp;&amp; mLabelView.getVisibility() != GONE) {</span>
<span class="nc" id="L993">			final LayoutParams params = (LayoutParams) mLabelView.getLayoutParams();</span>
<span class="nc" id="L994">			height += mLabelView.getMeasuredHeight() + params.topMargin + params.bottomMargin;</span>
		}
		int footerHeight, noteWidth, constraintWidth;
<span class="nc" id="L997">		footerHeight = noteWidth = 0;</span>
<span class="nc bnc" id="L998" title="All 4 branches missed.">		if (mNoteView != null &amp;&amp; mNoteView.getVisibility() != GONE) {</span>
<span class="nc" id="L999">			final LayoutParams params = (LayoutParams) mNoteView.getLayoutParams();</span>
<span class="nc" id="L1000">			footerHeight += mNoteView.getMeasuredHeight() + params.topMargin + params.bottomMargin;</span>
<span class="nc" id="L1001">			noteWidth = mNoteView.getMeasuredWidth() + params.leftMargin + params.rightMargin;</span>
		}
<span class="nc bnc" id="L1003" title="All 4 branches missed.">		if (mConstraintView != null &amp;&amp; mConstraintView.getVisibility() != GONE) {</span>
<span class="nc" id="L1004">			final LayoutParams params = (LayoutParams) mConstraintView.getLayoutParams();</span>
<span class="nc" id="L1005">			footerHeight = Math.max(footerHeight, mConstraintView.getMeasuredHeight() + params.topMargin + params.bottomMargin);</span>
<span class="nc" id="L1006">			constraintWidth = mConstraintView.getMeasuredWidth() + params.leftMargin + params.rightMargin;</span>

			// Check for width of note + constraint text view and if it exceeds edit text's width
			// re-measure note text view to be width only as it is available from edit text's width
			// minus note text view width.
<span class="nc" id="L1011">			final int contentWidth = width - getPaddingLeft() - getPaddingRight();</span>
<span class="nc bnc" id="L1012" title="All 2 branches missed.">			if ((noteWidth + constraintWidth) &gt; contentWidth) {</span>
<span class="nc bnc" id="L1013" title="All 2 branches missed.">				if (noteWidth &gt; 0) {</span>
<span class="nc" id="L1014">					final LayoutParams errorParams = (LayoutParams) mNoteView.getLayoutParams();</span>
<span class="nc" id="L1015">					measureChild(mNoteView,</span>
<span class="nc" id="L1016">							MeasureSpec.makeMeasureSpec(contentWidth - constraintWidth, MeasureSpec.AT_MOST),</span>
							heightMeasureSpec
					);
<span class="nc" id="L1019">					footerHeight = Math.max(footerHeight, mNoteView.getMeasuredHeight() + errorParams.topMargin + errorParams.bottomMargin);</span>
<span class="nc" id="L1020">				} else {</span>
<span class="nc" id="L1021">					measureChild(mConstraintView,</span>
<span class="nc" id="L1022">							MeasureSpec.makeMeasureSpec(contentWidth, MeasureSpec.AT_MOST),</span>
							heightMeasureSpec
					);
<span class="nc" id="L1025">					footerHeight = Math.max(footerHeight, mConstraintView.getMeasuredHeight() + params.topMargin + params.bottomMargin);</span>
				}
			}
		}
<span class="nc" id="L1029">		height += footerHeight;</span>
		// Take into count also padding.
<span class="nc" id="L1031">		height += getPaddingTop() + getPaddingBottom();</span>
		// Check also against minimum size.
<span class="nc" id="L1033">		height = Math.max(height, getSuggestedMinimumHeight());</span>
<span class="nc" id="L1034">		setMeasuredDimension(width, height);</span>
<span class="nc" id="L1035">	}</span>

	/**
	 */
	@Override
	protected void onLayout(boolean changed, int left, int top, int right, int bottom) {
<span class="nc" id="L1041">		int childTop = getPaddingTop();</span>
		// Layout label text view from the top|left.
<span class="nc" id="L1043">		childTop = this.layoutChildWithMargins(mLabelView, getPaddingLeft(), childTop);</span>
		// Layout input view from the next-top|left.
<span class="nc" id="L1045">		childTop = this.layoutChildWithMargins(mInputView, getPaddingLeft(), childTop);</span>
		// Layout note/error text view from the next-top|left.
<span class="nc" id="L1047">		this.layoutChildWithMargins(mNoteView, getPaddingLeft(), childTop);</span>
<span class="nc bnc" id="L1048" title="All 2 branches missed.">		if (mConstraintView != null) {</span>
			// Layout constraint text view from the next-top|right.
<span class="nc" id="L1050">			final LayoutParams constraintParams = (LayoutParams) mConstraintView.getLayoutParams();</span>
<span class="nc" id="L1051">			final int constraintViewWidth = constraintParams.leftMargin + constraintParams.rightMargin + mConstraintView.getMeasuredWidth();</span>
<span class="nc" id="L1052">			this.layoutChildWithMargins(</span>
					mConstraintView,
<span class="nc" id="L1054">					getMeasuredWidth() - getPaddingRight() - constraintViewWidth,</span>
					childTop
			);
		}
<span class="nc" id="L1058">	}</span>

	/**
	 * Layouts the given &lt;var&gt;child&lt;/var&gt; view at the specified &lt;var&gt;left&lt;/var&gt; and &lt;var&gt;top&lt;/var&gt;
	 * position taking into count also margins of the view.
	 *
	 * @param child The child view to be layouted.
	 * @param left  The desired left position for the child view.
	 * @param top   The desired top position for the child view.
	 * @return New top position for the next child view to be layouted below the specified view.
	 */
	private int layoutChildWithMargins(View child, int left, int top) {
<span class="nc bnc" id="L1070" title="All 4 branches missed.">		if (child != null &amp;&amp; child.getVisibility() != View.GONE) {</span>
<span class="nc" id="L1071">			final LayoutParams params = (LayoutParams) child.getLayoutParams();</span>
<span class="nc" id="L1072">			child.layout(</span>
					left += params.leftMargin,
					top += params.topMargin,
<span class="nc" id="L1075">					left + child.getMeasuredWidth(),</span>
<span class="nc" id="L1076">					top + child.getMeasuredHeight()</span>
			);
<span class="nc" id="L1078">			top += child.getMeasuredHeight() + params.bottomMargin;</span>
		}
<span class="nc" id="L1080">		return top;</span>
	}

	/**
	 * Invoked whenever {@link #requestInputFeatures(int)} is called upon this layout and the specified
	 * &lt;var&gt;features&lt;/var&gt; has been changed.
	 *
	 * @param features The changed input features.
	 */
	protected void onInputFeaturesChange(@InputFeature int features) {
<span class="nc" id="L1090">	}</span>

	/**
	 * Invoked whenever {@link #setError(CharSequence)} or {@link #clearError()} is called and text
	 * within note text view need to be updated.
	 * &lt;p&gt;
	 * This implementation basically fades out the &lt;var&gt;noteView&lt;/var&gt; changes its text and fades it
	 * back.
	 *
	 * @param noteView Note text view to be animated.
	 * @param text     The text to be changed within not view.
	 * @param colors   ColorStateList which should be also changed for the note view.
	 * @return {@code True} if text change has been handled by animation, {@code false} if text should
	 * be changed just by setting text to the note view directly.
	 */
	@SuppressWarnings(&quot;NewApi&quot;)
	protected boolean onAnimateNoteTextChange(@NonNull TextView noteView, @NonNull CharSequence text, @NonNull ColorStateList colors) {
<span class="nc bnc" id="L1107" title="All 6 branches missed.">		if (mNoteTextChangeDuration &gt; 0 &amp;&amp; isAttachedToWindow() &amp;&amp; ANIMABLE) {</span>
<span class="nc" id="L1108">			mNoteTextChangeListener.text = text;</span>
<span class="nc" id="L1109">			mNoteTextChangeListener.colors = colors;</span>
<span class="nc" id="L1110">			noteView.animate()</span>
<span class="nc" id="L1111">					.setDuration(mNoteTextChangeDuration)</span>
<span class="nc" id="L1112">					.setListener(mNoteTextChangeListener)</span>
<span class="nc" id="L1113">					.alpha(0)</span>
<span class="nc" id="L1114">					.start();</span>
<span class="nc" id="L1115">			return true;</span>
		}
<span class="nc" id="L1117">		return false;</span>
	}

	/**
	 * Updates the given &lt;var&gt;text&lt;/var&gt; and &lt;var&gt;colors&lt;/var&gt; of the note view of this layout.
	 *
	 * @param text   The new text for note view.
	 * @param colors The new colors for note view.
	 */
	final void updateNoteViewTextAndColors(CharSequence text, ColorStateList colors) {
<span class="nc bnc" id="L1127" title="All 2 branches missed.">		if (mNoteView != null) {</span>
<span class="nc" id="L1128">			mNoteView.setText(text);</span>
<span class="nc" id="L1129">			mNoteView.setTextColor(colors);</span>
		}
<span class="nc" id="L1131">	}</span>

	/**
	 * Clears the current error text of this input layout. Calling of this method will also change
	 * the background of the input view back to the original one. Also the current note text will
	 * be set back to the note view, as described in {@link #setError(CharSequence)}, error text for
	 * note text change will be handled by using of cross-fade animation.
	 *
	 * @param animate {@code True} to animate clearing of the error, {@code false} otherwise.
	 */
	final void clearError(boolean animate) {
<span class="nc bnc" id="L1142" title="All 2 branches missed.">		if ((mPrivateFlags &amp; PFLAG_HAS_ERROR) != 0) {</span>
<span class="nc" id="L1143">			this.updatePrivateFlags(PFLAG_HAS_ERROR, false);</span>
<span class="nc" id="L1144">			handleErrorUpdate(&quot;&quot;, animate);</span>
		}
<span class="nc" id="L1146">	}</span>

	/**
	 * Changes visibility of the error highlight of the edit text and also note and constraint text
	 * views.
	 *
	 * @param visible {@code True} to show error highlight, {@code false} to clear it.
	 */
	final void setErrorHighlightVisible(boolean visible) {
<span class="nc bnc" id="L1155" title="All 2 branches missed.">		if (visible != hasPrivateFlag(PFLAG_ERROR_HIGHLIGHT_VISIBLE)) {</span>
<span class="nc bnc" id="L1156" title="All 2 branches missed.">			if (visible) {</span>
<span class="nc" id="L1157">				this.updatePrivateFlags(PFLAG_ERROR_HIGHLIGHT_VISIBLE, true);</span>
				// Save the original constraint and note text colors.
<span class="nc bnc" id="L1159" title="All 2 branches missed.">				final ColorStateList constraintColors = mConstraintView != null ? mConstraintView.getTextColors() : null;</span>
<span class="nc bnc" id="L1160" title="All 4 branches missed.">				if (constraintColors != null &amp;&amp; !constraintColors.equals(mColorsInfo.errorColors)) {</span>
<span class="nc" id="L1161">					mColorsInfo.constraintColors = constraintColors;</span>
				}
<span class="nc bnc" id="L1163" title="All 2 branches missed.">				final ColorStateList noteColors = mNoteView != null ? mNoteView.getTextColors() : null;</span>
<span class="nc bnc" id="L1164" title="All 4 branches missed.">				if (noteColors != null &amp;&amp; !noteColors.equals(mColorsInfo.errorColors)) {</span>
<span class="nc" id="L1165">					mColorsInfo.noteColors = noteColors;</span>
				}
<span class="nc" id="L1167">				this.updateTextViewColors(mConstraintView, mColorsInfo.errorColors);</span>
<span class="nc bnc" id="L1168" title="All 2 branches missed.">			} else if ((mPrivateFlags &amp; PFLAG_HAS_ERROR) == 0) {</span>
<span class="nc" id="L1169">				this.updatePrivateFlags(PFLAG_ERROR_HIGHLIGHT_VISIBLE, false);</span>
<span class="nc" id="L1170">				this.updateTextViewColors(mConstraintView, mColorsInfo.constraintColors);</span>
			}
		}
<span class="nc" id="L1173">	}</span>

	/**
	 * Applies tint to the label view's color from the current {@link #mTintInfo}.
	 */
	private void applyLabelTextTint() {
<span class="nc bnc" id="L1179" title="All 2 branches missed.">		if (mLabelView != null &amp;&amp;</span>
<span class="nc bnc" id="L1180" title="All 6 branches missed.">				mLabelView.getCurrentTextColor() == Color.TRANSPARENT &amp;&amp;</span>
				mTintInfo != null &amp;&amp;
				mTintInfo.labelTint != null) {
<span class="nc" id="L1183">			mLabelView.setTextColor(mTintInfo.labelTint);</span>
		}
<span class="nc" id="L1185">	}</span>

	/**
	 * Handles update of the specified &lt;var&gt;error&lt;/var&gt;.
	 *
	 * @param error         Error text which should be currently displayed in note view. If empty the note
	 *                      text will be set to the note view.
	 * @param animateChange {@code True} to animate change in note vs. error texts, {@code false} othrewise.
	 */
	private void handleErrorUpdate(CharSequence error, boolean animateChange) {
<span class="nc bnc" id="L1195" title="All 2 branches missed.">		this.mError = error != null ? error : &quot;&quot;;</span>
<span class="nc bnc" id="L1196" title="All 4 branches missed.">		if (mNoteView == null || mInputView == null) {</span>
<span class="nc" id="L1197">			refreshDrawableState();</span>
<span class="nc" id="L1198">			invalidate();</span>
<span class="nc" id="L1199">			return;</span>
		}
<span class="nc bnc" id="L1201" title="All 2 branches missed.">		if ((mPrivateFlags &amp; PFLAG_HAS_ERROR) != 0) {</span>
<span class="nc" id="L1202">			this.setErrorHighlightVisible(true);</span>
<span class="nc bnc" id="L1203" title="All 2 branches missed.">			if (animateChange) {</span>
<span class="nc bnc" id="L1204" title="All 2 branches missed.">				if (!onAnimateNoteTextChange(mNoteView, mError, mColorsInfo.errorColors)) {</span>
<span class="nc" id="L1205">					updateNoteViewTextAndColors(mError, mColorsInfo.errorColors);</span>
				}
			} else {
<span class="nc" id="L1208">				updateNoteViewTextAndColors(mError, mColorsInfo.errorColors);</span>
			}
		} else {
<span class="nc" id="L1211">			this.setErrorHighlightVisible(false);</span>
<span class="nc bnc" id="L1212" title="All 2 branches missed.">			if (animateChange) {</span>
<span class="nc bnc" id="L1213" title="All 2 branches missed.">				if (!onAnimateNoteTextChange(mNoteView, mNote, mColorsInfo.noteColors)) {</span>
<span class="nc" id="L1214">					updateNoteViewTextAndColors(mNote, mColorsInfo.noteColors);</span>
				}
			} else {
<span class="nc" id="L1217">				updateNoteViewTextAndColors(mNote, mColorsInfo.noteColors);</span>
			}
		}
<span class="nc" id="L1220">		refreshDrawableState();</span>
<span class="nc" id="L1221">		invalidate();</span>
<span class="nc" id="L1222">	}</span>

	/**
	 * Updates enabled state of the current children of this layout.
	 *
	 * @param enabled {@code True} to set children enabled, {@code false} otherwise.
	 */
	private void updateChildrenEnabledState(boolean enabled) {
<span class="nc bnc" id="L1230" title="All 2 branches missed.">		for (int i = 0; i &lt; getChildCount(); i++) {</span>
<span class="nc" id="L1231">			final View child = getChildAt(i);</span>
<span class="nc bnc" id="L1232" title="All 2 branches missed.">			if (child != null) child.setEnabled(enabled);</span>
		}
<span class="nc" id="L1234">	}</span>

	/**
	 * Updates text color of the specified &lt;var&gt;textView&lt;/var&gt; to the given ones.
	 *
	 * @param textView The text view of which colors to update.
	 * @param colors   The desired colors to be set to the text view.
	 */
	private void updateTextViewColors(TextView textView, ColorStateList colors) {
<span class="nc bnc" id="L1243" title="All 2 branches missed.">		if (textView != null) textView.setTextColor(colors);</span>
<span class="nc" id="L1244">	}</span>

	/**
	 */
	@Override
	protected int[] onCreateDrawableState(int extraSpace) {
<span class="nc" id="L1250">		final int[] drawableState = super.onCreateDrawableState(extraSpace + 1);</span>
<span class="nc bnc" id="L1251" title="All 2 branches missed.">		if (hasError()) {</span>
<span class="nc" id="L1252">			mergeDrawableStates(drawableState, WidgetStateSet.ERROR);</span>
		}
<span class="nc" id="L1254">		return drawableState;</span>
	}

	/**
	 */
	@Override
	protected Parcelable onSaveInstanceState() {
<span class="nc" id="L1261">		final SavedState savedState = new SavedState(super.onSaveInstanceState());</span>
<span class="nc" id="L1262">		savedState.label = mLabel;</span>
<span class="nc" id="L1263">		savedState.note = mNote;</span>
<span class="nc" id="L1264">		savedState.error = mError;</span>
<span class="nc" id="L1265">		savedState.constraint = mConstraint;</span>
<span class="nc" id="L1266">		return savedState;</span>
	}

	/**
	 */
	@Override
	protected void onRestoreInstanceState(Parcelable state) {
<span class="nc bnc" id="L1273" title="All 2 branches missed.">		if (!(state instanceof SavedState)) {</span>
<span class="nc" id="L1274">			super.onRestoreInstanceState(state);</span>
<span class="nc" id="L1275">			return;</span>
		}
<span class="nc" id="L1277">		final SavedState savedState = (SavedState) state;</span>
<span class="nc" id="L1278">		super.onRestoreInstanceState(savedState.getSuperState());</span>
<span class="nc bnc" id="L1279" title="All 2 branches missed.">		if (savedState.label != null) {</span>
<span class="nc" id="L1280">			setLabel(savedState.label);</span>
		}
<span class="nc bnc" id="L1282" title="All 2 branches missed.">		if (savedState.note != null) {</span>
<span class="nc" id="L1283">			setNote(savedState.note);</span>
		}
<span class="nc bnc" id="L1285" title="All 2 branches missed.">		if (!TextUtils.isEmpty(savedState.error)) {</span>
<span class="nc" id="L1286">			setError(savedState.error);</span>
		}
<span class="nc bnc" id="L1288" title="All 2 branches missed.">		if (savedState.constraint != null) {</span>
<span class="nc" id="L1289">			setConstraint(savedState.constraint);</span>
		}
<span class="nc" id="L1291">	}</span>

	/**
	 * Updates the current features flags.
	 *
	 * @param feature Value of the desired feature to add/remove to/from the current features flags.
	 * @param add     Boolean flag indicating whether to add or remove the specified &lt;var&gt;feature&lt;/var&gt;.
	 */
	@SuppressWarnings(&quot;unused&quot;)
	final void updateFeatures(int feature, boolean add) {
<span class="nc bnc" id="L1301" title="All 2 branches missed.">		if (add) this.mFeatures |= feature;</span>
<span class="nc" id="L1302">		else this.mFeatures &amp;= ~feature;</span>
<span class="nc" id="L1303">	}</span>

	/**
	 * Returns a boolean flag indicating whether the specified &lt;var&gt;feature&lt;/var&gt; is contained within
	 * the current features flags or not.
	 *
	 * @param feature Value of the feature to check.
	 * @return {@code True} if the requested feature is contained, {@code false} otherwise.
	 */
	@SuppressWarnings(&quot;unused&quot;)
	final boolean hasFeature(int feature) {
<span class="nc bnc" id="L1314" title="All 2 branches missed.">		return (mFeatures &amp; feature) != 0;</span>
	}

	/**
	 * Updates the current private flags.
	 *
	 * @param flag Value of the desired flag to add/remove to/from the current private flags.
	 * @param add  Boolean flag indicating whether to add or remove the specified &lt;var&gt;flag&lt;/var&gt;.
	 */
	@SuppressWarnings(&quot;unused&quot;)
	private void updatePrivateFlags(int flag, boolean add) {
<span class="nc bnc" id="L1325" title="All 2 branches missed.">		if (add) this.mPrivateFlags |= flag;</span>
<span class="nc" id="L1326">		else this.mPrivateFlags &amp;= ~flag;</span>
<span class="nc" id="L1327">	}</span>

	/**
	 * Returns a boolean flag indicating whether the specified &lt;var&gt;flag&lt;/var&gt; is contained within
	 * the current private flags or not.
	 *
	 * @param flag Value of the flag to check.
	 * @return {@code True} if the requested flag is contained, {@code false} otherwise.
	 */
	@SuppressWarnings(&quot;unused&quot;)
	private boolean hasPrivateFlag(int flag) {
<span class="nc bnc" id="L1338" title="All 2 branches missed.">		return (mPrivateFlags &amp; flag) != 0;</span>
	}

	/**
	 * Inner classes ===============================================================================
	 */

	/**
	 * Per-child layout information for child views of {@link InputLayout}.
	 * &lt;p&gt;
	 * See {@link R.styleable#Ui_InputLayout_LayoutParams Layout Attributes} for a list of all
	 * child view attributes that this class supports.
	 *
	 * @author Martin Albedinsky
	 */
	public static class LayoutParams extends FrameLayoutWidget.LayoutParams {

		/**
		 * Type flag to identify child view that contains a user &lt;b&gt;input&lt;/b&gt;.
		 */
		static final int TYPE_INPUT = 0x01;

		/**
		 * Type flag to identify child view that presents a &lt;b&gt;label&lt;/b&gt; text.
		 */
		static final int TYPE_LABEL = 0x02;

		/**
		 * Type flag to identify child view that presents a &lt;b&gt;note&lt;/b&gt; text.
		 */
		static final int TYPE_NOTE = 0x03;

		/**
		 * Type flag to identify child view that presents a &lt;b&gt;constraint&lt;/b&gt; text.
		 */
		static final int TYPE_CONSTRAINT = 0x04;

		/**
		 * Type of a view associated with these parameters. This type is used by InputLayout to
		 * respectively treat and properly position each of its child views.
		 */
		private int childType;

		/**
		 * Creates a new instance of LayoutParams configured from the specified &lt;var&gt;attrs&lt;/var&gt;.
		 *
		 * @param context Context used to parse the given attributes set.
		 * @param attrs   The attributes set from which to configure the new layout params.
		 */
		public LayoutParams(Context context, AttributeSet attrs) {
<span class="nc" id="L1388">			super(context, attrs);</span>
<span class="nc" id="L1389">			final TypedArray typedArray = context.obtainStyledAttributes(attrs, R.styleable.Ui_InputLayout_LayoutParams, 0, 0);</span>
<span class="nc bnc" id="L1390" title="All 2 branches missed.">			if (typedArray != null) {</span>
<span class="nc" id="L1391">				final int n = typedArray.getIndexCount();</span>
<span class="nc bnc" id="L1392" title="All 2 branches missed.">				for (int i = 0; i &lt; n; i++) {</span>
<span class="nc" id="L1393">					final int index = typedArray.getIndex(i);</span>
<span class="nc bnc" id="L1394" title="All 2 branches missed.">					if (index == R.styleable.Ui_InputLayout_LayoutParams_uiInputChildType) {</span>
<span class="nc" id="L1395">						this.childType = typedArray.getInt(index, childType);</span>
					}
				}
<span class="nc" id="L1398">				typedArray.recycle();</span>
			}
<span class="nc" id="L1400">		}</span>

		/**
		 * Creates a new instance of LayoutParams with the specified size parameters.
		 *
		 * @param width  The width attribute for the new layout params.
		 * @param height The height attribute for the new layout params.
		 */
		public LayoutParams(int width, int height) {
<span class="nc" id="L1409">			super(width, height);</span>
<span class="nc" id="L1410">		}</span>

		/**
		 * Creates a new instance of LayoutParams with the specified size and gravity parameters.
		 *
		 * @param width   The width attribute for the new layout params.
		 * @param height  The height attribute for the new layout params.
		 * @param gravity The gravity attribute for the new layout params.
		 */
		public LayoutParams(int width, int height, int gravity) {
<span class="nc" id="L1420">			super(width, height, gravity);</span>
<span class="nc" id="L1421">		}</span>

		/**
		 * Creates a new instance of LayoutParams from the given &lt;var&gt;source&lt;/var&gt; parameters.
		 *
		 * @param source The source layout parameters from which to configure the new layout params.
		 */
		public LayoutParams(ViewGroup.LayoutParams source) {
<span class="nc" id="L1429">			super(source);</span>
<span class="nc" id="L1430">		}</span>

		/**
		 * Creates a new instance of LayoutParams from the given &lt;var&gt;source&lt;/var&gt; parameters.
		 *
		 * @param source The source layout parameters from which to configure the new layout params.
		 */
		public LayoutParams(MarginLayoutParams source) {
<span class="nc" id="L1438">			super(source);</span>
<span class="nc" id="L1439">		}</span>

		/**
		 * Creates a new instance of LayoutParams from the given &lt;var&gt;source&lt;/var&gt; parameters.
		 *
		 * @param source The source layout parameters from which to configure the new layout params.
		 */
		@TargetApi(Build.VERSION_CODES.KITKAT)
		public LayoutParams(FrameLayout.LayoutParams source) {
<span class="nc" id="L1448">			super(source);</span>
<span class="nc" id="L1449">		}</span>
	}

	/**
	 * A {@link WidgetSavedState} implementation used to ensure that the state of {@link InputLayout}
	 * is properly saved.
	 *
	 * @author Martin Albedinsky
	 */
	public static class SavedState extends WidgetSavedState {

		/**
		 * Creator used to create an instance or array of instances of SavedState from {@link android.os.Parcel}.
		 */
<span class="nc" id="L1463">		public static final Creator&lt;SavedState&gt; CREATOR = new Creator&lt;SavedState&gt;() {</span>
			/**
			 */
			@Override
			public SavedState createFromParcel(@NonNull Parcel source) {
<span class="nc" id="L1468">				return new SavedState(source);</span>
			}

			/**
			 */
			@Override
			public SavedState[] newArray(int size) {
<span class="nc" id="L1475">				return new SavedState[size];</span>
			}
		};

		/**
		 */
		CharSequence label, note, error, constraint;

		/**
		 * Creates a new instance of SavedState with the given &lt;var&gt;superState&lt;/var&gt; to allow chaining
		 * of saved states in {@link #onSaveInstanceState()} and also in {@link #onRestoreInstanceState(android.os.Parcelable)}.
		 *
		 * @param superState The super state obtained from {@code super.onSaveInstanceState()} within
		 *                   {@code onSaveInstanceState()}.
		 */
		protected SavedState(@NonNull Parcelable superState) {
<span class="nc" id="L1491">			super(superState);</span>
<span class="nc" id="L1492">		}</span>

		/**
		 * Called from {@link #CREATOR} to create an instance of SavedState form the given parcel
		 * &lt;var&gt;source&lt;/var&gt;.
		 *
		 * @param source Parcel with data for the new instance.
		 */
		protected SavedState(@NonNull Parcel source) {
<span class="nc" id="L1501">			super(source);</span>
<span class="nc" id="L1502">			this.label = TextUtils.CHAR_SEQUENCE_CREATOR.createFromParcel(source);</span>
<span class="nc" id="L1503">			this.note = TextUtils.CHAR_SEQUENCE_CREATOR.createFromParcel(source);</span>
<span class="nc" id="L1504">			this.error = TextUtils.CHAR_SEQUENCE_CREATOR.createFromParcel(source);</span>
<span class="nc" id="L1505">			this.constraint = TextUtils.CHAR_SEQUENCE_CREATOR.createFromParcel(source);</span>
<span class="nc" id="L1506">		}</span>

		/**
		 */
		@Override
		public void writeToParcel(@NonNull Parcel dest, int flags) {
<span class="nc" id="L1512">			super.writeToParcel(dest, flags);</span>
<span class="nc" id="L1513">			TextUtils.writeToParcel(label, dest, flags);</span>
<span class="nc" id="L1514">			TextUtils.writeToParcel(note, dest, flags);</span>
<span class="nc" id="L1515">			TextUtils.writeToParcel(error, dest, flags);</span>
<span class="nc" id="L1516">			TextUtils.writeToParcel(constraint, dest, flags);</span>
<span class="nc" id="L1517">		}</span>
	}

	/**
	 * This class holds all data necessary to tint all components of this view.
	 */
<span class="nc" id="L1523">	private static final class TintInfo extends Widget.TintInfo {</span>

		/**
		 * Colors used to tint label text view.
		 */
		ColorStateList labelTint;
	}

	/**
	 * This class holds all ColorStateLists used within this layout for its TextViews.
	 */
<span class="nc" id="L1534">	private static final class ColorsInfo {</span>

		/**
		 * Set of colors set to text views in case of error.
		 */
<span class="nc" id="L1539">		private ColorStateList errorColors = ColorStateList.valueOf(Color.parseColor(&quot;#F44336&quot;));</span>

		/**
		 * Original set of colors for note view's text.
		 */
		private ColorStateList noteColors;

		/**
		 * Original set of colors for constraint view's text.
		 */
		private ColorStateList constraintColors;
	}

	/**
	 * Animation listener used when calling {@link #onAnimateNoteTextChange(android.widget.TextView, CharSequence, android.content.res.ColorStateList)}
	 * to properly change note text and colors.
	 */
	@SuppressWarnings(&quot;NewApi&quot;)
<span class="nc" id="L1557">	private final class NoteTextChangeListener extends AnimatorListenerAdapter {</span>

		/**
		 * Colors to be changed for note view.
		 */
		ColorStateList colors;

		/**
		 * Text to be changed within note view.
		 */
		CharSequence text;

		/**
		 */
		@Override
		public void onAnimationEnd(Animator animation) {
<span class="nc bnc" id="L1573" title="All 2 branches missed.">			if (mNoteView != null) {</span>
<span class="nc" id="L1574">				mNoteView.setText(text);</span>
<span class="nc" id="L1575">				mNoteView.setTextColor(colors);</span>
<span class="nc" id="L1576">				mNoteView.postDelayed(new Runnable() {</span>
					@Override
					public void run() {
<span class="nc" id="L1579">						startFadeInAnimation();</span>
<span class="nc" id="L1580">					}</span>
				}, 100);
			}
<span class="nc" id="L1583">		}</span>

		/**
		 * Starts fade in animation for the note text view.
		 */
		void startFadeInAnimation() {
<span class="nc" id="L1589">			mNoteView.animate()</span>
<span class="nc" id="L1590">					.setDuration(mNoteTextChangeDuration)</span>
<span class="nc" id="L1591">					.setListener(null)</span>
<span class="nc" id="L1592">					.alpha(1)</span>
<span class="nc" id="L1593">					.start();</span>
<span class="nc" id="L1594">		}</span>
	}
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.eclemma.org/jacoco">JaCoCo</a> 0.7.5.201505241946</span>Generated by the Android Gradle plugin 2.3.0</div></body></html>