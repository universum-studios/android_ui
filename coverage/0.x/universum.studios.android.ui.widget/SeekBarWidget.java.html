<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../.resources/report.css" type="text/css"/><link rel="shortcut icon" href="../.resources/report.gif" type="image/gif"/><title>SeekBarWidget.java</title><link rel="stylesheet" href="../.resources/prettify.css" type="text/css"/><script type="text/javascript" src="../.resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=0;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../.sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">debugAndroidTest</a> &gt; <a href="index.source.html" class="el_package">universum.studios.android.ui.widget</a> &gt; <span class="el_source">SeekBarWidget.java</span></div><h1>SeekBarWidget.java</h1><pre class="source lang-java linenums">/*
 * =================================================================================================
 *                             Copyright (C) 2017 Universum Studios
 * =================================================================================================
 *         Licensed under the Apache License, Version 2.0 or later (further &quot;License&quot; only).
 * -------------------------------------------------------------------------------------------------
 * You may use this file only in compliance with the License. More details and copy of this License 
 * you may obtain at
 * 
 * 		http://www.apache.org/licenses/LICENSE-2.0
 * 
 * You can redistribute, modify or publish any part of the code written within this file but as it 
 * is described in the License, the software distributed under the License is distributed on an 
 * &quot;AS IS&quot; BASIS, WITHOUT WARRANTIES or CONDITIONS OF ANY KIND.
 * 
 * See the License for the specific language governing permissions and limitations under the License.
 * =================================================================================================
 */
package universum.studios.android.ui.widget;

import android.animation.ObjectAnimator;
import android.annotation.SuppressLint;
import android.annotation.TargetApi;
import android.content.Context;
import android.content.res.ColorStateList;
import android.content.res.TypedArray;
import android.graphics.Canvas;
import android.graphics.Paint;
import android.graphics.PorterDuff;
import android.graphics.Rect;
import android.graphics.Typeface;
import android.graphics.drawable.Drawable;
import android.graphics.drawable.LayerDrawable;
import android.graphics.drawable.RippleDrawable;
import android.graphics.drawable.ScaleDrawable;
import android.os.Build;
import android.os.Parcel;
import android.os.Parcelable;
import android.support.annotation.AttrRes;
import android.support.annotation.ColorInt;
import android.support.annotation.DrawableRes;
import android.support.annotation.FloatRange;
import android.support.annotation.Keep;
import android.support.annotation.NonNull;
import android.support.annotation.Nullable;
import android.support.annotation.StyleRes;
import android.support.v4.view.ViewCompat;
import android.util.AttributeSet;
import android.util.TypedValue;
import android.view.Gravity;
import android.view.MotionEvent;
import android.view.View;
import android.view.accessibility.AccessibilityEvent;
import android.view.accessibility.AccessibilityNodeInfo;
import android.view.animation.Animation;
import android.view.animation.Transformation;
import android.widget.SeekBar;

import universum.studios.android.font.Font;
import universum.studios.android.font.FontWidget;
import universum.studios.android.ui.R;
import universum.studios.android.ui.UiConfig;
import universum.studios.android.ui.graphics.drawable.TintDrawable;
import universum.studios.android.ui.graphics.drawable.TintLayerDrawable;
import universum.studios.android.ui.util.ResourceUtils;

/**
 * Extended version of {@link android.widget.SeekBar}. This updated SeekBar supports tinting for the
 * Android versions below {@link android.os.Build.VERSION_CODES#LOLLIPOP LOLLIPOP} and other useful
 * features described below including &lt;b&gt;discrete&lt;/b&gt; mode that should be enabled whenever a particular
 * SeekBarWidget represents setting for which a user needs to know the exact value of the setting.
 *
 * &lt;h3&gt;Tinting&lt;/h3&gt;
 * &lt;b&gt;Note, that in the current version of SeekBarWidget, tinting for thumb and track below LOLLIPOP
 * is somehow not working properly on all supported Android versions. This issue is scheduled to be
 * resolved in the feature.&lt;/b&gt;
 * &lt;p&gt;
 * Tinting is supported via Xml attributes listed below:
 * &lt;ul&gt;
 * &lt;li&gt;{@link R.attr#uiThumbTint uiThumbTint}&lt;/li&gt;
 * &lt;li&gt;{@link R.attr#uiThumbTintMode uiThumbTintMode}&lt;/li&gt;
 * &lt;li&gt;{@link R.attr#uiProgressTint uiProgressTint}&lt;/li&gt;
 * &lt;li&gt;{@link R.attr#uiProgressTintMode uiProgressTintMode}&lt;/li&gt;
 * &lt;li&gt;{@link R.attr#uiDiscreteIndicatorTint uiDiscreteIndicatorTint}&lt;/li&gt;
 * &lt;li&gt;{@link R.attr#uiDiscreteIndicatorTintMode uiDiscreteIndicatorTintMode}&lt;/li&gt;
 * &lt;/ul&gt;
 * &lt;p&gt;
 * &lt;b&gt;Note, that on {@link android.os.Build.VERSION_CODES#LOLLIPOP LOLLIPOP} and above SDK versions
 * can be also used Xml attributes listed above where in such case will be used the native tinting.&lt;/b&gt;
 * &lt;p&gt;
 * This widget also overrides all SDK methods used to tint its components like {@link #setThumbTintList(android.content.res.ColorStateList)}
 * or {@link #setThumbTintMode(android.graphics.PorterDuff.Mode)}, so these can be used regardless
 * the current version of SDK but invoking of these methods below {@link android.os.Build.VERSION_CODES#LOLLIPOP LOLLIPOP}
 * can be done only directly upon instance of this widget otherwise {@link NoSuchMethodException}
 * will be thrown.
 *
 * &lt;h3&gt;Discrete mode&lt;/h3&gt;
 * SeekBarWidget with the &lt;b&gt;discrete mode&lt;/b&gt; enabled via {@link #setDiscrete(boolean)} will draw
 * above its progress track and thumb discrete indicator to show to a user current progress value.
 * There will be also drawn tick marks for discrete interval of which range can be specified via
 * {@link #setDiscreteIntervalRatio(float)}. These tick marks should serve as a clue for user so
 * he/she will know more precisely where to drag the thumb to pick its desired progress value.
 * &lt;p&gt;
 * &lt;b&gt;Simple view hierarchy model:&lt;/b&gt;
 * &lt;pre&gt;
 *        __
 *       |28|
 *        \/
 * .---.--O---.---.---.---.---.
 *
 * &lt;/pre&gt;
 *
 *
 * &lt;h3&gt;XML attributes&lt;/h3&gt;
 * See {@link SeekBar},
 * {@link R.styleable#Ui_SeekBar SeekBarWidget Attributes}
 *
 * &lt;h3&gt;Default style attribute&lt;/h3&gt;
 * {@link android.R.attr#seekBarStyle android:seekBarStyle}
 *
 * @author Martin Albedinsky
 */
public class SeekBarWidget extends SeekBar implements Widget, FontWidget {

	/**
	 * Interface ===================================================================================
	 */

	/**
	 * Constants ===================================================================================
	 */

	/**
	 * Log TAG.
	 */
	// private static final String TAG = &quot;SeekBarWidget&quot;;

	/**
	 * Duration for how long will be discrete components previewed (visible) after this SeekBar has
	 * been attached to window.
	 */
	private static final long PREVIEW_DISCRETE_COMPONENTS_DURATION = 2000;

	/**
	 * Maximum level value that can be applied to this seek bar as progress value.
	 */
<span class="nc" id="L147">	private static int MAX_LEVEL = 10000;</span>

	/**
	 * Boolean flag indicating whether we can draw discrete interval at thumb position or not.
	 */
<span class="nc bnc" id="L152" title="All 2 branches missed.">	private static final boolean CAN_DRAW_DISCRETE_INTERVAL_OVER_THUMB = !UiConfig.MATERIALIZED;</span>

	/**
	 * Flag indicating whether this seek bar is discrete or not.
	 */
	private static final int PFLAG_DISCRETE = 0x00000001 &lt;&lt; 16;

	/**
	 * Flag indicating whether this seek bar should indicate to a user that it is discrete or not.
	 */
	private static final int PFLAG_DISCRETE_PREVIEW_ENABLED = 0x00000001 &lt;&lt; 17;

	/**
	 * Static members ==============================================================================
	 */

	/**
	 * Members =====================================================================================
	 */

	/**
	 * Graphics info for discrete indicator's text.
	 */
<span class="nc" id="L175">	private final DiscreteIndicatorTextInfo DISCRETE_INDICATOR_TEXT_INFO = new DiscreteIndicatorTextInfo();</span>

	/**
	 * Graphics info for discrete interval tick marks.
	 */
<span class="nc" id="L180">	private final DiscreteIntervalTickMarkInfo DISCRETE_INTERVAL_TICK_MARK_INFO = new DiscreteIntervalTickMarkInfo();</span>

	/**
	 * Decorator used to extend API of this widget by functionality otherwise not supported or not
	 * available due to current API level.
	 */
	private Decorator mDecorator;

	/**
	 * Drawable used to draw thumb of this seek bar.
	 */
	private Drawable mThumb;

	/**
	 * Drawable used to draw discrete indicator of this seek bar.
	 */
	private Drawable mDiscreteIndicator;

	/**
	 * Resource id of the {@link #mDiscreteIndicator} if indicator has been specified via
	 * {@link #setDiscreteIndicator(int)}.
	 */
	private int mDiscreteIndicatorRes;

	/**
	 * Drawable used to draw progress of this seek bar.
	 */
	private Drawable mProgressDrawable;

	/**
	 * Ratio used to compute count of tick marks of the discrete interval.
	 */
<span class="nc" id="L212">	private float mDiscreteIntervalRatio = 0.2f;</span>

	/**
	 * Dimension size of the discrete indicator's drawable.
	 */
	private int mDiscreteIndicatorWidth, mDiscreteIndicatorHeight;

	/**
	 * Current progress set to this seek bar by {@link #setProgress(int)}.
	 */
	private int mProgress;

	/**
	 * Animations interface used to hide implementation details of animations performed upon this view.
	 */
	private Animations mAnimations;

	/**
	 * Helper rect used when we need to obtain bounds or padding of some component.
	 */
	private Rect mRect;

	/**
	 * Ripple background drawable that has been detached in discrete mode if not {@code null}. Should
	 * be re-attached when discrete mode is disabled.
	 */
	private Drawable mRippleBackgroundDrawable;

	/**
	 * Constructors ================================================================================
	 */

	/**
	 * Same as {@link #SeekBarWidget(android.content.Context, android.util.AttributeSet)} without
	 * attributes.
	 */
	public SeekBarWidget(@NonNull Context context) {
<span class="nc" id="L249">		this(context, null);</span>
<span class="nc" id="L250">	}</span>

	/**
	 * Same as {@link #SeekBarWidget(android.content.Context, android.util.AttributeSet, int)} with
	 * {@link android.R.attr#seekBarStyle} as attribute for default style.
	 */
	public SeekBarWidget(@NonNull Context context, @Nullable AttributeSet attrs) {
<span class="nc" id="L257">		this(context, attrs, android.R.attr.seekBarStyle);</span>
<span class="nc" id="L258">	}</span>

	/**
	 * Same as {@link #SeekBarWidget(android.content.Context, android.util.AttributeSet, int, int)}
	 * with {@code 0} as default style.
	 */
	public SeekBarWidget(@NonNull Context context, @Nullable AttributeSet attrs, @AttrRes int defStyleAttr) {
<span class="nc" id="L265">		super(context, attrs, defStyleAttr);</span>
<span class="nc" id="L266">		this.init(context, attrs, defStyleAttr, 0);</span>
<span class="nc" id="L267">	}</span>

	/**
	 * Creates a new instance of SeekBarWidget for the given &lt;var&gt;context&lt;/var&gt;.
	 *
	 * @param context      Context in which will be the new view presented.
	 * @param attrs        Set of Xml attributes used to configure the new instance of this view.
	 * @param defStyleAttr An attribute which contains a reference to a default style resource for
	 *                     this view within a theme of the given context.
	 * @param defStyleRes  Resource id of the default style for the new view.
	 */
	@TargetApi(Build.VERSION_CODES.LOLLIPOP)
	public SeekBarWidget(@NonNull Context context, @Nullable AttributeSet attrs, @AttrRes int defStyleAttr, @StyleRes int defStyleRes) {
<span class="nc" id="L280">		super(context, attrs, defStyleAttr, defStyleRes);</span>
<span class="nc" id="L281">		this.init(context, attrs, defStyleAttr, defStyleRes);</span>
<span class="nc" id="L282">	}</span>

	/**
	 * Methods =====================================================================================
	 */

	/**
	 * Called from one of constructors of this view to perform its initialization.
	 * &lt;p&gt;
	 * Initialization is done via parsing of the specified &lt;var&gt;attrs&lt;/var&gt; set and obtaining for
	 * this view specific data from it that can be used to configure this new view instance. The
	 * specified &lt;var&gt;defStyleAttr&lt;/var&gt; and &lt;var&gt;defStyleRes&lt;/var&gt; are used to obtain default data
	 * from the current theme provided by the specified &lt;var&gt;context&lt;/var&gt;.
	 */
	@SuppressWarnings(&quot;ConstantConditions&quot;)
	private void init(Context context, AttributeSet attrs, int defStyleAttr, int defStyleRes) {
<span class="nc" id="L298">		this.ensureRect();</span>
<span class="nc" id="L299">		this.ensureDecorator();</span>
<span class="nc" id="L300">		mDecorator.processAttributes(context, attrs, defStyleAttr, defStyleRes);</span>
<span class="nc" id="L301">		this.mAnimations = Animations.get(this);</span>

<span class="nc" id="L303">		final TypedArray attributes = context.obtainStyledAttributes(attrs, R.styleable.Ui_SeekBar, defStyleAttr, defStyleRes);</span>
<span class="nc" id="L304">		final Rect indicatorTextPadding = new Rect();</span>
<span class="nc bnc" id="L305" title="All 2 branches missed.">		for (int i = 0; i &lt; attributes.getIndexCount(); i++) {</span>
<span class="nc" id="L306">			final int index = attributes.getIndex(i);</span>
<span class="nc bnc" id="L307" title="All 2 branches missed.">			if (index == R.styleable.Ui_SeekBar_android_enabled) {</span>
<span class="nc" id="L308">				setEnabled(attributes.getBoolean(index, true));</span>
<span class="nc bnc" id="L309" title="All 2 branches missed.">			} else if (index == R.styleable.Ui_SeekBar_uiDiscrete) {</span>
<span class="nc" id="L310">				setDiscrete(attributes.getBoolean(index, false));</span>
<span class="nc bnc" id="L311" title="All 2 branches missed.">			} else if (index == R.styleable.Ui_SeekBar_uiDiscretePreviewEnabled) {</span>
<span class="nc" id="L312">				setDiscretePreviewEnabled(attributes.getBoolean(index, true));</span>
<span class="nc bnc" id="L313" title="All 2 branches missed.">			} else if (index == R.styleable.Ui_SeekBar_uiDiscreteIntervalRatio) {</span>
<span class="nc" id="L314">				setDiscreteIntervalRatio(attributes.getFloat(index, mDiscreteIntervalRatio));</span>
<span class="nc bnc" id="L315" title="All 2 branches missed.">			} else if (index == R.styleable.Ui_SeekBar_uiDiscreteIndicator) {</span>
<span class="nc" id="L316">				setDiscreteIndicator(attributes.getResourceId(index, 0));</span>
<span class="nc bnc" id="L317" title="All 2 branches missed.">			} else if (index == R.styleable.Ui_SeekBar_uiDiscreteIndicatorTextAppearance) {</span>
<span class="nc" id="L318">				setDiscreteIndicatorTextAppearance(attributes.getResourceId(index, 0));</span>
<span class="nc bnc" id="L319" title="All 2 branches missed.">			} else if (index == R.styleable.Ui_SeekBar_uiDiscreteIndicatorTextGravity) {</span>
<span class="nc" id="L320">				setDiscreteIndicatorTextGravity(attributes.getInteger(index, DISCRETE_INDICATOR_TEXT_INFO.gravity));</span>
<span class="nc bnc" id="L321" title="All 2 branches missed.">			} else if (index == R.styleable.Ui_SeekBar_uiDiscreteIndicatorTextPaddingStart) {</span>
<span class="nc" id="L322">				indicatorTextPadding.left = attributes.getDimensionPixelSize(index, 0);</span>
<span class="nc bnc" id="L323" title="All 2 branches missed.">			} else if (index == R.styleable.Ui_SeekBar_uiDiscreteIndicatorTextPaddingTop) {</span>
<span class="nc" id="L324">				indicatorTextPadding.top = attributes.getDimensionPixelSize(index, 0);</span>
<span class="nc bnc" id="L325" title="All 2 branches missed.">			} else if (index == R.styleable.Ui_SeekBar_uiDiscreteIndicatorTextPaddingEnd) {</span>
<span class="nc" id="L326">				indicatorTextPadding.right = attributes.getDimensionPixelSize(index, 0);</span>
<span class="nc bnc" id="L327" title="All 2 branches missed.">			} else if (index == R.styleable.Ui_SeekBar_uiDiscreteIndicatorTextPaddingBottom) {</span>
<span class="nc" id="L328">				indicatorTextPadding.bottom = attributes.getDimensionPixelSize(index, 0);</span>
<span class="nc bnc" id="L329" title="All 2 branches missed.">			} else if (index == R.styleable.Ui_SeekBar_uiDiscreteIntervalTickMarkColor) {</span>
<span class="nc" id="L330">				setDiscreteIntervalTickMarkColor(attributes.getColorStateList(index));</span>
<span class="nc bnc" id="L331" title="All 2 branches missed.">			} else if (index == R.styleable.Ui_SeekBar_uiDiscreteIntervalTickMarkRadius) {</span>
<span class="nc" id="L332">				setDiscreteIntervalTickMarkRadius(attributes.getDimensionPixelSize(index, 0));</span>
			}
		}
<span class="nc" id="L335">		setDiscreteIndicatorTextPadding(</span>
				indicatorTextPadding.left,
				indicatorTextPadding.top,
				indicatorTextPadding.right,
				indicatorTextPadding.bottom
		);
<span class="nc" id="L341">		attributes.recycle();</span>
<span class="nc" id="L342">		this.applyProgressTints();</span>
<span class="nc" id="L343">		this.applyThumbTint();</span>
<span class="nc" id="L344">	}</span>

	/**
	 * Ensures that the {@link #mRect} is initialized.
	 */
	private void ensureRect() {
<span class="nc bnc" id="L350" title="All 2 branches missed.">		if (mRect == null) this.mRect = new Rect();</span>
<span class="nc" id="L351">	}</span>

	/**
	 * Ensures that the decorator for this view is initialized.
	 */
	private void ensureDecorator() {
<span class="nc bnc" id="L357" title="All 2 branches missed.">		if (mDecorator == null) this.mDecorator = new Decorator(this);</span>
<span class="nc" id="L358">	}</span>

	/**
	 */
	@Override
	@TargetApi(Build.VERSION_CODES.ICE_CREAM_SANDWICH)
	public void onInitializeAccessibilityEvent(@NonNull AccessibilityEvent event) {
<span class="nc" id="L365">		super.onInitializeAccessibilityEvent(event);</span>
<span class="nc" id="L366">		event.setClassName(SeekBarWidget.class.getName());</span>
<span class="nc" id="L367">	}</span>

	/**
	 */
	@Override
	@TargetApi(Build.VERSION_CODES.ICE_CREAM_SANDWICH)
	public void onInitializeAccessibilityNodeInfo(@NonNull AccessibilityNodeInfo info) {
<span class="nc" id="L374">		super.onInitializeAccessibilityNodeInfo(info);</span>
<span class="nc" id="L375">		info.setClassName(SeekBarWidget.class.getName());</span>
<span class="nc" id="L376">	}</span>

	/**
	 */
	@Override
	@SuppressWarnings(&quot;deprecation&quot;)
	public void setBackgroundDrawable(Drawable background) {
<span class="nc" id="L383">		super.setBackgroundDrawable(background);</span>
<span class="nc" id="L384">		this.ensureDecorator();</span>
<span class="nc" id="L385">		mDecorator.applyBackgroundTint();</span>
<span class="nc" id="L386">	}</span>

	/**
	 * &lt;b&gt;Note, that on pre {@link android.os.Build.VERSION_CODES#LOLLIPOP LOLLIPOP} Android versions
	 * this method will return an instance of {@link TintDrawable TintDrawable} if tint has been applied
	 * via {@link #setBackgroundTintList(ColorStateList)}.&lt;/b&gt;
	 * &lt;p&gt;
	 * The original wrapped drawable can be obtained via {@link TintDrawable#getDrawable()}.
	 */
	@Override
	public Drawable getBackground() {
<span class="nc" id="L397">		return super.getBackground();</span>
	}

	/**
	 */
	@Override
	public void setBackgroundTintList(@Nullable ColorStateList tint) {
<span class="nc" id="L404">		this.ensureDecorator();</span>
<span class="nc" id="L405">		mDecorator.setBackgroundTintList(tint);</span>
<span class="nc" id="L406">	}</span>

	/**
	 */
	@Nullable
	@Override
	public ColorStateList getBackgroundTintList() {
<span class="nc" id="L413">		this.ensureDecorator();</span>
<span class="nc" id="L414">		return mDecorator.getBackgroundTintList();</span>
	}

	/**
	 */
	@Override
	public void setBackgroundTintMode(@Nullable PorterDuff.Mode tintMode) {
<span class="nc" id="L421">		this.ensureDecorator();</span>
<span class="nc" id="L422">		mDecorator.setBackgroundTintMode(tintMode);</span>
<span class="nc" id="L423">	}</span>

	/**
	 */
	@Nullable
	@Override
	public PorterDuff.Mode getBackgroundTintMode() {
<span class="nc" id="L430">		this.ensureDecorator();</span>
<span class="nc" id="L431">		return mDecorator.getBackgroundTintMode();</span>
	}

	/**
	 */
	@Override
	@SuppressLint(&quot;NewApi&quot;)
	public boolean onTouchEvent(@NonNull MotionEvent event) {
<span class="nc" id="L439">		final boolean processed = super.onTouchEvent(event);</span>
<span class="nc" id="L440">		final int progress = getProgress();</span>
<span class="nc bnc" id="L441" title="All 2 branches missed.">		if (processed) {</span>
<span class="nc bnc" id="L442" title="All 2 branches missed.">			if (progress != mProgress) {</span>
<span class="nc" id="L443">				this.handleProgressChange(progress);</span>
			}
<span class="nc" id="L445">			this.ensureDecorator();</span>
<span class="nc bnc" id="L446" title="All 4 branches missed.">			switch (event.getAction() &amp; MotionEvent.ACTION_MASK) {</span>
				case MotionEvent.ACTION_DOWN:
<span class="nc bnc" id="L448" title="All 2 branches missed.">					if (mDecorator.hasPrivateFlag(PFLAG_DISCRETE_PREVIEW_ENABLED)) {</span>
<span class="nc" id="L449">						this.revealDiscreteComponents();</span>
					}
					break;
				case MotionEvent.ACTION_MOVE:
<span class="nc" id="L453">					final Drawable background = getBackground();</span>
<span class="nc bnc" id="L454" title="All 6 branches missed.">					if (background != null &amp;&amp; mAnimations.shouldDraw() &amp;&amp; UiConfig.MATERIALIZED) {</span>
						// Cancel the revealed circle around the thumb.
<span class="nc" id="L456">						background.setHotspotBounds(0, 0, 0, 0);</span>
					}
					break;
				case MotionEvent.ACTION_UP:
				case MotionEvent.ACTION_CANCEL:
<span class="nc bnc" id="L461" title="All 2 branches missed.">					if (mDecorator.hasPrivateFlag(PFLAG_DISCRETE_PREVIEW_ENABLED)) {</span>
<span class="nc" id="L462">						this.concealDiscreteComponents();</span>
					}
					break;
			}
		}
<span class="nc" id="L467">		return processed;</span>
	}

	/**
	 */
	@Override
	public void setPressed(boolean pressed) {
<span class="nc" id="L474">		final boolean isPressed = isPressed();</span>
<span class="nc" id="L475">		super.setPressed(pressed);</span>
<span class="nc bnc" id="L476" title="All 4 branches missed.">		if (!isPressed &amp;&amp; pressed) {</span>
<span class="nc" id="L477">			this.revealDiscreteComponents();</span>
<span class="nc bnc" id="L478" title="All 2 branches missed.">		} else if (isPressed) {</span>
<span class="nc" id="L479">			this.concealDiscreteComponents();</span>
		}
<span class="nc" id="L481">	}</span>

	/**
	 */
	@Override
	public void setVisibility(int visibility) {
<span class="nc" id="L487">		super.setVisibility(visibility);</span>
<span class="nc bnc" id="L488" title="All 4 branches missed.">		if (mDiscreteIndicator != null) mDiscreteIndicator.setVisible(visibility == VISIBLE, false);</span>
<span class="nc" id="L489">	}</span>

	/**
	 */
	@Override
	public synchronized void setProgress(int progress) {
<span class="nc" id="L495">		super.setProgress(progress);</span>
<span class="nc bnc" id="L496" title="All 2 branches missed.">		if (mProgress != progress) this.handleProgressChange(progress);</span>
<span class="nc" id="L497">	}</span>

	/**
	 * Handles change in the current progress. If discrete indicator is enabled for this seek bar,
	 * its position will be updated according to the specified progress value.
	 *
	 * @param progress The current progress of this SeekBarWidget.
	 */
	private void handleProgressChange(int progress) {
<span class="nc" id="L506">		this.mProgress = progress;</span>
<span class="nc" id="L507">		this.ensureDecorator();</span>
<span class="nc bnc" id="L508" title="All 4 branches missed.">		if (mDecorator.hasPrivateFlag(PFLAG_DISCRETE) &amp;&amp; mDiscreteIndicatorHeight &gt; 0) {</span>
<span class="nc" id="L509">			this.updateDiscreteIndicatorPosition(getWidth(), getHeight());</span>
<span class="nc bnc" id="L510" title="All 2 branches missed.">			if (!UiConfig.MATERIALIZED) {</span>
<span class="nc" id="L511">				this.updateThumbPosition();</span>
			}
			// todo: update current tint to gray color if progress is 0 otherwise to the specified tint
		}
<span class="nc" id="L515">		invalidate();</span>
<span class="nc" id="L516">	}</span>

	/**
	 * Sets a flag indicating whether this seek bar is &lt;b&gt;discrete&lt;/b&gt; or not.
	 * &lt;p&gt;
	 * SeekBarWidget in the discrete mode draws, above the progress track and the thumb, a discrete
	 * indicator to show to a user current progress value. Discrete indicator's drawable can be set
	 * via {@link #setDiscreteIndicator(android.graphics.drawable.Drawable)}.
	 *
	 * @param discrete {@code True} to enable discrete mode, {@code false} otherwise.
	 * @see R.attr#uiDiscrete ui:uiDiscrete
	 * @see #isDiscrete()
	 */
	public void setDiscrete(boolean discrete) {
<span class="nc bnc" id="L530" title="All 4 branches missed.">		if (discrete &amp;&amp; UiConfig.MATERIALIZED) {</span>
<span class="nc" id="L531">			final Drawable background = getBackground();</span>
<span class="nc bnc" id="L532" title="All 2 branches missed.">			if (background instanceof RippleDrawable) {</span>
				// This is a little bit harsh, but the RippleDrawable background is showing a ripple
				// in discrete mode in top left corner of this view's bounds which is kind of weird
				// behaviour.
<span class="nc" id="L536">				this.mRippleBackgroundDrawable = background;</span>
<span class="nc" id="L537">				setBackgroundDrawable(null);</span>
			}
<span class="nc bnc" id="L539" title="All 4 branches missed.">		} else if (!discrete &amp;&amp; mRippleBackgroundDrawable != null) {</span>
<span class="nc" id="L540">			setBackgroundDrawable(mRippleBackgroundDrawable);</span>
<span class="nc" id="L541">			this.mRippleBackgroundDrawable = null;</span>
		}
<span class="nc" id="L543">		this.ensureDecorator();</span>
<span class="nc bnc" id="L544" title="All 2 branches missed.">		if (mDecorator.hasPrivateFlag(PFLAG_DISCRETE) != discrete) {</span>
<span class="nc" id="L545">			mDecorator.updatePrivateFlags(PFLAG_DISCRETE, discrete);</span>
<span class="nc" id="L546">			this.updateThumb(mThumb);</span>
<span class="nc" id="L547">			this.updateDiscreteIndicator(mDiscreteIndicator);</span>
<span class="nc" id="L548">			requestLayout();</span>
		}
<span class="nc" id="L550">	}</span>

	/**
	 * Returns the flag indicating whether this seek bar is &lt;b&gt;discrete&lt;/b&gt; or not.
	 *
	 * @return {@code True} if the discrete mode is enabled, {@code false} otherwise.
	 * @see #setDiscrete(boolean)
	 */
	public boolean isDiscrete() {
<span class="nc" id="L559">		this.ensureDecorator();</span>
<span class="nc" id="L560">		return mDecorator.hasPrivateFlag(PFLAG_DISCRETE);</span>
	}

	/**
	 * Sets a flag indicating whether a preview of the discrete indicator is enabled or not. This
	 * feature is by default disabled.
	 * &lt;p&gt;
	 * When the preview is enabled, the discrete indicator will be showed whenever a user presses this
	 * seek bar widget and will be dismissed after a while if the user does not moves it.
	 * &lt;p&gt;
	 * If this feature is enabled, the indicator will be also previewed whenever is this seek bar
	 * attached to the window.
	 *
	 * @param enabled {@code True} to enabled discrete preview, {@code false} otherwise.
	 * @see R.attr#uiDiscretePreviewEnabled ui:uiDiscretePreviewEnabled
	 * @see #isDiscretePreviewEnabled()
	 */
	public void setDiscretePreviewEnabled(boolean enabled) {
<span class="nc" id="L578">		this.ensureDecorator();</span>
<span class="nc" id="L579">		mDecorator.updatePrivateFlags(PFLAG_DISCRETE_PREVIEW_ENABLED, enabled);</span>
<span class="nc" id="L580">	}</span>

	/**
	 * Returns the flag indicating whether a preview of the discrete indicator is enabled or not.
	 *
	 * @return {@code True} if discrete preview is enabled, {@code false} otherwise.
	 * @see #setDiscretePreviewEnabled(boolean)
	 */
	public boolean isDiscretePreviewEnabled() {
<span class="nc" id="L589">		this.ensureDecorator();</span>
<span class="nc" id="L590">		return mDecorator.hasPrivateFlag(PFLAG_DISCRETE_PREVIEW_ENABLED);</span>
	}

	/**
	 */
	@Override
	public void setThumb(Drawable thumb) {
<span class="nc" id="L597">		this.updateThumb(thumb);</span>
<span class="nc" id="L598">	}</span>

	/**
	 * Updates current thumb to the specified one. If this seek bar has discrete mode enabled
	 * ({@link #isDiscrete()}), the given thumb will be updated to scaleable drawable if it is not yet.
	 *
	 * @param thumb The new thumb to update to.
	 */
	private void updateThumb(Drawable thumb) {
<span class="nc" id="L607">		this.ensureDecorator();</span>
<span class="nc bnc" id="L608" title="All 2 branches missed.">		if (mDecorator.hasPrivateFlag(PFLAG_DISCRETE)) {</span>
<span class="nc" id="L609">			thumb = mAnimations.makeThumbScaleable(thumb, Gravity.CENTER);</span>
		}
<span class="nc bnc" id="L611" title="All 2 branches missed.">		if (mThumb != thumb) {</span>
<span class="nc" id="L612">			super.setThumb(mThumb = thumb);</span>
<span class="nc" id="L613">			this.applyThumbTint();</span>
		}
<span class="nc" id="L615">	}</span>

	/**
	 * &lt;b&gt;Note, that on pre {@link android.os.Build.VERSION_CODES#LOLLIPOP LOLLIPOP} Android versions
	 * this method will return an instance of {@link TintDrawable TintDrawable} if tint has been applied
	 * via {@link #setThumbTintList(ColorStateList)}.&lt;/b&gt;
	 * &lt;p&gt;
	 * The original wrapped drawable can be obtained via {@link TintDrawable#getDrawable()}.
	 */
	@Override
	public Drawable getThumb() {
<span class="nc bnc" id="L626" title="All 2 branches missed.">		if (mThumb instanceof ScaleDrawable) return ((ScaleDrawable) mThumb).getDrawable();</span>
<span class="nc" id="L627">		return mThumb;</span>
	}

	/**
	 * Applies current thumb tint from {@link Decorator#mTintInfo} to the current thumb drawable.
	 * &lt;p&gt;
	 * &lt;b&gt;Note&lt;/b&gt;, that for post {@link android.os.Build.VERSION_CODES#LOLLIPOP LOLLIPOP} this
	 * method does nothing.
	 */
	@SuppressWarnings(&quot;ConstantConditions&quot;)
	private void applyThumbTint() {
<span class="nc" id="L638">		this.ensureDecorator();</span>
<span class="nc bnc" id="L639" title="All 6 branches missed.">		if (UiConfig.MATERIALIZED || mThumb == null || !mDecorator.hasTintInfo()) {</span>
<span class="nc" id="L640">			return;</span>
		}
<span class="nc bnc" id="L642" title="All 2 branches missed.">		final Drawable thumb = mThumb instanceof ScaleDrawable ? ((ScaleDrawable) mThumb).getDrawable() : mThumb;</span>
<span class="nc" id="L643">		final SeekBarTintInfo tintInfo = mDecorator.getTintInfo();</span>
<span class="nc bnc" id="L644" title="All 4 branches missed.">		if ((!tintInfo.hasTintList &amp;&amp; !tintInfo.hasTintMode)) {</span>
<span class="nc" id="L645">			return;</span>
		}
<span class="nc" id="L647">		final boolean isTintDrawable = thumb instanceof TintDrawable;</span>
<span class="nc bnc" id="L648" title="All 2 branches missed.">		final TintDrawable tintDrawable = isTintDrawable ? (TintDrawable) thumb : new TintDrawable(thumb);</span>
<span class="nc bnc" id="L649" title="All 2 branches missed.">		if (tintInfo.hasTintList) {</span>
<span class="nc" id="L650">			tintDrawable.setTintList(tintInfo.tintList);</span>
		}
<span class="nc bnc" id="L652" title="All 2 branches missed.">		if (tintInfo.hasTintMode) {</span>
<span class="nc" id="L653">			tintDrawable.setTintMode(tintInfo.tintMode);</span>
		}
<span class="nc bnc" id="L655" title="All 2 branches missed.">		if (tintDrawable.isStateful()) {</span>
<span class="nc" id="L656">			tintDrawable.setState(getDrawableState());</span>
		}
<span class="nc bnc" id="L658" title="All 2 branches missed.">		if (isTintDrawable) {</span>
<span class="nc" id="L659">			return;</span>
		}
<span class="nc" id="L661">		final int thumbOffset = getThumbOffset();</span>
<span class="nc bnc" id="L662" title="All 2 branches missed.">		this.mThumb = mDecorator.hasPrivateFlag(PFLAG_DISCRETE) ?</span>
<span class="nc" id="L663">				mAnimations.makeThumbScaleable(tintDrawable, Gravity.CENTER) :</span>
				tintDrawable;

<span class="nc" id="L666">		super.setThumb(mThumb);</span>
<span class="nc" id="L667">		tintDrawable.attachCallback();</span>
<span class="nc" id="L668">		setThumbOffset(thumbOffset);</span>
<span class="nc" id="L669">	}</span>

	/**
	 */
	@Override
	@SuppressLint(&quot;NewApi&quot;)
	public void setThumbTintList(@Nullable ColorStateList tint) {
<span class="nc bnc" id="L676" title="All 2 branches missed.">		if (UiConfig.MATERIALIZED) {</span>
<span class="nc" id="L677">			super.setThumbTintList(tint);</span>
<span class="nc" id="L678">			return;</span>
		}
<span class="nc" id="L680">		this.ensureDecorator();</span>
<span class="nc" id="L681">		final SeekBarTintInfo tintInfo = mDecorator.getTintInfo();</span>
<span class="nc" id="L682">		tintInfo.tintList = tint;</span>
<span class="nc" id="L683">		tintInfo.hasTintList = true;</span>
<span class="nc" id="L684">		this.applyThumbTint();</span>
<span class="nc" id="L685">	}</span>

	/**
	 */
	@Nullable
	@Override
	@SuppressLint(&quot;NewApi&quot;)
	public ColorStateList getThumbTintList() {
<span class="nc bnc" id="L693" title="All 2 branches missed.">		if (UiConfig.MATERIALIZED) {</span>
<span class="nc" id="L694">			return super.getThumbTintList();</span>
		}
<span class="nc" id="L696">		this.ensureDecorator();</span>
<span class="nc bnc" id="L697" title="All 2 branches missed.">		return mDecorator.hasTintInfo() ? mDecorator.getTintInfo().tintList : null;</span>
	}

	/**
	 */
	@Override
	@SuppressLint(&quot;NewApi&quot;)
	public void setThumbTintMode(@Nullable PorterDuff.Mode tintMode) {
<span class="nc bnc" id="L705" title="All 2 branches missed.">		if (UiConfig.MATERIALIZED) {</span>
<span class="nc" id="L706">			super.setThumbTintMode(tintMode);</span>
<span class="nc" id="L707">			return;</span>
		}
<span class="nc" id="L709">		this.ensureDecorator();</span>
<span class="nc" id="L710">		final SeekBarTintInfo tintInfo = mDecorator.getTintInfo();</span>
<span class="nc" id="L711">		tintInfo.tintMode = tintMode;</span>
<span class="nc" id="L712">		tintInfo.hasTintMode = true;</span>
<span class="nc" id="L713">		this.applyThumbTint();</span>
<span class="nc" id="L714">	}</span>

	/**
	 */
	@Nullable
	@Override
	@SuppressLint(&quot;NewApi&quot;)
	public PorterDuff.Mode getThumbTintMode() {
<span class="nc bnc" id="L722" title="All 2 branches missed.">		if (UiConfig.MATERIALIZED) {</span>
<span class="nc" id="L723">			return super.getThumbTintMode();</span>
		}
<span class="nc" id="L725">		this.ensureDecorator();</span>
<span class="nc bnc" id="L726" title="All 2 branches missed.">		return mDecorator.hasTintInfo() ? mDecorator.getTintInfo().tintMode : null;</span>
	}

	/**
	 */
	@Override
	public void setProgressDrawable(Drawable drawable) {
<span class="nc" id="L733">		super.setProgressDrawable(mProgressDrawable = drawable);</span>
<span class="nc" id="L734">		this.applyProgressTints();</span>
<span class="nc" id="L735">	}</span>

	/**
	 * &lt;b&gt;Note, that on pre {@link android.os.Build.VERSION_CODES#LOLLIPOP LOLLIPOP} Android versions
	 * this method will return an instance of {@link TintLayerDrawable TintLayerDrawable} if tint has
	 * been applied to one of progress layers via {@link #setProgressTintList(ColorStateList)} or
	 * {@link #setSecondaryProgressTintList(ColorStateList)} or {@link #setProgressBackgroundTintList(ColorStateList)}.&lt;/b&gt;
	 * &lt;p&gt;
	 * The original wrapped drawable can be obtained via {@link TintDrawable#getDrawable()}.
	 */
	@Override
	public Drawable getProgressDrawable() {
<span class="nc" id="L747">		return super.getProgressDrawable();</span>
	}

	/**
	 * Applies current progress tints from {@link Decorator#mTintInfo} to the progress drawable (its
	 * layers respectively if it is instance of LayerDrawable or to the whole drawable if it is just
	 * simple drawable).
	 * &lt;p&gt;
	 * &lt;b&gt;Note&lt;/b&gt;, that for post {@link android.os.Build.VERSION_CODES#LOLLIPOP LOLLIPOP} this method
	 * does nothing.
	 */
	private void applyProgressTints() {
<span class="nc bnc" id="L759" title="All 2 branches missed.">		if (UiConfig.MATERIALIZED) {</span>
<span class="nc" id="L760">			return;</span>
		}
<span class="nc" id="L762">		this.ensureDecorator();</span>
<span class="nc bnc" id="L763" title="All 4 branches missed.">		if (mProgressDrawable == null || !mDecorator.hasTintInfo()) {</span>
<span class="nc" id="L764">			return;</span>
		}
<span class="nc" id="L766">		final SeekBarTintInfo tintInfo = mDecorator.getTintInfo();</span>
<span class="nc bnc" id="L767" title="All 12 branches missed.">		if (!tintInfo.hasPrimaryProgressTintList &amp;&amp; !tintInfo.hasPrimaryProgressTintMode &amp;&amp;</span>
				!tintInfo.hasSecondaryProgressTintList &amp;&amp; !tintInfo.hasSecondaryProgressTintMode &amp;&amp;
				!tintInfo.hasProgressBackgroundTintList &amp;&amp; !tintInfo.hasProgressBackgroundTintMode) {
<span class="nc" id="L770">			return;</span>
		}
<span class="nc bnc" id="L772" title="All 2 branches missed.">		if (mProgressDrawable instanceof TintLayerDrawable) {</span>
<span class="nc" id="L773">			final TintLayerDrawable tintDrawable = (TintLayerDrawable) mProgressDrawable;</span>
<span class="nc bnc" id="L774" title="All 2 branches missed.">			if (tintInfo.hasProgressBackgroundTintList) {</span>
<span class="nc" id="L775">				tintDrawable.setTintList(tintInfo.progressBackgroundTintList, android.R.id.background);</span>
			}
<span class="nc bnc" id="L777" title="All 2 branches missed.">			if (tintInfo.hasProgressBackgroundTintMode) {</span>
<span class="nc" id="L778">				tintDrawable.setTintMode(tintInfo.progressBackgroundTintMode, android.R.id.background);</span>
			}
<span class="nc bnc" id="L780" title="All 2 branches missed.">			if (tintInfo.hasSecondaryProgressTintList) {</span>
<span class="nc" id="L781">				tintDrawable.setTintList(tintInfo.secondaryProgressTintList, android.R.id.secondaryProgress);</span>
			}
<span class="nc bnc" id="L783" title="All 2 branches missed.">			if (tintInfo.hasSecondaryProgressTintMode) {</span>
<span class="nc" id="L784">				tintDrawable.setTintMode(tintInfo.secondaryProgressTintMode, android.R.id.secondaryProgress);</span>
			}
<span class="nc bnc" id="L786" title="All 2 branches missed.">			if (tintInfo.hasPrimaryProgressTintList) {</span>
<span class="nc" id="L787">				tintDrawable.setTintList(tintInfo.primaryProgressTintList, android.R.id.progress);</span>
			}
<span class="nc bnc" id="L789" title="All 2 branches missed.">			if (tintInfo.hasPrimaryProgressTintMode) {</span>
<span class="nc" id="L790">				tintDrawable.setTintMode(tintInfo.primaryProgressTintMode, android.R.id.progress);</span>
			}
<span class="nc bnc" id="L792" title="All 2 branches missed.">			if (mProgressDrawable.isStateful()) {</span>
<span class="nc" id="L793">				mProgressDrawable.setState(getDrawableState());</span>
			}
<span class="nc" id="L795">			return;</span>
<span class="nc bnc" id="L796" title="All 2 branches missed.">		} else if (mProgressDrawable instanceof TintDrawable) {</span>
<span class="nc" id="L797">			final TintDrawable tintDrawable = (TintDrawable) mProgressDrawable;</span>
<span class="nc bnc" id="L798" title="All 2 branches missed.">			if (tintInfo.hasPrimaryProgressTintList) {</span>
<span class="nc" id="L799">				tintDrawable.setTintList(tintInfo.primaryProgressTintList);</span>
			}
<span class="nc bnc" id="L801" title="All 2 branches missed.">			if (tintInfo.hasPrimaryProgressTintMode) {</span>
<span class="nc" id="L802">				tintDrawable.setTintMode(tintInfo.primaryProgressTintMode);</span>
			}
<span class="nc bnc" id="L804" title="All 2 branches missed.">			if (mProgressDrawable.isStateful()) {</span>
<span class="nc" id="L805">				mProgressDrawable.setState(getDrawableState());</span>
			}
<span class="nc" id="L807">			return;</span>
		}
<span class="nc bnc" id="L809" title="All 2 branches missed.">		if (mProgressDrawable instanceof LayerDrawable) {</span>
<span class="nc" id="L810">			final TintLayerDrawable tintDrawable = new TintLayerDrawable((LayerDrawable) mProgressDrawable);</span>
<span class="nc" id="L811">			this.mProgressDrawable = tintDrawable;</span>
<span class="nc" id="L812">			this.applyProgressTint();</span>
<span class="nc" id="L813">			this.applySecondaryProgressTint();</span>
<span class="nc" id="L814">			this.applyProgressBackgroundTint();</span>
<span class="nc bnc" id="L815" title="All 2 branches missed.">			if (mProgressDrawable.isStateful()) {</span>
<span class="nc" id="L816">				mProgressDrawable.setState(getDrawableState());</span>
			}
<span class="nc" id="L818">			super.setProgressDrawable(mProgressDrawable);</span>
<span class="nc" id="L819">			tintDrawable.attachCallback();</span>
<span class="nc" id="L820">			tintDrawable.setLevel((int) (getProgress() / (float) getMax() * MAX_LEVEL));</span>
<span class="nc" id="L821">		} else {</span>
<span class="nc" id="L822">			final TintDrawable tintDrawable = new TintDrawable(mProgressDrawable);</span>
<span class="nc" id="L823">			this.mProgressDrawable = tintDrawable;</span>
<span class="nc" id="L824">			this.applySimpleProgressTint();</span>
<span class="nc" id="L825">			super.setProgressDrawable(mProgressDrawable);</span>
<span class="nc" id="L826">			tintDrawable.attachCallback();</span>
<span class="nc" id="L827">			tintDrawable.setLevel((int) (getProgress() / (float) getMax() * MAX_LEVEL));</span>
		}
<span class="nc" id="L829">	}</span>

	/**
	 * Applies current first valid tint from {@link Decorator#mTintInfo} to the progress drawable as
	 * whole.
	 *
	 * @see #applyProgressTints()
	 */
	private void applySimpleProgressTint() {
<span class="nc bnc" id="L838" title="All 2 branches missed.">		if (mProgressDrawable instanceof TintDrawable) {</span>
<span class="nc" id="L839">			final SeekBarTintInfo tintInfo = mDecorator.getTintInfo();</span>
<span class="nc" id="L840">			final TintDrawable tintDrawable = (TintDrawable) mProgressDrawable;</span>
			boolean hasTintList, hasTintMode;
<span class="nc" id="L842">			hasTintList = hasTintMode = false;</span>
<span class="nc" id="L843">			ColorStateList tintList = null;</span>
<span class="nc" id="L844">			PorterDuff.Mode tintMode = null;</span>
<span class="nc bnc" id="L845" title="All 4 branches missed.">			if (tintInfo.hasPrimaryProgressTintList || tintInfo.hasPrimaryProgressTintMode) {</span>
<span class="nc" id="L846">				hasTintList = tintInfo.hasPrimaryProgressTintList;</span>
<span class="nc" id="L847">				tintList = tintInfo.primaryProgressTintList;</span>
<span class="nc" id="L848">				hasTintMode = tintInfo.hasPrimaryProgressTintMode;</span>
<span class="nc" id="L849">				tintMode = tintInfo.primaryProgressTintMode;</span>
<span class="nc bnc" id="L850" title="All 4 branches missed.">			} else if (tintInfo.hasSecondaryProgressTintList || tintInfo.hasSecondaryProgressTintMode) {</span>
<span class="nc" id="L851">				hasTintList = tintInfo.hasSecondaryProgressTintList;</span>
<span class="nc" id="L852">				tintList = tintInfo.secondaryProgressTintList;</span>
<span class="nc" id="L853">				hasTintMode = tintInfo.hasSecondaryProgressTintMode;</span>
<span class="nc" id="L854">				tintMode = tintInfo.secondaryProgressTintMode;</span>
<span class="nc bnc" id="L855" title="All 4 branches missed.">			} else if (tintInfo.hasProgressBackgroundTintList || tintInfo.hasProgressBackgroundTintMode) {</span>
<span class="nc" id="L856">				hasTintList = tintInfo.hasProgressBackgroundTintList;</span>
<span class="nc" id="L857">				tintList = tintInfo.progressBackgroundTintList;</span>
<span class="nc" id="L858">				hasTintMode = tintInfo.hasProgressBackgroundTintMode;</span>
<span class="nc" id="L859">				tintMode = tintInfo.progressBackgroundTintMode;</span>
			}
<span class="nc bnc" id="L861" title="All 2 branches missed.">			if (hasTintList) tintDrawable.setTintList(tintList);</span>
<span class="nc bnc" id="L862" title="All 2 branches missed.">			if (hasTintMode) tintDrawable.setTintMode(tintMode);</span>
<span class="nc bnc" id="L863" title="All 2 branches missed.">			if (mProgressDrawable.isStateful()) {</span>
<span class="nc" id="L864">				mProgressDrawable.setState(getDrawableState());</span>
			}
		}
<span class="nc" id="L867">	}</span>

	/**
	 * Applies current primary progress tint from {@link Decorator#mTintInfo} to the progress layer
	 * of the progress drawable.
	 *
	 * @see #applyProgressTints()
	 */
	private void applyProgressTint() {
<span class="nc bnc" id="L876" title="All 4 branches missed.">		if (!(mProgressDrawable instanceof TintLayerDrawable) || !mDecorator.hasTintInfo()) return;</span>
<span class="nc" id="L877">		final SeekBarTintInfo tintInfo = mDecorator.getTintInfo();</span>
<span class="nc bnc" id="L878" title="All 4 branches missed.">		if (tintInfo.hasPrimaryProgressTintList || tintInfo.hasPrimaryProgressTintMode) {</span>
<span class="nc" id="L879">			final TintLayerDrawable tintDrawable = (TintLayerDrawable) mProgressDrawable;</span>
<span class="nc bnc" id="L880" title="All 2 branches missed.">			if (tintInfo.hasPrimaryProgressTintList) {</span>
<span class="nc" id="L881">				tintDrawable.setTintList(tintInfo.primaryProgressTintList, android.R.id.progress);</span>
			}
<span class="nc bnc" id="L883" title="All 2 branches missed.">			if (tintInfo.hasPrimaryProgressTintMode) {</span>
<span class="nc" id="L884">				tintDrawable.setTintMode(tintInfo.primaryProgressTintMode, android.R.id.progress);</span>
			}
		}
<span class="nc" id="L887">	}</span>

	/**
	 * Applies current secondary progress tint from {@link Decorator#mTintInfo} to the secondary
	 * progress layer of the progress drawable.
	 *
	 * @see #applyProgressTints()
	 */
	private void applySecondaryProgressTint() {
<span class="nc bnc" id="L896" title="All 4 branches missed.">		if (!(mProgressDrawable instanceof TintLayerDrawable) || !mDecorator.hasTintInfo()) return;</span>
<span class="nc" id="L897">		final SeekBarTintInfo tintInfo = mDecorator.getTintInfo();</span>
<span class="nc bnc" id="L898" title="All 4 branches missed.">		if (tintInfo.hasSecondaryProgressTintList || tintInfo.hasSecondaryProgressTintMode) {</span>
<span class="nc" id="L899">			final TintLayerDrawable tintDrawable = (TintLayerDrawable) mProgressDrawable;</span>
<span class="nc bnc" id="L900" title="All 2 branches missed.">			if (tintInfo.hasSecondaryProgressTintList) {</span>
<span class="nc" id="L901">				tintDrawable.setTintList(tintInfo.secondaryProgressTintList, android.R.id.secondaryProgress);</span>
			}
<span class="nc bnc" id="L903" title="All 2 branches missed.">			if (tintInfo.hasSecondaryProgressTintMode) {</span>
<span class="nc" id="L904">				tintDrawable.setTintMode(tintInfo.secondaryProgressTintMode, android.R.id.secondaryProgress);</span>
			}
		}
<span class="nc" id="L907">	}</span>

	/**
	 * Applies current progress background tint from {@link Decorator#mTintInfo} to the background
	 * layer of the progress drawable.
	 *
	 * @see #applyProgressTints()
	 */
	private void applyProgressBackgroundTint() {
<span class="nc bnc" id="L916" title="All 4 branches missed.">		if (!(mProgressDrawable instanceof TintLayerDrawable) || !mDecorator.hasTintInfo()) return;</span>
<span class="nc" id="L917">		final SeekBarTintInfo tintInfo = mDecorator.getTintInfo();</span>
<span class="nc bnc" id="L918" title="All 4 branches missed.">		if (tintInfo.hasProgressBackgroundTintList || tintInfo.hasProgressBackgroundTintMode) {</span>
<span class="nc" id="L919">			final TintLayerDrawable tintDrawable = (TintLayerDrawable) mProgressDrawable;</span>
<span class="nc bnc" id="L920" title="All 2 branches missed.">			if (tintInfo.hasProgressBackgroundTintList) {</span>
<span class="nc" id="L921">				tintDrawable.setTintList(tintInfo.progressBackgroundTintList, android.R.id.background);</span>
			}
<span class="nc bnc" id="L923" title="All 2 branches missed.">			if (tintInfo.hasProgressBackgroundTintMode) {</span>
<span class="nc" id="L924">				tintDrawable.setTintMode(tintInfo.progressBackgroundTintMode, android.R.id.background);</span>
			}
		}
<span class="nc" id="L927">	}</span>

	/**
	 */
	@Override
	@SuppressLint(&quot;NewApi&quot;)
	public void setProgressTintList(@Nullable ColorStateList tint) {
<span class="nc bnc" id="L934" title="All 2 branches missed.">		if (UiConfig.MATERIALIZED) {</span>
<span class="nc" id="L935">			super.setProgressTintList(tint);</span>
<span class="nc" id="L936">			return;</span>
		}
<span class="nc" id="L938">		this.ensureDecorator();</span>
<span class="nc" id="L939">		final SeekBarTintInfo tintInfo = mDecorator.getTintInfo();</span>
<span class="nc" id="L940">		tintInfo.primaryProgressTintList = tint;</span>
<span class="nc" id="L941">		tintInfo.hasPrimaryProgressTintList = true;</span>
<span class="nc" id="L942">		this.applyProgressTints();</span>
<span class="nc" id="L943">	}</span>

	/**
	 */
	@Nullable
	@Override
	@SuppressLint(&quot;NewApi&quot;)
	public ColorStateList getProgressTintList() {
<span class="nc bnc" id="L951" title="All 2 branches missed.">		if (UiConfig.MATERIALIZED) {</span>
<span class="nc" id="L952">			return super.getProgressTintList();</span>
		}
<span class="nc" id="L954">		this.ensureDecorator();</span>
<span class="nc bnc" id="L955" title="All 2 branches missed.">		return mDecorator.hasTintInfo() ? mDecorator.getTintInfo().primaryProgressTintList : null;</span>
	}

	/**
	 */
	@Override
	@SuppressLint(&quot;NewApi&quot;)
	public void setProgressTintMode(@Nullable PorterDuff.Mode tintMode) {
<span class="nc bnc" id="L963" title="All 2 branches missed.">		if (UiConfig.MATERIALIZED) {</span>
<span class="nc" id="L964">			super.setProgressTintMode(tintMode);</span>
<span class="nc" id="L965">			return;</span>
		}
<span class="nc" id="L967">		this.ensureDecorator();</span>
<span class="nc" id="L968">		final SeekBarTintInfo tintInfo = mDecorator.getTintInfo();</span>
<span class="nc" id="L969">		tintInfo.primaryProgressTintMode = tintMode;</span>
<span class="nc" id="L970">		tintInfo.hasPrimaryProgressTintMode = true;</span>
<span class="nc" id="L971">		this.applyProgressTints();</span>
<span class="nc" id="L972">	}</span>

	/**
	 */
	@Nullable
	@Override
	@SuppressLint(&quot;NewApi&quot;)
	public PorterDuff.Mode getProgressTintMode() {
<span class="nc bnc" id="L980" title="All 2 branches missed.">		if (UiConfig.MATERIALIZED) {</span>
<span class="nc" id="L981">			return super.getProgressTintMode();</span>
		}
<span class="nc" id="L983">		this.ensureDecorator();</span>
<span class="nc bnc" id="L984" title="All 2 branches missed.">		return mDecorator.hasTintInfo() ? mDecorator.getTintInfo().primaryProgressTintMode : null;</span>
	}

	/**
	 */
	@Override
	public void setSecondaryProgressTintList(ColorStateList tint) {
<span class="nc bnc" id="L991" title="All 2 branches missed.">		if (UiConfig.MATERIALIZED) {</span>
<span class="nc" id="L992">			super.setSecondaryProgressTintList(tint);</span>
<span class="nc" id="L993">			return;</span>
		}
<span class="nc" id="L995">		this.ensureDecorator();</span>
<span class="nc" id="L996">		final SeekBarTintInfo tintInfo = mDecorator.getTintInfo();</span>
<span class="nc" id="L997">		tintInfo.secondaryProgressTintList = tint;</span>
<span class="nc" id="L998">		tintInfo.hasSecondaryProgressTintList = true;</span>
<span class="nc bnc" id="L999" title="All 2 branches missed.">		if (mProgressDrawable instanceof TintLayerDrawable) {</span>
<span class="nc" id="L1000">			this.applySecondaryProgressTint();</span>
		} else {
<span class="nc" id="L1002">			this.applyProgressTints();</span>
		}
<span class="nc" id="L1004">	}</span>

	/**
	 */
	@Nullable
	@Override
	public ColorStateList getSecondaryProgressTintList() {
<span class="nc bnc" id="L1011" title="All 2 branches missed.">		if (UiConfig.MATERIALIZED) {</span>
<span class="nc" id="L1012">			return super.getSecondaryProgressTintList();</span>
		}
<span class="nc" id="L1014">		this.ensureDecorator();</span>
<span class="nc bnc" id="L1015" title="All 2 branches missed.">		return mDecorator.hasTintInfo() ? mDecorator.getTintInfo().secondaryProgressTintList : null;</span>
	}

	/**
	 */
	@Override
	public void setSecondaryProgressTintMode(PorterDuff.Mode tintMode) {
<span class="nc bnc" id="L1022" title="All 2 branches missed.">		if (UiConfig.MATERIALIZED) {</span>
<span class="nc" id="L1023">			super.setSecondaryProgressTintMode(tintMode);</span>
<span class="nc" id="L1024">			return;</span>
		}
<span class="nc" id="L1026">		this.ensureDecorator();</span>
<span class="nc" id="L1027">		final SeekBarTintInfo tintInfo = mDecorator.getTintInfo();</span>
<span class="nc" id="L1028">		tintInfo.secondaryProgressTintMode = tintMode;</span>
<span class="nc" id="L1029">		tintInfo.hasSecondaryProgressTintMode = true;</span>
<span class="nc bnc" id="L1030" title="All 2 branches missed.">		if (mProgressDrawable instanceof TintLayerDrawable) {</span>
<span class="nc" id="L1031">			this.applySecondaryProgressTint();</span>
		} else {
<span class="nc" id="L1033">			this.applyProgressTints();</span>
		}
<span class="nc" id="L1035">	}</span>

	/**
	 */
	@Nullable
	@Override
	public PorterDuff.Mode getSecondaryProgressTintMode() {
<span class="nc bnc" id="L1042" title="All 2 branches missed.">		if (UiConfig.MATERIALIZED) {</span>
<span class="nc" id="L1043">			return super.getSecondaryProgressTintMode();</span>
		}
<span class="nc" id="L1045">		this.ensureDecorator();</span>
<span class="nc bnc" id="L1046" title="All 2 branches missed.">		return mDecorator.hasTintInfo() ? mDecorator.getTintInfo().secondaryProgressTintMode : null;</span>
	}

	/**
	 */
	@Override
	public void setProgressBackgroundTintList(ColorStateList tint) {
<span class="nc bnc" id="L1053" title="All 2 branches missed.">		if (UiConfig.MATERIALIZED) {</span>
<span class="nc" id="L1054">			super.setProgressBackgroundTintList(tint);</span>
<span class="nc" id="L1055">			return;</span>
		}
<span class="nc" id="L1057">		this.ensureDecorator();</span>
<span class="nc" id="L1058">		final SeekBarTintInfo tintInfo = mDecorator.getTintInfo();</span>
<span class="nc" id="L1059">		tintInfo.progressBackgroundTintList = tint;</span>
<span class="nc" id="L1060">		tintInfo.hasProgressBackgroundTintList = true;</span>
<span class="nc bnc" id="L1061" title="All 2 branches missed.">		if (mProgressDrawable instanceof TintLayerDrawable) {</span>
<span class="nc" id="L1062">			this.applyProgressBackgroundTint();</span>
		} else {
<span class="nc" id="L1064">			this.applyProgressTints();</span>
		}
<span class="nc" id="L1066">	}</span>

	/**
	 */
	@Nullable
	@Override
	public ColorStateList getProgressBackgroundTintList() {
<span class="nc bnc" id="L1073" title="All 2 branches missed.">		if (UiConfig.MATERIALIZED) {</span>
<span class="nc" id="L1074">			return super.getProgressBackgroundTintList();</span>
		}
<span class="nc" id="L1076">		this.ensureDecorator();</span>
<span class="nc bnc" id="L1077" title="All 2 branches missed.">		return mDecorator.hasTintInfo() ? mDecorator.getTintInfo().progressBackgroundTintList : null;</span>
	}

	/**
	 */
	@Override
	public void setProgressBackgroundTintMode(PorterDuff.Mode tintMode) {
<span class="nc bnc" id="L1084" title="All 2 branches missed.">		if (UiConfig.MATERIALIZED) {</span>
<span class="nc" id="L1085">			super.setProgressBackgroundTintMode(tintMode);</span>
<span class="nc" id="L1086">			return;</span>
		}
<span class="nc" id="L1088">		this.ensureDecorator();</span>
<span class="nc" id="L1089">		final SeekBarTintInfo tintInfo = mDecorator.getTintInfo();</span>
<span class="nc" id="L1090">		tintInfo.progressBackgroundTintMode = tintMode;</span>
<span class="nc" id="L1091">		tintInfo.hasProgressBackgroundTintMode = true;</span>
<span class="nc bnc" id="L1092" title="All 2 branches missed.">		if (mProgressDrawable instanceof TintLayerDrawable) {</span>
<span class="nc" id="L1093">			this.applyProgressBackgroundTint();</span>
		} else {
<span class="nc" id="L1095">			this.applyProgressTints();</span>
		}
<span class="nc" id="L1097">	}</span>

	/**
	 */
	@Nullable
	@Override
	public PorterDuff.Mode getProgressBackgroundTintMode() {
<span class="nc bnc" id="L1104" title="All 2 branches missed.">		if (UiConfig.MATERIALIZED) {</span>
<span class="nc" id="L1105">			return super.getProgressBackgroundTintMode();</span>
		}
<span class="nc" id="L1107">		this.ensureDecorator();</span>
<span class="nc bnc" id="L1108" title="All 2 branches missed.">		return mDecorator.hasTintInfo() ? mDecorator.getTintInfo().progressBackgroundTintMode : null;</span>
	}

	/**
	 * Sets a ratio in which should be drawn tick marks of discrete interval of this seek bar if
	 * the discrete mode is enabled by {@link #setDiscrete(boolean)}.
	 * &lt;p&gt;
	 * By default is this ratio set to {@code 0.2f} so there will be drawn 6 tick marks.
	 * &lt;p&gt;
	 * &lt;b&gt;Note&lt;/b&gt;, that discrete interval has only informational character and do not force a user
	 * to pick exactly value represented by one of interval's tick marks.
	 *
	 * @param ratio The desired interval ratio from the range {@code [0.0, 1.0]}.
	 * @see R.attr#uiDiscreteIntervalRatio ui:uiDiscreteIntervalRatio
	 * @see #getDiscreteIntervalRatio()
	 */
	public void setDiscreteIntervalRatio(@FloatRange(from = 0, to = 1) float ratio) {
<span class="nc bnc" id="L1125" title="All 2 branches missed.">		if (mDiscreteIntervalRatio != ratio) {</span>
<span class="nc" id="L1126">			this.mDiscreteIntervalRatio = ratio;</span>
<span class="nc bnc" id="L1127" title="All 2 branches missed.">			if (mProgressDrawable != null) {</span>
<span class="nc" id="L1128">				invalidate(mProgressDrawable.getBounds());</span>
			}
		}
<span class="nc" id="L1131">	}</span>

	/**
	 * Returns the ratio in which are drawn tick marks of discrete interval whenever is the discrete
	 * mode enabled.
	 *
	 * @return Ratio for discrete interval from the range {@code [0.0, 1.0]}.
	 * @see #setDiscreteIntervalRatio(float)
	 * @see #isDiscrete()
	 */
	@FloatRange(from = 0, to = 1)
	public float getDiscreteIntervalRatio() {
<span class="nc" id="L1143">		return mDiscreteIntervalRatio;</span>
	}

	/**
	 * Sets a radius for the tick mark of a discrete interval. The discrete interval are drawn whenever
	 * the discrete mode for this seek bar is enabled via {@link #setDiscrete(boolean)}.
	 *
	 * @param radius The desired radius for tick mark.
	 * @see R.attr#uiDiscreteIntervalTickMarkRadius ui:uiDiscreteIntervalTickMarkRadius
	 * @see #getDiscreteIntervalTickMarkRadius()
	 */
	public void setDiscreteIntervalTickMarkRadius(@FloatRange(from = 0) float radius) {
<span class="nc bnc" id="L1155" title="All 2 branches missed.">		if (DISCRETE_INTERVAL_TICK_MARK_INFO.radius != radius) {</span>
<span class="nc" id="L1156">			DISCRETE_INTERVAL_TICK_MARK_INFO.radius = Math.max(0, radius);</span>
<span class="nc" id="L1157">			this.invalidateDiscreteIntervalsArea();</span>
		}
<span class="nc" id="L1159">	}</span>

	/**
	 * Returns the radius of the tick mark of a discrete interval.
	 *
	 * @return Tick mark radius.
	 * @see #setDiscreteIntervalTickMarkRadius(float)
	 */
	@FloatRange(from = 0)
	public float getDiscreteIntervalTickMarkRadius() {
<span class="nc" id="L1169">		return DISCRETE_INTERVAL_TICK_MARK_INFO.radius;</span>
	}

	/**
	 * Sets a single color used to draw the discrete interval's tick mark.
	 *
	 * @param color The desired color.
	 * @see R.attr#uiDiscreteIntervalTickMarkColor ui:uiDiscreteIntervalTickMarkColor
	 */
	public void setDiscreteIntervalTickMarkColor(@ColorInt int color) {
<span class="nc" id="L1179">		setDiscreteIntervalTickMarkColor(ColorStateList.valueOf(color));</span>
<span class="nc" id="L1180">	}</span>

	/**
	 * Sets the colors state list used to draw different states of the discrete interval's tick mark.
	 *
	 * @param colors The desired list of colors for the tick mark.
	 * @see R.attr#uiDiscreteIntervalTickMarkColor ui:uiDiscreteIntervalTickMarkColor
	 * @see #getDiscreteIntervalTickMarkColors()
	 * @see #getDiscreteIntervalTickMarkCurrentColor()
	 */
	public void setDiscreteIntervalTickMarkColor(@NonNull ColorStateList colors) {
<span class="nc" id="L1191">		DISCRETE_INTERVAL_TICK_MARK_INFO.colors = colors;</span>
<span class="nc" id="L1192">		this.updateDiscreteIntervalTickMarksState(getDrawableState(), true);</span>
<span class="nc" id="L1193">	}</span>

	/**
	 * Returns the list of colors used to draw different states of the discrete interval's tick mark.
	 *
	 * @return Colors state list for interval's tick mark.
	 * @see #setDiscreteIntervalTickMarkColor(android.content.res.ColorStateList)
	 */
	@NonNull
	public ColorStateList getDiscreteIntervalTickMarkColors() {
<span class="nc" id="L1203">		return DISCRETE_INTERVAL_TICK_MARK_INFO.colors;</span>
	}

	/**
	 * Returns the current color used to draw the discrete interval's tick mark.
	 *
	 * @return Current interval's tick mark color.
	 */
	@ColorInt
	public int getDiscreteIntervalTickMarkCurrentColor() {
<span class="nc" id="L1213">		return DISCRETE_INTERVAL_TICK_MARK_INFO.paint.getColor();</span>
	}

	/**
	 * Same as {@link #setDiscreteIndicator(android.graphics.drawable.Drawable)} for resource id.
	 *
	 * @param resId Resource id of the desired drawable for discrete indicator. May be {@code 0} to
	 *              remove the current indicator.
	 */
	public void setDiscreteIndicator(@DrawableRes int resId) {
<span class="nc bnc" id="L1223" title="All 2 branches missed.">		if (resId == 0) {</span>
<span class="nc" id="L1224">			setDiscreteIndicator(null);</span>
<span class="nc bnc" id="L1225" title="All 2 branches missed.">		} else if (mDiscreteIndicatorRes != resId) {</span>
<span class="nc" id="L1226">			setDiscreteIndicator(ResourceUtils.getDrawable(</span>
<span class="nc" id="L1227">					getResources(),</span>
					mDiscreteIndicatorRes = resId,
<span class="nc" id="L1229">					getContext().getTheme())</span>
			);
		}
<span class="nc" id="L1232">	}</span>

	/**
	 * Sets the drawable used to draw the discrete indicator in &lt;b&gt;discrete mode&lt;/b&gt;.
	 *
	 * @param indicator The desired drawable for discrete indicator. May be {@code null} to clear
	 *                  the current one.
	 * @see R.attr#uiDiscreteIndicator ui:uiDiscreteIndicator
	 * @see #setDiscreteIndicatorTintList(ColorStateList)
	 * @see #setDiscreteIndicatorTintMode(PorterDuff.Mode)
	 * @see #getDiscreteIndicator()
	 * @see #setDiscrete(boolean)
	 */
	public void setDiscreteIndicator(@Nullable Drawable indicator) {
<span class="nc" id="L1246">		this.updateDiscreteIndicator(indicator);</span>
<span class="nc" id="L1247">	}</span>

	/**
	 * Updates current indicator to the specified one. If this seek bar has discrete mode enabled
	 * ({@link #isDiscrete()}), the given indicator will be updated to scaleable drawable if it is
	 * not yet.
	 *
	 * @param indicator The new indicator to update to.
	 */
	private void updateDiscreteIndicator(Drawable indicator) {
<span class="nc bnc" id="L1257" title="All 2 branches missed.">		if (mDecorator.hasPrivateFlag(PFLAG_DISCRETE)) {</span>
<span class="nc" id="L1258">			indicator = mAnimations.makeDiscreteIndicatorScaleable(</span>
					indicator,
					Gravity.BOTTOM | Gravity.CENTER_HORIZONTAL
			);
		}
<span class="nc bnc" id="L1263" title="All 2 branches missed.">		if (mDiscreteIndicator != indicator) {</span>
			final boolean needUpdate;
<span class="nc bnc" id="L1265" title="All 2 branches missed.">			if (mDiscreteIndicator != null) {</span>
<span class="nc" id="L1266">				mDiscreteIndicator.setCallback(null);</span>
<span class="nc" id="L1267">				unscheduleDrawable(mDiscreteIndicator);</span>
<span class="nc" id="L1268">				needUpdate = true;</span>
			} else {
<span class="nc" id="L1270">				needUpdate = false;</span>
			}
<span class="nc bnc" id="L1272" title="All 2 branches missed.">			if (indicator != null) {</span>
<span class="nc" id="L1273">				indicator.setCallback(this);</span>
<span class="nc bnc" id="L1274" title="All 2 branches missed.">				indicator.setVisible(getVisibility() == VISIBLE, false);</span>

<span class="nc bnc" id="L1276" title="All 2 branches missed.">				if (indicator.getIntrinsicWidth() != mDiscreteIndicatorWidth ||</span>
<span class="nc bnc" id="L1277" title="All 2 branches missed.">						indicator.getIntrinsicHeight() != mDiscreteIndicatorHeight) {</span>
<span class="nc" id="L1278">					this.mDiscreteIndicatorWidth = indicator.getIntrinsicWidth();</span>
<span class="nc" id="L1279">					this.mDiscreteIndicatorHeight = indicator.getIntrinsicHeight();</span>
<span class="nc" id="L1280">					requestLayout();</span>
				}
			} else {
<span class="nc" id="L1283">				this.mDiscreteIndicatorRes = 0;</span>
<span class="nc" id="L1284">				this.mDiscreteIndicatorWidth = mDiscreteIndicatorHeight = 0;</span>
<span class="nc" id="L1285">				requestLayout();</span>
			}
<span class="nc" id="L1287">			this.mDiscreteIndicator = indicator;</span>
<span class="nc" id="L1288">			this.applyDiscreteIndicatorTint();</span>
<span class="nc bnc" id="L1289" title="All 2 branches missed.">			if (needUpdate) {</span>
<span class="nc" id="L1290">				this.updateDiscreteIndicatorPosition(getWidth(), getHeight());</span>
<span class="nc bnc" id="L1291" title="All 2 branches missed.">				if (mDiscreteIndicator.isStateful()) {</span>
<span class="nc" id="L1292">					mDiscreteIndicator.setState(getDrawableState());</span>
				}
<span class="nc" id="L1294">				this.invalidateDiscreteIndicatorArea();</span>
			}
		}
<span class="nc" id="L1297">	}</span>

	/**
	 * Returns the current discrete indicator's drawable.
	 * &lt;p&gt;
	 * &lt;b&gt;Note, that on pre {@link android.os.Build.VERSION_CODES#LOLLIPOP LOLLIPOP} Android versions
	 * this method will return an instance of {@link TintDrawable TintDrawable} if tint has been applied
	 * via {@link #setDiscreteIndicatorTintList(ColorStateList)}.&lt;/b&gt;
	 * &lt;p&gt;
	 * The original wrapped indicator drawable can be obtained via {@link TintDrawable#getDrawable()}.
	 *
	 * @return Discrete indicator's drawable.
	 * @see #setDiscreteIndicator(android.graphics.drawable.Drawable)
	 */
	@Nullable
	public Drawable getDiscreteIndicator() {
<span class="nc bnc" id="L1313" title="All 2 branches missed.">		if (mDiscreteIndicator instanceof ScaleDrawable)</span>
<span class="nc" id="L1314">			return ((ScaleDrawable) mDiscreteIndicator).getDrawable();</span>
		else
<span class="nc" id="L1316">			return mDiscreteIndicator;</span>
	}

	/**
	 * Applies a tint to the discrete indicator, if specified. This call does not modify the current
	 * tint mode, which is {@link android.graphics.PorterDuff.Mode#SRC_IN} by default.
	 * &lt;p&gt;
	 * Subsequent calls to {@link #setDiscreteIndicator(android.graphics.drawable.Drawable)} will
	 * automatically mutate the drawable and apply the specified tint and tint mode using
	 * {@link android.graphics.drawable.Drawable#setTintList(android.content.res.ColorStateList)}.
	 *
	 * @param tint The tint to apply, may be {@code null} to clear the current tint.
	 * @see R.attr#uiDiscreteIndicatorTint ui:uiDiscreteIndicatorTint
	 * @see #getDiscreteIndicatorTintList()
	 * @see android.graphics.drawable.Drawable#setTintList(android.content.res.ColorStateList)
	 */
	public void setDiscreteIndicatorTintList(@Nullable ColorStateList tint) {
<span class="nc" id="L1333">		final SeekBarTintInfo tintInfo = mDecorator.getTintInfo();</span>
<span class="nc" id="L1334">		tintInfo.discreteIndicatorTintList = tint;</span>
<span class="nc" id="L1335">		tintInfo.hasDiscreteIndicatorTintList = true;</span>
<span class="nc" id="L1336">		this.applyDiscreteIndicatorTint();</span>
<span class="nc" id="L1337">	}</span>

	/**
	 * Returns the tint applied to the discrete indicator's drawable, if specified.
	 *
	 * @return The discrete indicator's drawable tint.
	 * @see #setDiscreteIndicatorTintList(android.content.res.ColorStateList)
	 */
	@Nullable
	public ColorStateList getDiscreteIndicatorTintList() {
<span class="nc" id="L1347">		this.ensureDecorator();</span>
<span class="nc bnc" id="L1348" title="All 2 branches missed.">		return mDecorator.hasTintInfo() ? mDecorator.getTintInfo().discreteIndicatorTintList : null;</span>
	}

	/**
	 * Specifies the blending mode used to apply the tint specified by {@link #setDiscreteIndicatorTintList(android.content.res.ColorStateList)}}
	 * to the discrete indicator. The default mode is {@link android.graphics.PorterDuff.Mode#SRC_IN}.
	 *
	 * @param tintMode The blending mode used to apply the tint, may be {@code null} to clear the
	 *                 current tint.
	 * @see R.attr#uiDiscreteIndicatorTintMode ui:uiDiscreteIndicatorTintMode
	 * @see #getDiscreteIndicatorTintMode()
	 * @see android.graphics.drawable.Drawable#setTintMode(android.graphics.PorterDuff.Mode)
	 */
	public void setDiscreteIndicatorTintMode(@Nullable PorterDuff.Mode tintMode) {
<span class="nc" id="L1362">		final SeekBarTintInfo tintInfo = mDecorator.getTintInfo();</span>
<span class="nc" id="L1363">		tintInfo.discreteIndicatorTintMode = tintMode;</span>
<span class="nc" id="L1364">		tintInfo.hasDiscreteIndicatorTintMode = true;</span>
<span class="nc" id="L1365">		this.applyDiscreteIndicatorTint();</span>
<span class="nc" id="L1366">	}</span>

	/**
	 * Returns the blending mode used to apply the tint to the discrete indicator's drawable, if
	 * specified.
	 *
	 * @return The discrete indicator's drawable blending mode used to apply the tint.
	 * @see #setDiscreteIndicatorTintMode(android.graphics.PorterDuff.Mode)
	 */
	@Nullable
	public PorterDuff.Mode getDiscreteIndicatorTintMode() {
<span class="nc" id="L1377">		this.ensureDecorator();</span>
<span class="nc bnc" id="L1378" title="All 2 branches missed.">		return mDecorator.hasTintInfo() ? mDecorator.getTintInfo().discreteIndicatorTintMode : null;</span>
	}

	/**
	 * Applies current discrete indicator tint from {@link Decorator#mTintInfo} to the current discrete
	 * indicator's drawable.
	 */
	@SuppressLint(&quot;NewApi&quot;)
	@SuppressWarnings(&quot;ConstantConditions&quot;)
	private void applyDiscreteIndicatorTint() {
<span class="nc" id="L1388">		this.ensureDecorator();</span>
<span class="nc bnc" id="L1389" title="All 4 branches missed.">		if (mDiscreteIndicator == null || !mDecorator.hasTintInfo()) {</span>
<span class="nc" id="L1390">			return;</span>
		}
<span class="nc bnc" id="L1392" title="All 2 branches missed.">		final Drawable indicator = mDiscreteIndicator instanceof ScaleDrawable ? ((ScaleDrawable) mDiscreteIndicator).getDrawable() : mDiscreteIndicator;</span>
<span class="nc" id="L1393">		final SeekBarTintInfo tintInfo = mDecorator.getTintInfo();</span>
<span class="nc bnc" id="L1394" title="All 4 branches missed.">		if ((!tintInfo.hasDiscreteIndicatorTintList &amp;&amp; !tintInfo.hasDiscreteIndicatorTintMode)) {</span>
<span class="nc" id="L1395">			return;</span>
		}
<span class="nc bnc" id="L1397" title="All 2 branches missed.">		if (UiConfig.MATERIALIZED) {</span>
<span class="nc" id="L1398">			this.mDiscreteIndicator = mDiscreteIndicator.mutate();</span>
<span class="nc bnc" id="L1399" title="All 2 branches missed.">			if (tintInfo.hasDiscreteIndicatorTintList) {</span>
<span class="nc" id="L1400">				mDiscreteIndicator.setTintList(tintInfo.discreteIndicatorTintList);</span>
			}
<span class="nc bnc" id="L1402" title="All 2 branches missed.">			if (tintInfo.hasDiscreteIndicatorTintMode) {</span>
<span class="nc" id="L1403">				mDiscreteIndicator.setTintMode(tintInfo.discreteIndicatorTintMode);</span>
			}
<span class="nc bnc" id="L1405" title="All 2 branches missed.">			if (mDiscreteIndicator.isStateful()) {</span>
<span class="nc" id="L1406">				mDiscreteIndicator.setState(getDrawableState());</span>
			}
<span class="nc" id="L1408">			return;</span>
		}
<span class="nc" id="L1410">		final boolean isTintDrawable = indicator instanceof TintDrawable;</span>
<span class="nc bnc" id="L1411" title="All 2 branches missed.">		final TintDrawable tintDrawable = isTintDrawable ? (TintDrawable) indicator : new TintDrawable(indicator);</span>
<span class="nc bnc" id="L1412" title="All 2 branches missed.">		if (tintInfo.hasDiscreteIndicatorTintList) {</span>
<span class="nc" id="L1413">			tintDrawable.setTintList(tintInfo.discreteIndicatorTintList);</span>
		}
<span class="nc bnc" id="L1415" title="All 2 branches missed.">		if (tintInfo.hasDiscreteIndicatorTintMode) {</span>
<span class="nc" id="L1416">			tintDrawable.setTintMode(tintInfo.discreteIndicatorTintMode);</span>
		}
<span class="nc bnc" id="L1418" title="All 2 branches missed.">		if (isTintDrawable) {</span>
<span class="nc" id="L1419">			return;</span>
		}
<span class="nc bnc" id="L1421" title="All 2 branches missed.">		this.mDiscreteIndicator = mDecorator.hasPrivateFlag(PFLAG_DISCRETE) ?</span>
<span class="nc" id="L1422">				mAnimations.makeDiscreteIndicatorScaleable(tintDrawable, Gravity.BOTTOM | Gravity.CENTER_HORIZONTAL) :</span>
				tintDrawable;
<span class="nc" id="L1424">		mDiscreteIndicator.setCallback(this);</span>
<span class="nc" id="L1425">		updateDiscreteIndicatorState(getDrawableState(), false);</span>
<span class="nc" id="L1426">	}</span>

	/**
	 * Sets a text color, size, and style for the discrete indicator's text from the specified
	 * TextAppearance resource.
	 *
	 * @param resId Resource id of the desired TextAppearance style.
	 * @see R.attr#uiDiscreteIndicatorTextAppearance ui:uiDiscreteIndicatorTextAppearance
	 * @see #setDiscreteIndicatorTextSize(int, float)
	 * @see #setDiscreteIndicatorTextColor(ColorStateList)
	 * @see #setDiscreteIndicatorTypeface(Typeface)
	 */
	public void setDiscreteIndicatorTextAppearance(@StyleRes int resId) {
<span class="nc bnc" id="L1439" title="All 4 branches missed.">		if (DISCRETE_INDICATOR_TEXT_INFO.fromTextAppearanceStyle(getContext(), resId) &amp;&amp; DISCRETE_INDICATOR_TEXT_INFO.updatePaint(getDrawableState())) {</span>
<span class="nc" id="L1440">			this.invalidateDiscreteIndicatorArea();</span>
		}
<span class="nc" id="L1442">	}</span>

	/**
	 * Same as {@link #setDiscreteIndicatorTextSize(int, float)} in {@link TypedValue#COMPLEX_UNIT_SP}
	 * and the specified &lt;var&gt;size&lt;/var&gt;.
	 *
	 * @see #getDiscreteIndicatorTextSize()
	 */
	public void setDiscreteIndicatorTextSize(float size) {
<span class="nc" id="L1451">		setDiscreteIndicatorTextSize(TypedValue.COMPLEX_UNIT_SP, size);</span>
<span class="nc" id="L1452">	}</span>

	/**
	 * Sets a size for the discrete indicator's text to the given &lt;var&gt;unit&lt;/var&gt; and &lt;var&gt;size&lt;/var&gt;.
	 *
	 * @param unit The desired dimension unit. See {@link TypedValue} for possible units.
	 * @param size The desired size in the specified unit.
	 * @see #setDiscreteIndicatorTextSize(float)
	 * @see #getDiscreteIndicatorTextSize()
	 */
	public void setDiscreteIndicatorTextSize(int unit, float size) {
<span class="nc" id="L1463">		setDiscreteIndicatorRawTextSize(TypedValue.applyDimension(</span>
				unit,
				size,
<span class="nc" id="L1466">				getResources().getDisplayMetrics()</span>
		));
<span class="nc" id="L1468">	}</span>

	/**
	 * Sets the raw text size for the Paint used to draw numbers graphics.
	 *
	 * @param size The desired raw size in pixels.
	 */
	private void setDiscreteIndicatorRawTextSize(float size) {
<span class="nc bnc" id="L1476" title="All 2 branches missed.">		if (DISCRETE_INDICATOR_TEXT_INFO.updateTextSize(size)) {</span>
<span class="nc" id="L1477">			this.invalidateDiscreteIndicatorArea();</span>
		}
<span class="nc" id="L1479">	}</span>

	/**
	 * Returns the size of the discrete indicator's text.
	 *
	 * @return Size used when drawing discrete indicator's text graphics.
	 * @see #setDiscreteIndicatorTextSize(int, float)
	 * @see #setDiscreteIndicatorTextAppearance(int)
	 */
	public float getDiscreteIndicatorTextSize() {
<span class="nc" id="L1489">		return DISCRETE_INDICATOR_TEXT_INFO.paint.getTextSize();</span>
	}

	/**
	 * Sets a single color for the discrete indicator's text.
	 *
	 * @param color The desired color.
	 * @see #setDiscreteIndicatorTextColor(ColorStateList)
	 */
	public void setDiscreteIndicatorTextColor(@ColorInt int color) {
<span class="nc" id="L1499">		setDiscreteIndicatorTextColor(ColorStateList.valueOf(color));</span>
<span class="nc" id="L1500">	}</span>

	/**
	 * Sets colors for the discrete indicator's text.
	 *
	 * @param colors The desired colors state list.
	 * @see #setDiscreteIndicatorTextColor(int)
	 * @see #getDiscreteIndicatorTextColors()
	 * @see #getDiscreteIndicatorCurrentTextColor()
	 */
	public void setDiscreteIndicatorTextColor(@NonNull ColorStateList colors) {
<span class="nc bnc" id="L1511" title="All 2 branches missed.">		if (DISCRETE_INDICATOR_TEXT_INFO.updateTextColor(colors, getDrawableState())) {</span>
<span class="nc" id="L1512">			this.invalidateDiscreteIndicatorArea();</span>
		}
<span class="nc" id="L1514">	}</span>

	/**
	 * Returns the colors for the discrete indicator's text.
	 *
	 * @return List of colors used when drawing discrete indicator's text graphics.
	 * @see #setDiscreteIndicatorTextColor(android.content.res.ColorStateList)
	 * @see #setDiscreteIndicatorTextColor(int)
	 * @see #getDiscreteIndicatorCurrentTextColor()
	 */
	@Nullable
	public ColorStateList getDiscreteIndicatorTextColors() {
<span class="nc" id="L1526">		return DISCRETE_INDICATOR_TEXT_INFO.mAppearance.getTextColor();</span>
	}

	/**
	 * Returns the current color used to draw the discrete indicator's text.
	 *
	 * @return Current discrete indicator's text color.
	 * @see #getDiscreteIndicatorTextColors()
	 */
	@ColorInt
	public int getDiscreteIndicatorCurrentTextColor() {
<span class="nc" id="L1537">		return DISCRETE_INDICATOR_TEXT_INFO.paint.getColor();</span>
	}

	/**
	 * Sets a typeface and style in which the discrete indicator's text should be displayed, and
	 * turns on the fake bold and italic bits in the Paint if the Typeface that you provided does
	 * not have all the bits in the style that you specified.
	 *
	 * @param typeface The desired typeface. May be {@code null} to create default one from the specified
	 *                 &lt;var&gt;style&lt;/var&gt;.
	 * @param style    One of {@link Typeface#NORMAL}, {@link Typeface#BOLD}, {@link Typeface#ITALIC}
	 *                 or {@link Typeface#BOLD_ITALIC}.
	 * @see #setDiscreteIndicatorTypeface(Typeface)
	 * @see #getDiscreteIndicatorTypeface()
	 * @see #getDiscreteIndicatorTypefaceStyle()
	 */
	public void setDiscreteIndicatorTypeface(@Nullable Typeface typeface, @TextAppearance.TextStyle int style) {
<span class="nc bnc" id="L1554" title="All 2 branches missed.">		if (DISCRETE_INDICATOR_TEXT_INFO.updateTypeface(typeface, style)) {</span>
<span class="nc" id="L1555">			this.invalidateDiscreteIndicatorArea();</span>
		}
<span class="nc" id="L1557">	}</span>

	/**
	 * Sets a typeface in which the discrete indicator's text should be displayed.
	 * &lt;p&gt;
	 * &lt;b&gt;Note&lt;/b&gt;, that not all Typeface families actually have bold and italic variants, so you
	 * may need to use {@link #setDiscreteIndicatorTypeface(Typeface, int)} to get the appearance that you actually
	 * want.
	 *
	 * @param typeface The desired typeface.
	 * @see #getDiscreteIndicatorTypeface()
	 * @see #getDiscreteIndicatorTypefaceStyle()
	 */
	public void setDiscreteIndicatorTypeface(@Nullable Typeface typeface) {
<span class="nc bnc" id="L1571" title="All 2 branches missed.">		if (DISCRETE_INDICATOR_TEXT_INFO.updateTypeface(typeface)) {</span>
<span class="nc" id="L1572">			this.invalidateDiscreteIndicatorArea();</span>
		}
<span class="nc" id="L1574">	}</span>

	/**
	 * Returns the typeface used to draw text of the discrete indicator.
	 *
	 * @return Discrete indicator's text typeface.
	 * @see #setDiscreteIndicatorTypeface(Typeface, int)
	 * @see #setDiscreteIndicatorTypeface(Typeface)
	 * @see #getDiscreteIndicatorTypefaceStyle()
	 * @see #setDiscreteIndicatorTextAppearance(int)
	 */
	@Nullable
	public Typeface getDiscreteIndicatorTypeface() {
<span class="nc" id="L1587">		return DISCRETE_INDICATOR_TEXT_INFO.paint.getTypeface();</span>
	}

	/**
	 * Returns the style of the typeface used to draw the discrete indicator's text.
	 *
	 * @return Typeface style.
	 * @see #getDiscreteIndicatorTypeface()
	 * @see #setDiscreteIndicatorTypeface(Typeface, int)
	 */
	@TextAppearance.TextStyle
	@SuppressWarnings(&quot;ResourceType&quot;)
	public int getDiscreteIndicatorTypefaceStyle() {
<span class="nc" id="L1600">		final Typeface typeface = DISCRETE_INDICATOR_TEXT_INFO.paint.getTypeface();</span>
<span class="nc bnc" id="L1601" title="All 2 branches missed.">		return typeface != null ? typeface.getStyle() : Typeface.NORMAL;</span>
	}

	/**
	 * Sets a gravity to apply to the discrete indicator's text.
	 *
	 * @param gravity The desired gravity flags. One of {@link Gravity#TOP}, {@link Gravity#BOTTOM},
	 *                {@link Gravity#START}, {@link Gravity#END}, {@link Gravity#CENTER_HORIZONTAL},
	 *                {@link Gravity#CENTER_VERTICAL}, {@link Gravity#CENTER} or theirs relevant combination.
	 * @see R.attr#uiDiscreteIndicatorTextGravity ui:uiDiscreteIndicatorTextGravity
	 * @see #getDiscreteIndicatorTextGravity()
	 * @see #setDiscreteIndicatorTextPadding(int, int, int, int)
	 */
	public void setDiscreteIndicatorTextGravity(int gravity) {
<span class="nc bnc" id="L1615" title="All 2 branches missed.">		if (DISCRETE_INDICATOR_TEXT_INFO.gravity != gravity) {</span>
<span class="nc" id="L1616">			this.DISCRETE_INDICATOR_TEXT_INFO.gravity = gravity;</span>
<span class="nc" id="L1617">			this.invalidateDiscreteIndicatorArea();</span>
		}
<span class="nc" id="L1619">	}</span>

	/**
	 * Returns the gravity applied to the discrete indicator's text.
	 *
	 * @return Discrete indicator's text gravity.
	 * @see #setDiscreteIndicatorTextGravity(int)
	 */
	public int getDiscreteIndicatorTextGravity() {
<span class="nc" id="L1628">		return DISCRETE_INDICATOR_TEXT_INFO.gravity;</span>
	}

	/**
	 * Sets a padding for the discrete indicator's text. The specified padding will be used to
	 * position the indicator's text within the indicator's bounds, but will not cause the indicator
	 * bounds to change.
	 *
	 * @param start  The desired relative start padding. Properly used according to {@link #getLayoutDirection()}.
	 * @param top    The desired top padding.
	 * @param end    The desired relative end padding. Properly used according to {@link #getLayoutDirection()}.
	 * @param bottom The desired bottom padding.
	 * @see R.attr#uiDiscreteIndicatorTextPaddingStart ui:uiDiscreteIndicatorTextPaddingStart
	 * @see R.attr#uiDiscreteIndicatorTextPaddingTop ui:uiDiscreteIndicatorTextPaddingTop
	 * @see R.attr#uiDiscreteIndicatorTextPaddingEnd ui:uiDiscreteIndicatorTextPaddingEnd
	 * @see R.attr#uiDiscreteIndicatorTextPaddingBottom ui:uiDiscreteIndicatorTextPaddingBottom
	 * @see #getDiscreteIndicatorTextPaddingStart()
	 * @see #getDiscreteIndicatorTextPaddingTop()
	 * @see #getDiscreteIndicatorTextPaddingEnd()
	 * @see #getDiscreteIndicatorTextPaddingBottom()
	 * @see #setDiscreteIndicatorTextGravity(int)
	 */
	public void setDiscreteIndicatorTextPadding(int start, int top, int end, int bottom) {
<span class="nc" id="L1651">		final Rect padding = DISCRETE_INDICATOR_TEXT_INFO.padding;</span>
<span class="nc bnc" id="L1652" title="All 8 branches missed.">		if (padding.left != start || padding.top != top || padding.right != end || padding.bottom != bottom) {</span>
<span class="nc" id="L1653">			padding.left = start;</span>
<span class="nc" id="L1654">			padding.top = top;</span>
<span class="nc" id="L1655">			padding.right = end;</span>
<span class="nc" id="L1656">			padding.bottom = bottom;</span>
<span class="nc" id="L1657">			this.invalidateDiscreteIndicatorArea();</span>
		}
<span class="nc" id="L1659">	}</span>

	/**
	 * Returns the start padding of the discrete indicator's text.
	 *
	 * @return Indicator's text left padding if layout direction is {@link #LAYOUT_DIRECTION_LTR},
	 * right padding if it is {@link #LAYOUT_DIRECTION_RTL}.
	 * @see #setDiscreteIndicatorTextPadding(int, int, int, int)
	 * @see #setDiscreteIndicatorTextGravity(int)
	 */
	public int getDiscreteIndicatorTextPaddingStart() {
<span class="nc bnc" id="L1670" title="All 2 branches missed.">		return hasRTLDirection() ?</span>
				DISCRETE_INDICATOR_TEXT_INFO.padding.right :
				DISCRETE_INDICATOR_TEXT_INFO.padding.left;
	}

	/**
	 * Returns the top padding of the discrete indicator's text.
	 *
	 * @return Indicator's text top padding.
	 * @see #setDiscreteIndicatorTextPadding(int, int, int, int)
	 * @see #setDiscreteIndicatorTextGravity(int)
	 */
	public int getDiscreteIndicatorTextPaddingTop() {
<span class="nc" id="L1683">		return DISCRETE_INDICATOR_TEXT_INFO.padding.top;</span>
	}

	/**
	 * Returns the end padding of the discrete indicator's text.
	 *
	 * @return Indicator's text right padding if layout direction is {@link #LAYOUT_DIRECTION_LTR},
	 * left padding if it is {@link #LAYOUT_DIRECTION_RTL}.
	 * @see #setDiscreteIndicatorTextPadding(int, int, int, int)
	 * @see #setDiscreteIndicatorTextGravity(int)
	 */
	public int getDiscreteIndicatorTextPaddingEnd() {
<span class="nc bnc" id="L1695" title="All 2 branches missed.">		return hasRTLDirection() ?</span>
				DISCRETE_INDICATOR_TEXT_INFO.padding.left :
				DISCRETE_INDICATOR_TEXT_INFO.padding.right;
	}

	/**
	 * Returns the bottom padding of the discrete indicator's text.
	 *
	 * @return Indicator's text bottom padding.
	 * @see #setDiscreteIndicatorTextPadding(int, int, int, int)
	 * @see #setDiscreteIndicatorTextGravity(int)
	 */
	public int getDiscreteIndicatorTextPaddingBottom() {
<span class="nc" id="L1708">		return DISCRETE_INDICATOR_TEXT_INFO.padding.bottom;</span>
	}

	/**
	 */
	@Override
	public void setFont(@Nullable Font font) {
<span class="nc" id="L1715">		this.ensureDecorator();</span>
<span class="nc" id="L1716">		mDecorator.setFont(font);</span>
<span class="nc" id="L1717">	}</span>

	/**
	 */
	@Override
	public void setFont(@NonNull String fontPath) {
<span class="nc" id="L1723">		this.ensureDecorator();</span>
<span class="nc" id="L1724">		mDecorator.setFont(fontPath);</span>
<span class="nc" id="L1725">	}</span>

	/**
	 */
	@Override
	public void setTypeface(@Nullable Typeface typeface, @TextAppearance.TextStyle int style) {
<span class="nc" id="L1731">		setDiscreteIndicatorTypeface(typeface, style);</span>
<span class="nc" id="L1732">	}</span>

	/**
	 */
	@Override
	public void setTypeface(@Nullable Typeface typeFace) {
<span class="nc" id="L1738">		setDiscreteIndicatorTypeface(typeFace);</span>
<span class="nc" id="L1739">	}</span>

	/**
	 * Checks whether this view has specified {@link #LAYOUT_DIRECTION_RTL} as its layout direction
	 * via {@link #setLayoutDirection(int)} or not.
	 *
	 * @return {@code True} if layout direction of this view is {@link #LAYOUT_DIRECTION_RTL}, false
	 * if it is {@link #LAYOUT_DIRECTION_LTR}.
	 */
	private boolean hasRTLDirection() {
<span class="nc bnc" id="L1749" title="All 4 branches missed.">		return Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.JELLY_BEAN_MR1 &amp;&amp; getLayoutDirection() == LAYOUT_DIRECTION_RTL;</span>
	}

	/**
	 */
	@Override
	protected void drawableStateChanged() {
<span class="nc" id="L1756">		super.drawableStateChanged();</span>
<span class="nc" id="L1757">		updateDrawablesState(false);</span>
<span class="nc bnc" id="L1758" title="All 2 branches missed.">		if (!UiConfig.MATERIALIZED) {</span>
<span class="nc" id="L1759">			this.applyProgressTints();</span>
<span class="nc" id="L1760">			this.applyThumbTint();</span>
		}
<span class="nc" id="L1762">	}</span>

	/**
	 */
	@Override
	protected void onAttachedToWindow() {
<span class="nc" id="L1768">		super.onAttachedToWindow();</span>
<span class="nc" id="L1769">		this.previewDiscreteComponents(0, PREVIEW_DISCRETE_COMPONENTS_DURATION);</span>
<span class="nc" id="L1770">	}</span>

	/**
	 */
	@Override
	protected void onDetachedFromWindow() {
<span class="nc" id="L1776">		super.onDetachedFromWindow();</span>
<span class="nc" id="L1777">		mAnimations.cancel();</span>
<span class="nc" id="L1778">	}</span>

	/**
	 */
	@NonNull
	@Override
	public WidgetSizeAnimator animateSize() {
<span class="nc" id="L1785">		this.ensureDecorator();</span>
<span class="nc" id="L1786">		return mDecorator.animateSize();</span>
	}

	/**
	 */
	@Override
	protected synchronized void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
<span class="nc" id="L1793">		super.onMeasure(widthMeasureSpec, heightMeasureSpec);</span>
<span class="nc bnc" id="L1794" title="All 4 branches missed.">		if (mDecorator.hasPrivateFlag(PFLAG_DISCRETE) &amp;&amp; mDiscreteIndicatorHeight &gt; 0) {</span>
			// Measure extra space for discrete indicator.
<span class="nc" id="L1796">			setMeasuredDimension(getMeasuredWidth(), getMeasuredHeight() + mDiscreteIndicatorHeight);</span>
		}
<span class="nc" id="L1798">	}</span>

	/**
	 */
	@Override
	protected void onSizeChanged(int w, int h, int oldw, int oldh) {
<span class="nc" id="L1804">		super.onSizeChanged(w, h, oldw, oldh);</span>
<span class="nc" id="L1805">		this.ensureDecorator();</span>
<span class="nc" id="L1806">		mDecorator.onSizeChanged(w, h, oldw, oldh);</span>
<span class="nc bnc" id="L1807" title="All 6 branches missed.">		if (mDecorator.hasPrivateFlag(PFLAG_DISCRETE) &amp;&amp; mDiscreteIndicatorHeight &gt; 0 &amp;&amp; h != oldh) {</span>
<span class="nc" id="L1808">			this.updateTrackPosition();</span>
<span class="nc" id="L1809">			this.updateThumbPosition();</span>
<span class="nc" id="L1810">			this.updateDiscreteIndicatorPosition(getMeasuredWidth(), getMeasuredHeight());</span>
		}
<span class="nc" id="L1812">	}</span>

	/**
	 * Updates the current bounds of the progress track. This will move the track below the discrete
	 * indicator if it is enabled for this SeekBarWidget.
	 */
	private void updateTrackPosition() {
<span class="nc bnc" id="L1819" title="All 2 branches missed.">		if (mProgressDrawable == null) {</span>
<span class="nc" id="L1820">			return;</span>
		}
<span class="nc" id="L1822">		final Rect bounds = mProgressDrawable.getBounds();</span>
<span class="nc bnc" id="L1823" title="All 2 branches missed.">		if (UiConfig.MATERIALIZED) {</span>
<span class="nc" id="L1824">			mProgressDrawable.setBounds(</span>
					bounds.left,
					bounds.top + (mDiscreteIndicatorHeight / 2),
					bounds.right,
					bounds.bottom + (mDiscreteIndicatorHeight / 2)
			);
		} else {
<span class="nc" id="L1831">			final int top = bounds.top + mDiscreteIndicatorHeight;</span>
<span class="nc" id="L1832">			mProgressDrawable.setBounds(</span>
					bounds.left,
					top,
					bounds.right,
<span class="nc" id="L1836">					top + mProgressDrawable.getIntrinsicHeight()</span>
			);
		}
<span class="nc" id="L1839">	}</span>

	/**
	 * Updates the current bounds of the thumb. This will move the thumb below the discrete indicator
	 * if it is enabled for this SeekBarWidget.
	 */
	private void updateThumbPosition() {
<span class="nc bnc" id="L1846" title="All 2 branches missed.">		if (mThumb == null) {</span>
<span class="nc" id="L1847">			return;</span>
		}
<span class="nc" id="L1849">		final Rect bounds = mThumb.getBounds();</span>
<span class="nc" id="L1850">		final int top = getPaddingTop() + mDiscreteIndicatorHeight;</span>
<span class="nc" id="L1851">		mThumb.setBounds(</span>
				bounds.left,
				top,
				bounds.right,
<span class="nc" id="L1855">				top + mThumb.getIntrinsicHeight()</span>
		);
<span class="nc" id="L1857">	}</span>

	/**
	 * Updates the current bounds of the discrete indicator's drawable depends on the specified
	 * &lt;var&gt;width&lt;/var&gt; and &lt;var&gt;height&lt;/var&gt; and the current value of progress.
	 *
	 * @param width  Current width of this view.
	 * @param height Current height of this view.
	 */
	private void updateDiscreteIndicatorPosition(int width, int height) {
<span class="nc bnc" id="L1867" title="All 2 branches missed.">		if (mDiscreteIndicator == null) {</span>
<span class="nc" id="L1868">			return;</span>
		}
<span class="nc" id="L1870">		final float progressRatio = getProgress() / (float) getMax();</span>
<span class="nc" id="L1871">		width -= getPaddingLeft() + getPaddingRight();</span>
<span class="nc" id="L1872">		final int left = Math.round(progressRatio * width);</span>
<span class="nc bnc" id="L1873" title="All 2 branches missed.">		final int thumbHeight = mThumb != null ? mThumb.getIntrinsicHeight() : 0;</span>
<span class="nc" id="L1874">		final int top = getPaddingTop() + thumbHeight / 4;</span>
<span class="nc" id="L1875">		mDiscreteIndicator.setBounds(</span>
				left,
				top,
				left + mDiscreteIndicatorWidth,
				top + mDiscreteIndicatorHeight
		);
<span class="nc" id="L1881">	}</span>

	/**
	 * Like {@link #revealDiscreteComponents()} but this will show the discrete components only for
	 * a the specified amount of time (thus just preview) and then the discrete components will be
	 * automatically hided again.
	 *
	 * @param delay    Delay with which should be the reveal animation of discrete components started.
	 * @param duration The duration for how long should be the discrete components previewed.
	 */
	private void previewDiscreteComponents(long delay, long duration) {
<span class="nc bnc" id="L1892" title="All 6 branches missed.">		if (isEnabled() &amp;&amp; mDecorator.hasPrivateFlag(PFLAG_DISCRETE) &amp;&amp; mDecorator.hasPrivateFlag(PFLAG_DISCRETE_PREVIEW_ENABLED))</span>
<span class="nc" id="L1893">			mAnimations.previewDiscreteComponents(delay, duration);</span>
<span class="nc" id="L1894">	}</span>

	/**
	 * Reveals all discrete components in order to get this SeekBar (if discrete) to its discrete
	 * state where such components should be visible with an animation.
	 *
	 * @see #concealDiscreteComponents()
	 */
	private void revealDiscreteComponents() {
<span class="nc bnc" id="L1903" title="All 4 branches missed.">		if (isEnabled() &amp;&amp; mDecorator.hasPrivateFlag(PFLAG_DISCRETE)) {</span>
<span class="nc" id="L1904">			mAnimations.revealDiscreteComponents();</span>
		}
<span class="nc" id="L1906">	}</span>

	/**
	 * Conceals all discrete components in order to revert this SeekBar (if discrete) back to its idle
	 * state with an animation.
	 *
	 * @see #revealDiscreteComponents()
	 */
	private void concealDiscreteComponents() {
<span class="nc bnc" id="L1915" title="All 4 branches missed.">		if (isEnabled() &amp;&amp; mDecorator.hasPrivateFlag(PFLAG_DISCRETE))</span>
<span class="nc" id="L1916">			mAnimations.concealDiscreteComponents();</span>
<span class="nc" id="L1917">	}</span>

	/**
	 */
	@Override
	protected boolean verifyDrawable(Drawable who) {
<span class="nc bnc" id="L1923" title="All 4 branches missed.">		return who == mDiscreteIndicator || super.verifyDrawable(who);</span>
	}

	/**
	 * Updates state of all drawables and drawing related object of this view to the current state
	 * of this view specified by {@link #getDrawableState()}.
	 *
	 * @param invalidate {@code True} to perform invalidation of this view, {@code false} otherwise.
	 */
	private void updateDrawablesState(boolean invalidate) {
<span class="nc" id="L1933">		final int[] state = getDrawableState();</span>
<span class="nc" id="L1934">		this.updateDiscreteIndicatorState(state, false);</span>
<span class="nc" id="L1935">		this.updateDiscreteIntervalTickMarksState(state, false);</span>
<span class="nc bnc" id="L1936" title="All 2 branches missed.">		if (invalidate) invalidate();</span>
<span class="nc" id="L1937">	}</span>

	/**
	 * Updates the current state of the discrete indicator's graphics.
	 *
	 * @param state      The state according to which to update the graphics.
	 * @param invalidate {@code True} to perform invalidation of this view, {@code false} otherwise.
	 */
	@SuppressWarnings(&quot;CheckResult&quot;)
	private void updateDiscreteIndicatorState(int[] state, boolean invalidate) {
<span class="nc bnc" id="L1947" title="All 4 branches missed.">		if (mDiscreteIndicator != null &amp;&amp; mDiscreteIndicator.isStateful()) {</span>
<span class="nc" id="L1948">			mDiscreteIndicator.setState(state);</span>
		}
<span class="nc" id="L1950">		DISCRETE_INDICATOR_TEXT_INFO.updatePaint(state);</span>
<span class="nc bnc" id="L1951" title="All 2 branches missed.">		if (invalidate) this.invalidateDiscreteIndicatorArea();</span>
<span class="nc" id="L1952">	}</span>

	/**
	 * Updates the current state of the discrete interval's graphics.
	 *
	 * @param state      The state according to which to update the graphics.
	 * @param invalidate {@code True} to perform invalidation of this view, {@code false} otherwise.
	 */
	private void updateDiscreteIntervalTickMarksState(int[] state, boolean invalidate) {
<span class="nc bnc" id="L1961" title="All 4 branches missed.">		if (DISCRETE_INTERVAL_TICK_MARK_INFO.updatePaint(state) &amp;&amp; invalidate) {</span>
<span class="nc" id="L1962">			this.invalidateDiscreteIntervalsArea();</span>
		}
<span class="nc" id="L1964">	}</span>

	/**
	 * Invalidates this view in area where the discrete indicator is at this time presented using
	 * its current bounds.
	 *
	 * @see #invalidate(Rect)
	 */
	private void invalidateDiscreteIndicatorArea() {
<span class="nc bnc" id="L1973" title="All 2 branches missed.">		if (mDiscreteIndicator != null) invalidate(mDiscreteIndicator.getBounds());</span>
<span class="nc" id="L1974">	}</span>

	/**
	 * Invalidates this view in area where the progress track is presented using its current bounds.
	 *
	 * @see #invalidate(Rect)
	 */
	private void invalidateDiscreteIntervalsArea() {
<span class="nc bnc" id="L1982" title="All 2 branches missed.">		if (mProgressDrawable != null) invalidate(mProgressDrawable.getBounds());</span>
<span class="nc" id="L1983">	}</span>

	/**
	 */
	@Override
	@SuppressWarnings(&quot;NewApi&quot;)
	protected synchronized void onDraw(@NonNull Canvas canvas) {
<span class="nc" id="L1990">		super.onDraw(canvas);</span>
<span class="nc bnc" id="L1991" title="All 4 branches missed.">		if (mDecorator.hasPrivateFlag(PFLAG_DISCRETE) &amp;&amp; mAnimations.shouldDraw()) {</span>
<span class="nc" id="L1992">			this.drawDiscreteInterval(canvas);</span>
<span class="nc" id="L1993">			this.drawDiscreteIndicator(canvas);</span>
<span class="nc bnc" id="L1994" title="All 4 branches missed.">			if (mAnimations.areRunning() &amp;&amp; Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.JELLY_BEAN) {</span>
<span class="nc" id="L1995">				postInvalidateOnAnimation();</span>
			}
		}
<span class="nc" id="L1998">	}</span>

	/**
	 * Draws discrete interval, its thick marks depending on the current {@link #mDiscreteIntervalRatio}
	 * value.
	 *
	 * @param canvas Canvas on which to draw discrete interval.
	 */
	private void drawDiscreteInterval(Canvas canvas) {
<span class="nc bnc" id="L2007" title="All 4 branches missed.">		if (mDiscreteIntervalRatio == 0 || mProgressDrawable == null) {</span>
<span class="nc" id="L2008">			return;</span>
		}

<span class="nc" id="L2011">		final Rect trackBounds = mProgressDrawable.getBounds();</span>
<span class="nc" id="L2012">		final int trackLeft = getPaddingLeft();</span>
<span class="nc" id="L2013">		final int cy = trackBounds.centerY();</span>
<span class="nc" id="L2014">		float trackWidth = trackBounds.width();</span>
<span class="nc" id="L2015">		final float discreteInterval = mDiscreteIntervalRatio * trackWidth;</span>
<span class="nc" id="L2016">		trackWidth += DISCRETE_INTERVAL_TICK_MARK_INFO.radius;</span>
<span class="nc bnc" id="L2017" title="All 2 branches missed.">		final Rect thumbBounds = mThumb != null ? mThumb.getBounds() : null;</span>
<span class="nc" id="L2018">		final int thumbOffset = getThumbOffset();</span>

<span class="nc" id="L2020">		float cx = 0;</span>
<span class="nc bnc" id="L2021" title="All 2 branches missed.">		while (cx &lt;= trackWidth) {</span>
			// Ensure to not draw over thumb if it is not expected behaviour.
<span class="nc bnc" id="L2023" title="All 6 branches missed.">			final boolean isAtThumbPosition = thumbBounds != null &amp;&amp;</span>
					trackLeft + cx &gt;= thumbBounds.left + thumbOffset &amp;&amp;
					trackLeft + cx &lt;= thumbBounds.right + thumbOffset;
<span class="nc bnc" id="L2026" title="All 4 branches missed.">			if (CAN_DRAW_DISCRETE_INTERVAL_OVER_THUMB || !isAtThumbPosition) {</span>
<span class="nc" id="L2027">				canvas.drawCircle(</span>
						trackLeft + cx,
						cy,
						DISCRETE_INTERVAL_TICK_MARK_INFO.radius,
						DISCRETE_INTERVAL_TICK_MARK_INFO.paint
				);
			}
<span class="nc" id="L2034">			cx += discreteInterval;</span>
<span class="nc" id="L2035">		}</span>
<span class="nc" id="L2036">	}</span>

	/**
	 * Draws discrete indicator of this SeekBarWidget at its current position updated by
	 * {@link #updateDiscreteIndicatorPosition(int, int)} according to the current progress.
	 *
	 * @param canvas Canvas on which to draw discrete indicator's drawable.
	 */
	private void drawDiscreteIndicator(Canvas canvas) {
<span class="nc bnc" id="L2045" title="All 2 branches missed.">		if (mDiscreteIndicatorHeight == 0) {</span>
<span class="nc" id="L2046">			return;</span>
		}
		// todo: draw according to LTR/RTL layout direction.
<span class="nc" id="L2049">		mDiscreteIndicator.draw(canvas);</span>

		// Draw current progress over indicator's graphics.
<span class="nc" id="L2052">		final Rect indicatorBounds = mDiscreteIndicator.getBounds();</span>
<span class="nc" id="L2053">		final Paint textPaint = DISCRETE_INDICATOR_TEXT_INFO.paint;</span>
<span class="nc" id="L2054">		textPaint.getTextBounds(&quot;0&quot;, 0, 1, mRect);</span>
<span class="nc" id="L2055">		final float textSize = mRect.height();</span>
<span class="nc" id="L2056">		final Rect textPadding = DISCRETE_INDICATOR_TEXT_INFO.padding;</span>
<span class="nc" id="L2057">		final int absoluteTextGravity = WidgetGravity.getAbsoluteGravity(</span>
				DISCRETE_INDICATOR_TEXT_INFO.gravity,
<span class="nc" id="L2059">				ViewCompat.getLayoutDirection(this)</span>
		);

		final float textX, textY;
		// Resolve horizontal text position according to the requested gravity.
<span class="nc bnc" id="L2064" title="All 3 branches missed.">		switch (absoluteTextGravity &amp; Gravity.HORIZONTAL_GRAVITY_MASK) {</span>
			case Gravity.CENTER_HORIZONTAL:
<span class="nc" id="L2066">				textPaint.setTextAlign(Paint.Align.CENTER);</span>
<span class="nc" id="L2067">				textX = indicatorBounds.centerX();</span>
<span class="nc" id="L2068">				break;</span>
			case Gravity.RIGHT:
<span class="nc" id="L2070">				textPaint.setTextAlign(Paint.Align.RIGHT);</span>
<span class="nc" id="L2071">				textX = indicatorBounds.right - textPadding.right;</span>
<span class="nc" id="L2072">				break;</span>
			case Gravity.LEFT:
			default:
<span class="nc" id="L2075">				textPaint.setTextAlign(Paint.Align.LEFT);</span>
<span class="nc" id="L2076">				textX = indicatorBounds.left + textPadding.left;</span>
				break;
		}
		// Resolve vertical text position according to the requested gravity.
<span class="nc bnc" id="L2080" title="All 3 branches missed.">		switch (absoluteTextGravity &amp; Gravity.VERTICAL_GRAVITY_MASK) {</span>
			case Gravity.CENTER_VERTICAL:
<span class="nc" id="L2082">				textY = indicatorBounds.centerY() + textSize / 2f;</span>
<span class="nc" id="L2083">				break;</span>
			case Gravity.BOTTOM:
<span class="nc" id="L2085">				textY = indicatorBounds.bottom - textPadding.bottom;</span>
<span class="nc" id="L2086">				break;</span>
			case Gravity.TOP:
			default:
<span class="nc" id="L2089">				textY = indicatorBounds.top + textSize + textPadding.top;</span>
				break;
		}
<span class="nc" id="L2092">		canvas.drawText(Integer.toString(getProgress()), textX, textY, textPaint);</span>
<span class="nc" id="L2093">	}</span>

	/**
	 */
	@NonNull
	@Override
	public Parcelable onSaveInstanceState() {
<span class="nc" id="L2100">		final SavedState savedState = new SavedState(super.onSaveInstanceState());</span>
<span class="nc" id="L2101">		savedState.privateFlags = mDecorator.mPrivateFlags;</span>
<span class="nc" id="L2102">		return savedState;</span>
	}

	/**
	 */
	@Override
	public void onRestoreInstanceState(Parcelable state) {
<span class="nc bnc" id="L2109" title="All 2 branches missed.">		if (!(state instanceof SavedState)) {</span>
<span class="nc" id="L2110">			super.onRestoreInstanceState(state);</span>
<span class="nc" id="L2111">			return;</span>
		}
<span class="nc" id="L2113">		final SavedState savedState = (SavedState) state;</span>
<span class="nc" id="L2114">		super.onRestoreInstanceState(savedState.getSuperState());</span>
<span class="nc bnc" id="L2115" title="All 2 branches missed.">		setDiscrete((savedState.privateFlags &amp; PFLAG_DISCRETE) != 0);</span>
<span class="nc bnc" id="L2116" title="All 2 branches missed.">		setDiscretePreviewEnabled((savedState.privateFlags &amp; PFLAG_DISCRETE_PREVIEW_ENABLED) != 0);</span>
<span class="nc" id="L2117">	}</span>

	/**
	 * Inner classes ===============================================================================
	 */

	/**
	 * A {@link WidgetSavedState} implementation used to ensure that the state of {@link SeekBarWidget}
	 * is properly saved.
	 *
	 * @author Martin Albedinsky
	 */
	public static class SavedState extends WidgetSavedState {

		/**
		 * Creator used to create an instance or array of instances of SavedState from {@link android.os.Parcel}.
		 */
<span class="nc" id="L2134">		public static final Creator&lt;SavedState&gt; CREATOR = new Creator&lt;SavedState&gt;() {</span>
			/**
			 */
			@Override
			public SavedState createFromParcel(@NonNull Parcel source) {
<span class="nc" id="L2139">				return new SavedState(source);</span>
			}

			/**
			 */
			@Override
			public SavedState[] newArray(int size) {
<span class="nc" id="L2146">				return new SavedState[size];</span>
			}
		};

		/**
		 */
		int privateFlags;

		/**
		 * Creates a new instance of SavedState with the given &lt;var&gt;superState&lt;/var&gt; to allow chaining
		 * of saved states in {@link #onSaveInstanceState()} and also in {@link #onRestoreInstanceState(android.os.Parcelable)}.
		 *
		 * @param superState The super state obtained from {@code super.onSaveInstanceState()} within
		 *                   {@code onSaveInstanceState()}.
		 */
		protected SavedState(@NonNull Parcelable superState) {
<span class="nc" id="L2162">			super(superState);</span>
<span class="nc" id="L2163">		}</span>

		/**
		 * Called from {@link #CREATOR} to create an instance of SavedState form the given parcel
		 * &lt;var&gt;source&lt;/var&gt;.
		 *
		 * @param source Parcel with data for the new instance.
		 */
		protected SavedState(@NonNull Parcel source) {
<span class="nc" id="L2172">			super(source);</span>
<span class="nc" id="L2173">			this.privateFlags = source.readInt();</span>
<span class="nc" id="L2174">		}</span>

		/**
		 */
		@Override
		public void writeToParcel(@NonNull Parcel dest, int flags) {
<span class="nc" id="L2180">			super.writeToParcel(dest, flags);</span>
<span class="nc" id="L2181">			dest.writeInt(privateFlags);</span>
<span class="nc" id="L2182">		}</span>
	}

	/**
	 * This class holds all data necessary to tint all components of this view.
	 */
<span class="nc" id="L2188">	private static final class SeekBarTintInfo extends BackgroundTintInfo {</span>

		/**
		 * Color state list used to tint a specific states of the &lt;b&gt;primary progress&lt;/b&gt; drawable.
		 */
		ColorStateList primaryProgressTintList;

		/**
		 * Flag indicating whether the {@link #primaryProgressTintList} has been set or not.
		 */
		boolean hasPrimaryProgressTintList;

		/**
		 * Blending mode used to apply tint to the &lt;b&gt;primary progress&lt;/b&gt; drawable.
		 */
		PorterDuff.Mode primaryProgressTintMode;

		/**
		 * Flag indicating whether the {@link #primaryProgressTintMode} has been set or not.
		 */
		boolean hasPrimaryProgressTintMode;

		/**
		 * Color state list used to tint a specific states of the &lt;b&gt;secondary progress&lt;/b&gt; drawable.
		 */
		ColorStateList secondaryProgressTintList;

		/**
		 * Flag indicating whether the {@link #secondaryProgressTintList} has been set or not.
		 */
		boolean hasSecondaryProgressTintList;

		/**
		 * Blending mode used to apply tint to the &lt;b&gt;secondary progress&lt;/b&gt; drawable.
		 */
		PorterDuff.Mode secondaryProgressTintMode;

		/**
		 * Flag indicating whether the {@link #secondaryProgressTintMode} has been set or not.
		 */
		boolean hasSecondaryProgressTintMode;

		/**
		 * Color state list used to tint a specific states of the &lt;b&gt;progress background&lt;/b&gt; drawable.
		 */
		ColorStateList progressBackgroundTintList;

		/**
		 * Flag indicating whether the {@link #progressBackgroundTintList} has been set or not.
		 */
		boolean hasProgressBackgroundTintList;

		/**
		 * Blending mode used to apply tint to the &lt;b&gt;progress background&lt;/b&gt; drawable.
		 */
		PorterDuff.Mode progressBackgroundTintMode;

		/**
		 * Flag indicating whether the {@link #progressBackgroundTintMode} has been set or not.
		 */
		boolean hasProgressBackgroundTintMode;

		/**
		 * Color state list used to tint a specific states of the &lt;b&gt;discrete indicator&lt;/b&gt; drawable.
		 */
		ColorStateList discreteIndicatorTintList;

		/**
		 * Blending mode used to apply tint to the &lt;b&gt;discrete indicator&lt;/b&gt; drawable.
		 */
		boolean hasDiscreteIndicatorTintList;

		/**
		 * Blending mode used to apply tint to the &lt;b&gt;discrete indicator&lt;/b&gt; drawable.
		 */
		PorterDuff.Mode discreteIndicatorTintMode;

		/**
		 * Flag indicating whether the {@link #discreteIndicatorTintMode} has been set or not.
		 */
		boolean hasDiscreteIndicatorTintMode;
	}

	/**
	 * Graphics info that holds all parameters necessary to draw progress text within discrete indicator.
	 */
	private static final class DiscreteIndicatorTextInfo extends TextGraphicsInfo {

		/**
		 * Flags determining where in the discrete indicator's area position the progress text.
		 */
<span class="nc" id="L2279">		int gravity = Gravity.CENTER;</span>

		/**
		 * Padding for the progress text.
		 */
		final Rect padding;

		/**
		 * Creates a new instance of DiscreteIndicatorTextInfo.
		 */
		DiscreteIndicatorTextInfo() {
<span class="nc" id="L2290">			super();</span>
<span class="nc" id="L2291">			this.padding = new Rect();</span>
<span class="nc" id="L2292">		}</span>
	}

	/**
	 * Graphics info that holds all parameters necessary to draw tick marks for discrete interval.
	 */
	private static final class DiscreteIntervalTickMarkInfo extends ColorGraphicsInfo {

		/**
		 * Radius of the tick marks of discrete interval.
		 */
		float radius;

		/**
		 * Creates a new instance of DiscreteIntervalTickMarkInfo.
		 */
		DiscreteIntervalTickMarkInfo() {
<span class="nc" id="L2309">			super();</span>
<span class="nc" id="L2310">		}</span>
	}

	/**
	 * Animations interface for this view.
	 */
	private static abstract class Animations {

		/**
		 * Duration for all animations related to discrete components.
		 */
		static final long DISCRETE_COMPONENTS_ANIMATION_DURATION = 350;

		/**
		 * Action to hide discrete components from the preview mode.
		 */
<span class="nc" id="L2326">		final Runnable HIDE_DISCRETE_COMPONENTS_FROM_PREVIEW = new Runnable() {</span>

			/**
			 */
			@Override
			public void run() {
<span class="nc bnc" id="L2332" title="All 4 branches missed.">				if (!view.isPressed() &amp;&amp; onConcealDiscreteComponents()) {</span>
<span class="nc" id="L2333">					discreteComponentsActive = false;</span>
				}
<span class="nc" id="L2335">			}</span>
		};

		/**
		 * View upon which will be animations performed.
		 */
		final SeekBarWidget view;

		/**
		 * Boolean flag indicating whether the preview of discrete components is active or not.
		 */
		boolean discreteComponentsActive;

		/**
		 * Current transformation value of the discrete components.
		 */
<span class="nc" id="L2351">		float transformation = 0;</span>

		/**
		 * Creates a new instance of Animations for the specified view.
		 *
		 * @param view The empty view for upon which to run animations.
		 */
<span class="nc" id="L2358">		Animations(SeekBarWidget view) {</span>
<span class="nc" id="L2359">			this.view = view;</span>
<span class="nc" id="L2360">		}</span>

		/**
		 * Returns a new instance of Animations implementation specific for the current animations
		 * API capabilities.
		 *
		 * @param view The view upon which will the returned Animations object perform all requested
		 *             animations.
		 * @return New instance of Animations implementation.
		 */
		static Animations get(SeekBarWidget view) {
<span class="nc bnc" id="L2371" title="All 2 branches missed.">			if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.LOLLIPOP) {</span>
<span class="nc" id="L2372">				return new LollipopAnimations(view);</span>
<span class="nc bnc" id="L2373" title="All 2 branches missed.">			} else if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.HONEYCOMB) {</span>
<span class="nc" id="L2374">				return new HoneyCombAnimations(view);</span>
			}
<span class="nc" id="L2376">			return new DefaultAnimations(view);</span>
		}

		/**
		 * Makes the given &lt;var&gt;thumb&lt;/var&gt; drawable scaleable along a pivot determined by the specified
		 * &lt;var&gt;gravity&lt;/var&gt; flags.
		 *
		 * @see #makeDrawableScaleable(Drawable, int)
		 */
		Drawable makeThumbScaleable(Drawable thumb, int gravity) {
<span class="nc" id="L2386">			return makeDrawableScaleable(thumb, gravity);</span>
		}

		/**
		 * Makes the given &lt;var&gt;indicator&lt;/var&gt; drawable scaleable along a pivot determined
		 * by the specified &lt;var&gt;gravity&lt;/var&gt; flags.
		 *
		 * @see #makeDrawableScaleable(Drawable, int)
		 */
		Drawable makeDiscreteIndicatorScaleable(Drawable indicator, int gravity) {
<span class="nc" id="L2396">			return makeDrawableScaleable(indicator, gravity);</span>
		}

		/**
		 * Wraps the given &lt;var&gt;drawable&lt;/var&gt; into instance of {@link ScaleDrawable} if it is valid
		 * and not ScaleDrawable yet.
		 *
		 * @param drawable The drawable to wrap and make scaleable.
		 * @param gravity  The gravity determining a pivot along which can be the given drawable scaled.
		 * @return Instance of ScaleDrawable with the specified drawable wrapped or {@code null}
		 * if the given drawable was also {@code null}.
		 */
		static Drawable makeDrawableScaleable(Drawable drawable, int gravity) {
<span class="nc bnc" id="L2409" title="All 4 branches missed.">			if (drawable == null || drawable instanceof ScaleDrawable) return drawable;</span>
<span class="nc" id="L2410">			final ScaleDrawable scaleDrawable = new ScaleDrawable(drawable, gravity, 1f, 1f);</span>
<span class="nc" id="L2411">			scaleDrawable.setLevel(MAX_LEVEL);</span>
<span class="nc" id="L2412">			return scaleDrawable;</span>
		}

		/**
		 * Like {@link #revealDiscreteComponents()} but this will reveal the discrete components
		 * only temporarily and conceals them after the specified duration has been reached.
		 *
		 * @param delay    Delay with which should be the reveal animation started.
		 * @param duration The duration for how long should be the discrete components previewed.
		 */
		void previewDiscreteComponents(long delay, long duration) {
<span class="nc" id="L2423">			view.removeCallbacks(HIDE_DISCRETE_COMPONENTS_FROM_PREVIEW);</span>
<span class="nc bnc" id="L2424" title="All 2 branches missed.">			if (discreteComponentsActive) {</span>
<span class="nc" id="L2425">				view.postDelayed(HIDE_DISCRETE_COMPONENTS_FROM_PREVIEW, duration);</span>
<span class="nc" id="L2426">				return;</span>
			}

			// Preview the discrete components for a while so a user can detect that the seek bar
			// is really in discrete mode.
<span class="nc" id="L2431">			onRevealDiscreteComponents(delay);</span>
<span class="nc" id="L2432">			view.postDelayed(HIDE_DISCRETE_COMPONENTS_FROM_PREVIEW, duration);</span>
<span class="nc" id="L2433">			this.discreteComponentsActive = true;</span>
<span class="nc" id="L2434">		}</span>

		/**
		 * Reveals all discrete components with an animation if they are not active (visible) at this
		 * time yet.
		 */
		void revealDiscreteComponents() {
<span class="nc bnc" id="L2441" title="All 2 branches missed.">			if (!discreteComponentsActive) {</span>
<span class="nc" id="L2442">				onRevealDiscreteComponents(0);</span>
<span class="nc" id="L2443">				this.discreteComponentsActive = true;</span>
			}
<span class="nc" id="L2445">		}</span>

		/**
		 * Invoked whenever {@link #revealDiscreteComponents()} or {@link #previewDiscreteComponents(long, long)}
		 * is called an the discrete components are not active (visible) at the time.
		 *
		 * @param delay The delay with which should be the reveal animation started.
		 * @return {@code True} if the reveal animation for the discrete components has been started,
		 * {@code false otherwise}.
		 */
		abstract boolean onRevealDiscreteComponents(long delay);

		/**
		 * Conceals all discrete components with an animation if they are active (visible) at this time.
		 */
		void concealDiscreteComponents() {
<span class="nc bnc" id="L2461" title="All 2 branches missed.">			if (discreteComponentsActive) {</span>
<span class="nc" id="L2462">				view.removeCallbacks(HIDE_DISCRETE_COMPONENTS_FROM_PREVIEW);</span>
<span class="nc" id="L2463">				this.discreteComponentsActive = false;</span>
<span class="nc" id="L2464">				onConcealDiscreteComponents();</span>
			}
<span class="nc" id="L2466">		}</span>

		/**
		 * Invoked whenever {@link #concealDiscreteComponents()} is called an the discrete components
		 * are active (visible) at the time.
		 *
		 * @return {@code True} if the conceal animation for the discrete components has been started,
		 * {@code false otherwise}.
		 */
		abstract boolean onConcealDiscreteComponents();

		/**
		 * Specifies a transformation for the discrete components. Depends on the implementation,
		 * this can change alpha value of some discrete components or theirs current scale for example.
		 * &lt;p&gt;
		 * This method can be used to animate revealing/concealing of the discrete components or theirs
		 * immediate hiding/showing.
		 *
		 * @param transformation The desired transformation from the range {@code [0.0, 1.0]}.
		 *                       Transformation {@code 0.0} means that discrete components will be
		 *                       hided, {@code 1.0} means that they will be visible.
		 */
		@Keep
		void setDiscreteTransformation(float transformation) {
<span class="nc bnc" id="L2490" title="All 2 branches missed.">			if (this.transformation != transformation) {</span>
<span class="nc" id="L2491">				this.transformation = transformation;</span>
				// Scale up/down the discrete indicator and the thumb in a way when one is fully scaled
				// up the other is fully scaled down and reversed.
<span class="nc" id="L2494">				setThumbScale(1 - transformation);</span>
<span class="nc" id="L2495">				setDiscreteIndicatorScale(transformation);</span>

				// Fade in/out the text of discrete indicator during the indicator is at least 75% transformed/visible.
<span class="nc bnc" id="L2498" title="All 2 branches missed.">				if (transformation &gt; 0.75) {</span>
<span class="nc" id="L2499">					final int alpha = Math.round((transformation - 0.75f) / 0.25f * 255);</span>
<span class="nc" id="L2500">					setDiscreteIndicatorTextAlpha(alpha);</span>
<span class="nc" id="L2501">				} else {</span>
<span class="nc" id="L2502">					setDiscreteIndicatorTextAlpha(0);</span>
				}

				// Fade in/out discrete interval.
<span class="nc" id="L2506">				setDiscreteIntervalAlpha(Math.round(transformation * 255));</span>
<span class="nc" id="L2507">				invalidate();</span>
			}
<span class="nc" id="L2509">		}</span>

		/**
		 * Updates a scale level of the thumb's drawable.
		 *
		 * @param scale The scale value from the range {@code [0.0, 1.0]}.
		 */
		@SuppressWarnings(&quot;Range&quot;)
		void setThumbScale(float scale) {
<span class="nc bnc" id="L2518" title="All 2 branches missed.">			if (view.mThumb instanceof ScaleDrawable) {</span>
<span class="nc" id="L2519">				final int scaleLevel = Math.round(scale * MAX_LEVEL);</span>
<span class="nc bnc" id="L2520" title="All 2 branches missed.">				view.mThumb.setLevel(Build.VERSION.SDK_INT &gt; Build.VERSION_CODES.JELLY_BEAN ?</span>
						scaleLevel :
						// Correct scale level for pre JELLY_BEAN Android versions.
						// scaleLevel(10000) = scale(1.0) [expected scale(1.0)]
						// scaleLevel(5000)  = scale(0.0) [expected scale(0.5)]
						// scaleLevel(0)     = scale(1.0) [expected scale(0.0)]
						scaleLevel + (int) ((10000 - scaleLevel) / 10000f * 5000)
				);
			}
<span class="nc" id="L2529">		}</span>

		/**
		 * Updates a scale level of the discrete indicator's drawable along with its text size.
		 *
		 * @param scale The scale value from the range {@code [0.0, 1.0]}.
		 */
		void setDiscreteIndicatorScale(float scale) {
<span class="nc" id="L2537">			updateDrawableScale(view.mDiscreteIndicator, scale);</span>
<span class="nc" id="L2538">			view.DISCRETE_INDICATOR_TEXT_INFO.paint.setTextSize(</span>
<span class="nc" id="L2539">					view.DISCRETE_INDICATOR_TEXT_INFO.mAppearance.getTextSize() * scale</span>
			);
<span class="nc" id="L2541">		}</span>

		/**
		 * Updates a scale level of the given &lt;var&gt;drawable&lt;/var&gt; according to the specified scale
		 * value.
		 *
		 * @param drawable The drawable of which scale level to update.
		 * @param scale    The scale value from the range {@code [0.0, 1.0]}.
		 */
		private void updateDrawableScale(Drawable drawable, float scale) {
<span class="nc bnc" id="L2551" title="All 2 branches missed.">			if (drawable instanceof ScaleDrawable) drawable.setLevel(Math.round(scale * MAX_LEVEL));</span>
<span class="nc" id="L2552">		}</span>

		/**
		 * Specifies an alpha value for the graphics of the text of discrete indicator.
		 *
		 * @param alpha The desired alpha from the range {@code [0, 255]}.
		 */
		void setDiscreteIndicatorTextAlpha(int alpha) {
<span class="nc" id="L2560">			view.DISCRETE_INDICATOR_TEXT_INFO.paint.setAlpha(alpha);</span>
<span class="nc" id="L2561">		}</span>

		/**
		 * Specifies an alpha value for the graphics of the discrete interval.
		 *
		 * @param alpha The desired alpha from the range {@code [0, 255]}.
		 */
		void setDiscreteIntervalAlpha(int alpha) {
<span class="nc" id="L2569">			view.DISCRETE_INTERVAL_TICK_MARK_INFO.paint.setAlpha(alpha);</span>
<span class="nc" id="L2570">		}</span>

		/**
		 * Causes invalidation of the attached view.
		 */
		final void invalidate() {
<span class="nc" id="L2576">			view.invalidate();</span>
<span class="nc" id="L2577">		}</span>

		/**
		 * Checks whether components that are animated should be drawn or not.
		 *
		 * @return {@code True} to draw components animated by this object, {@code false} otherwise.
		 */
		boolean shouldDraw() {
<span class="nc bnc" id="L2585" title="All 2 branches missed.">			return transformation &gt; 0;</span>
		}

		/**
		 * Checks whether some animations are running or not.
		 *
		 * @return {@code True} if at least one animation is running at this time, {@code false} otherwise.
		 */
		abstract boolean areRunning();

		/**
		 * Cancels all running animations.
		 */
		abstract void cancel();
	}

	/**
	 * Default implementation of {@link Animations}.
	 */
	private static final class DefaultAnimations extends Animations {

		/**
		 * Animation used to reveal discrete components.
		 */
		private final Animation revealDiscreteComponentsAnimation;

		/**
		 * Animation used to conceal discrete components.
		 */
		private final Animation concealDiscreteComponentsAnimation;

		/**
		 * See {@link Animations#Animations(SeekBarWidget)}.
		 */
		DefaultAnimations(SeekBarWidget view) {
<span class="nc" id="L2620">			super(view);</span>
<span class="nc" id="L2621">			this.revealDiscreteComponentsAnimation = new DiscreteComponentsAnimation(this, 0.0f, 1.0f);</span>
<span class="nc" id="L2622">			revealDiscreteComponentsAnimation.setDuration(DISCRETE_COMPONENTS_ANIMATION_DURATION);</span>

<span class="nc" id="L2624">			this.concealDiscreteComponentsAnimation = new DiscreteComponentsAnimation(this, 1.0f, 0.0f);</span>
<span class="nc" id="L2625">			concealDiscreteComponentsAnimation.setDuration(DISCRETE_COMPONENTS_ANIMATION_DURATION);</span>
<span class="nc" id="L2626">		}</span>

		/**
		 */
		@Override
		boolean onRevealDiscreteComponents(long delay) {
<span class="nc" id="L2632">			revealDiscreteComponentsAnimation.setStartOffset(delay);</span>
<span class="nc" id="L2633">			view.startAnimation(revealDiscreteComponentsAnimation);</span>
<span class="nc" id="L2634">			return false;</span>
		}

		/**
		 */
		@Override
		boolean onConcealDiscreteComponents() {
<span class="nc" id="L2641">			view.startAnimation(concealDiscreteComponentsAnimation);</span>
<span class="nc" id="L2642">			return false;</span>
		}

		/**
		 */
		@Override
		boolean areRunning() {
<span class="nc" id="L2649">			final Animation animation = view.getAnimation();</span>
<span class="nc bnc" id="L2650" title="All 4 branches missed.">			return animation == revealDiscreteComponentsAnimation || animation == concealDiscreteComponentsAnimation;</span>
		}

		/**
		 */
		@Override
		void cancel() {
<span class="nc" id="L2657">			view.clearAnimation();</span>
<span class="nc" id="L2658">		}</span>
	}

	/**
	 * An {@link Animations} implementation used for post {@link android.os.Build.VERSION_CODES#HONEYCOMB HONEYCOMB}
	 * Android versions.
	 */
	@TargetApi(Build.VERSION_CODES.HONEYCOMB)
	private static class HoneyCombAnimations extends Animations {

		/**
		 * Animator used to animate discrete components.
		 */
		private final ObjectAnimator discreteComponentsAnimator;

		/**
		 * See {@link Animations#Animations(SeekBarWidget)}.
		 */
		HoneyCombAnimations(SeekBarWidget view) {
<span class="nc" id="L2677">			super(view);</span>
<span class="nc" id="L2678">			this.discreteComponentsAnimator = ObjectAnimator.ofFloat(this, &quot;discreteTransformation&quot;, 0, 0);</span>
<span class="nc" id="L2679">			this.discreteComponentsAnimator.setDuration(DISCRETE_COMPONENTS_ANIMATION_DURATION);</span>
<span class="nc" id="L2680">		}</span>

		/**
		 */
		@Override
		boolean onRevealDiscreteComponents(long delay) {
<span class="nc bnc" id="L2686" title="All 2 branches missed.">			if (transformation == 1) return false;</span>
<span class="nc" id="L2687">			discreteComponentsAnimator.setFloatValues(transformation, 1f);</span>
<span class="nc" id="L2688">			discreteComponentsAnimator.setStartDelay(delay);</span>
<span class="nc" id="L2689">			discreteComponentsAnimator.start();</span>
<span class="nc" id="L2690">			return true;</span>
		}

		/**
		 */
		@Override
		boolean onConcealDiscreteComponents() {
<span class="nc bnc" id="L2697" title="All 2 branches missed.">			if (transformation == 0) return false;</span>
<span class="nc" id="L2698">			discreteComponentsAnimator.setFloatValues(transformation, 0f);</span>
<span class="nc" id="L2699">			discreteComponentsAnimator.setStartDelay(0);</span>
<span class="nc" id="L2700">			discreteComponentsAnimator.start();</span>
<span class="nc" id="L2701">			return true;</span>
		}

		/**
		 */
		@Override
		boolean areRunning() {
<span class="nc" id="L2708">			return discreteComponentsAnimator.isRunning();</span>
		}

		/**
		 */
		@Override
		void cancel() {
<span class="nc bnc" id="L2715" title="All 2 branches missed.">			if (discreteComponentsAnimator.isRunning()) {</span>
<span class="nc" id="L2716">				discreteComponentsAnimator.cancel();</span>
			}
<span class="nc" id="L2718">		}</span>
	}

	/**
	 * An {@link Animations} implementation used for post {@link android.os.Build.VERSION_CODES#LOLLIPOP LOLLIPOP}
	 * Android versions.
	 */
	@TargetApi(Build.VERSION_CODES.LOLLIPOP)
	private static final class LollipopAnimations extends HoneyCombAnimations {

		/**
		 * See {@link HoneyCombAnimations#HoneyCombAnimations(SeekBarWidget)}.
		 */
		LollipopAnimations(SeekBarWidget view) {
<span class="nc" id="L2732">			super(view);</span>
<span class="nc" id="L2733">		}</span>

		/**
		 */
		@Override
		Drawable makeThumbScaleable(Drawable thumb, int gravity) {
			// fixme: Unfortunately on LOLLIPOP and higher the thumb wrapped into ScaleDrawable is
			// fixme: drawn by the framework with some alpha mask or whatever and that causes the
			// fixme: progress graphics not to be drawn behind the thumb, and also mThumb.setLevel(int)
			// fixme: with current scale level is not working so the thumb is not being scaled at all
			// fixme: because the thumb drawable on LOLLIPOP is actually the animated-selector and
			// fixme: it appears that such drawable cannot be scaled.
<span class="nc" id="L2745">			return thumb;</span>
		}
	}

	/**
	 * An {@link Animation} implementation that can be used to animate transformation value of
	 * discrete components.
	 */
	private static final class DiscreteComponentsAnimation extends Animation {

		/**
		 * Animations instance that can handle transformation change of discrete components.
		 */
		final Animations animations;

		/**
		 * Start transformation value from which to animate.
		 */
		final float fromTransformation;

		/**
		 * End transformation value to which to animate.
		 */
		final float toTransformation;

		/**
		 * Creates a new instance of DiscreteComponentsAnimation with the specified parameters.
		 *
		 * @param animations         The animations instance to which we can delegate animated transformation
		 *                           change.
		 * @param fromTransformation The transformation value from which to animate.
		 * @param toTransformation   The transformation value to which to animate.
		 */
<span class="nc" id="L2778">		DiscreteComponentsAnimation(Animations animations, float fromTransformation, float toTransformation) {</span>
<span class="nc" id="L2779">			this.animations = animations;</span>
<span class="nc" id="L2780">			this.fromTransformation = fromTransformation;</span>
<span class="nc" id="L2781">			this.toTransformation = toTransformation;</span>
<span class="nc" id="L2782">		}</span>

		/**
		 */
		@Override
		protected void applyTransformation(float interpolatedTime, Transformation transformation) {
<span class="nc" id="L2788">			final float trans = fromTransformation;</span>
<span class="nc" id="L2789">			animations.setDiscreteTransformation(trans + ((toTransformation - trans) * interpolatedTime));</span>
<span class="nc" id="L2790">		}</span>
	}

	/**
	 * Decorator implementation for this widget.
	 */
	private final class Decorator extends FontWidgetDecorator&lt;SeekBarWidget&gt; {

		/**
		 * See {@link WidgetDecorator#WidgetDecorator(View, int[])}.
		 */
<span class="nc" id="L2801">		Decorator(SeekBarWidget widget) {</span>
<span class="nc" id="L2802">			super(widget, R.styleable.Ui_SeekBar);</span>
<span class="nc" id="L2803">		}</span>

		/**
		 */
		@Override
		BackgroundTintInfo onCreateTintInfo() {
<span class="nc" id="L2809">			return new SeekBarTintInfo();</span>
		}

		/**
		 */
		@NonNull
		@Override
		SeekBarTintInfo getTintInfo() {
<span class="nc" id="L2817">			return (SeekBarTintInfo) super.getTintInfo();</span>
		}

		/**
		 */
		@Override
		@SuppressWarnings(&quot;ResourceType&quot;)
		void onProcessTintAttributes(Context context, TypedArray tintAttributes, int tintColor) {
<span class="nc" id="L2825">			final SeekBarTintInfo tintInfo = getTintInfo();</span>
<span class="nc" id="L2826">			tintInfo.discreteIndicatorTintList = TintManager.createSeekBarThumbTintColors(getContext(), tintColor);</span>
<span class="nc bnc" id="L2827" title="All 2 branches missed.">			if (tintAttributes.hasValue(R.styleable.Ui_SeekBar_uiDiscreteIndicatorTint)) {</span>
<span class="nc" id="L2828">				tintInfo.discreteIndicatorTintList = tintAttributes.getColorStateList(R.styleable.Ui_SeekBar_uiDiscreteIndicatorTint);</span>
			}
<span class="nc" id="L2830">			tintInfo.discreteIndicatorTintMode = TintManager.parseTintMode(</span>
<span class="nc" id="L2831">					tintAttributes.getInt(R.styleable.Ui_SeekBar_uiDiscreteIndicatorTintMode, 0),</span>
					PorterDuff.Mode.SRC_IN
			);
<span class="nc bnc" id="L2834" title="All 2 branches missed.">			if (UiConfig.MATERIALIZED) {</span>
<span class="nc bnc" id="L2835" title="All 2 branches missed.">				if (tintAttributes.hasValue(R.styleable.Ui_SeekBar_uiThumbTint)) {</span>
<span class="nc" id="L2836">					setThumbTintList(tintAttributes.getColorStateList(R.styleable.Ui_SeekBar_uiThumbTint));</span>
				}
<span class="nc bnc" id="L2838" title="All 2 branches missed.">				if (tintAttributes.hasValue(R.styleable.Ui_SeekBar_uiProgressTint)) {</span>
<span class="nc" id="L2839">					setProgressTintList(tintAttributes.getColorStateList(R.styleable.Ui_SeekBar_uiProgressTint));</span>
				}
<span class="nc bnc" id="L2841" title="All 2 branches missed.">				if (tintAttributes.hasValue(R.styleable.Ui_SeekBar_uiProgressBackgroundTint)) {</span>
<span class="nc" id="L2842">					setProgressBackgroundTintList(tintAttributes.getColorStateList(R.styleable.Ui_SeekBar_uiProgressBackgroundTint));</span>
				}
<span class="nc bnc" id="L2844" title="All 2 branches missed.">				if (tintAttributes.hasValue(R.styleable.Ui_SeekBar_uiBackgroundTint)) {</span>
<span class="nc" id="L2845">					setBackgroundTintList(tintAttributes.getColorStateList(R.styleable.Ui_SeekBar_uiBackgroundTint));</span>
				}
<span class="nc bnc" id="L2847" title="All 2 branches missed.">				if (tintAttributes.hasValue(R.styleable.Ui_SeekBar_uiThumbTintMode)) {</span>
<span class="nc" id="L2848">					setThumbTintMode(TintManager.parseTintMode(</span>
<span class="nc" id="L2849">							tintAttributes.getInt(R.styleable.Ui_SeekBar_uiThumbTintMode, 0),</span>
							PorterDuff.Mode.SRC_IN
					));
				}
<span class="nc bnc" id="L2853" title="All 2 branches missed.">				if (tintAttributes.hasValue(R.styleable.Ui_SeekBar_uiProgressTintMode)) {</span>
<span class="nc" id="L2854">					setProgressTintMode(TintManager.parseTintMode(</span>
<span class="nc" id="L2855">							tintAttributes.getInt(R.styleable.Ui_SeekBar_uiProgressTintMode, 0),</span>
							PorterDuff.Mode.SRC_IN
					));
				}
<span class="nc bnc" id="L2859" title="All 2 branches missed.">				if (tintAttributes.hasValue(R.styleable.Ui_SeekBar_uiProgressBackgroundTintMode)) {</span>
<span class="nc" id="L2860">					setProgressBackgroundTintMode(TintManager.parseTintMode(</span>
<span class="nc" id="L2861">							tintAttributes.getInt(R.styleable.Ui_SeekBar_uiProgressBackgroundTintMode, 0),</span>
							PorterDuff.Mode.SRC_IN
					));
				}
<span class="nc bnc" id="L2865" title="All 2 branches missed.">				if (tintAttributes.hasValue(R.styleable.Ui_SeekBar_uiBackgroundTintMode)) {</span>
<span class="nc" id="L2866">					setBackgroundTintMode(TintManager.parseTintMode(</span>
<span class="nc" id="L2867">							tintAttributes.getInt(R.styleable.Ui_SeekBar_uiBackgroundTintMode, 0),</span>
							PorterDuff.Mode.SRC_IN
					));
				}
			} else {
<span class="nc" id="L2872">				tintInfo.tintList = TintManager.createSeekBarThumbTintColors(getContext(), tintColor);</span>
<span class="nc bnc" id="L2873" title="All 2 branches missed.">				if (tintAttributes.hasValue(R.styleable.Ui_SeekBar_uiThumbTint)) {</span>
<span class="nc" id="L2874">					tintInfo.tintList = tintAttributes.getColorStateList(R.styleable.Ui_SeekBar_uiThumbTint);</span>
				}
<span class="nc" id="L2876">				tintInfo.primaryProgressTintList = TintManager.createSeekBarProgressTintColors(getContext(), tintColor);</span>
<span class="nc bnc" id="L2877" title="All 2 branches missed.">				if (tintAttributes.hasValue(R.styleable.Ui_SeekBar_uiProgressTint)) {</span>
<span class="nc" id="L2878">					tintInfo.primaryProgressTintList = tintAttributes.getColorStateList(R.styleable.Ui_SeekBar_uiProgressTint);</span>
				}
<span class="nc" id="L2880">				tintInfo.progressBackgroundTintList = TintManager.createSeekBarProgressBackgroundTintColors(getContext(), tintColor);</span>
<span class="nc bnc" id="L2881" title="All 2 branches missed.">				if (tintAttributes.hasValue(R.styleable.Ui_SeekBar_uiProgressBackgroundTint)) {</span>
<span class="nc" id="L2882">					tintInfo.progressBackgroundTintList = tintAttributes.getColorStateList(R.styleable.Ui_SeekBar_uiProgressBackgroundTint);</span>
				}
<span class="nc bnc" id="L2884" title="All 2 branches missed.">				if (tintAttributes.hasValue(R.styleable.Ui_SeekBar_uiBackgroundTint)) {</span>
<span class="nc" id="L2885">					tintInfo.backgroundTintList = tintAttributes.getColorStateList(R.styleable.Ui_SeekBar_uiBackgroundTint);</span>
				}
<span class="nc" id="L2887">				tintInfo.tintMode = TintManager.parseTintMode(</span>
<span class="nc" id="L2888">						tintAttributes.getInt(R.styleable.Ui_SeekBar_uiThumbTintMode, 0),</span>
						PorterDuff.Mode.SRC_IN
				);
<span class="nc" id="L2891">				tintInfo.primaryProgressTintMode = TintManager.parseTintMode(</span>
<span class="nc" id="L2892">						tintAttributes.getInt(R.styleable.Ui_SeekBar_uiProgressTintMode, 0),</span>
						PorterDuff.Mode.SRC_IN
				);
<span class="nc" id="L2895">				tintInfo.progressBackgroundTintMode = TintManager.parseTintMode(</span>
<span class="nc" id="L2896">						tintAttributes.getInt(R.styleable.Ui_SeekBar_uiProgressBackgroundTintMode, 0),</span>
						PorterDuff.Mode.SRC_IN
				);
<span class="nc" id="L2899">				tintInfo.backgroundTintMode = TintManager.parseTintMode(</span>
<span class="nc bnc" id="L2900" title="All 2 branches missed.">						tintAttributes.getInt(R.styleable.Ui_SeekBar_uiBackgroundTintMode, 0),</span>
						tintInfo.backgroundTintList != null ? PorterDuff.Mode.SRC_IN : null
				);
			}
<span class="nc" id="L2904">		}</span>

		/**
		 */
		@Override
		void onTintAttributesProcessed() {
<span class="nc" id="L2910">			final SeekBarTintInfo tintInfo = getTintInfo();</span>
			// If there is no tint modes specified within style/xml do not tint at all.
<span class="nc bnc" id="L2912" title="All 2 branches missed.">			if (tintInfo.primaryProgressTintMode == null) tintInfo.primaryProgressTintList = null;</span>
<span class="nc bnc" id="L2913" title="All 2 branches missed.">			if (tintInfo.secondaryProgressTintMode == null)</span>
<span class="nc" id="L2914">				tintInfo.secondaryProgressTintList = null;</span>
<span class="nc bnc" id="L2915" title="All 2 branches missed.">			if (tintInfo.progressBackgroundTintMode == null)</span>
<span class="nc" id="L2916">				tintInfo.progressBackgroundTintList = null;</span>
<span class="nc bnc" id="L2917" title="All 2 branches missed.">			if (tintInfo.discreteIndicatorTintMode == null)</span>
<span class="nc" id="L2918">				tintInfo.discreteIndicatorTintList = null;</span>
<span class="nc bnc" id="L2919" title="All 2 branches missed.">			tintInfo.hasPrimaryProgressTintList = tintInfo.primaryProgressTintList != null;</span>
<span class="nc bnc" id="L2920" title="All 2 branches missed.">			tintInfo.hasPrimaryProgressTintMode = tintInfo.primaryProgressTintMode != null;</span>
<span class="nc bnc" id="L2921" title="All 2 branches missed.">			tintInfo.hasSecondaryProgressTintList = tintInfo.secondaryProgressTintList != null;</span>
<span class="nc bnc" id="L2922" title="All 2 branches missed.">			tintInfo.hasSecondaryProgressTintMode = tintInfo.secondaryProgressTintMode != null;</span>
<span class="nc bnc" id="L2923" title="All 2 branches missed.">			tintInfo.hasProgressBackgroundTintList = tintInfo.progressBackgroundTintList != null;</span>
<span class="nc bnc" id="L2924" title="All 2 branches missed.">			tintInfo.hasProgressBackgroundTintMode = tintInfo.progressBackgroundTintMode != null;</span>
<span class="nc bnc" id="L2925" title="All 2 branches missed.">			tintInfo.hasDiscreteIndicatorTintList = tintInfo.discreteIndicatorTintList != null;</span>
<span class="nc bnc" id="L2926" title="All 2 branches missed.">			tintInfo.hasDiscreteIndicatorTintMode = tintInfo.discreteIndicatorTintMode != null;</span>
<span class="nc" id="L2927">			super.onTintAttributesProcessed();</span>
<span class="nc" id="L2928">		}</span>

		/**
		 */
		@Override
		boolean shouldInvalidateTintInfo(@NonNull BackgroundTintInfo tintInfo) {
<span class="nc" id="L2934">			final SeekBarTintInfo info = (SeekBarTintInfo) tintInfo;</span>
<span class="nc bnc" id="L2935" title="All 16 branches missed.">			return !info.hasPrimaryProgressTintList &amp;&amp; !info.hasPrimaryProgressTintMode &amp;&amp;</span>
					!info.hasSecondaryProgressTintList &amp;&amp; !info.hasSecondaryProgressTintMode &amp;&amp;
					!info.hasProgressBackgroundTintList &amp;&amp; !info.hasProgressBackgroundTintMode &amp;&amp;
					!info.hasDiscreteIndicatorTintList &amp;&amp; !info.hasDiscreteIndicatorTintMode &amp;&amp;
<span class="nc bnc" id="L2939" title="All 2 branches missed.">					super.shouldInvalidateTintInfo(tintInfo);</span>
		}

		/**
		 */
		@Override
		@SuppressWarnings(&quot;deprecation&quot;)
		void superSetBackgroundDrawable(Drawable drawable) {
<span class="nc" id="L2947">			SeekBarWidget.super.setBackgroundDrawable(drawable);</span>
<span class="nc" id="L2948">		}</span>

		/**
		 */
		@Override
		@TargetApi(Build.VERSION_CODES.LOLLIPOP)
		void superSetBackgroundTintList(ColorStateList tint) {
<span class="nc" id="L2955">			SeekBarWidget.super.setBackgroundTintList(tint);</span>
<span class="nc" id="L2956">		}</span>

		/**
		 */
		@Override
		@TargetApi(Build.VERSION_CODES.LOLLIPOP)
		ColorStateList superGetBackgroundTintList() {
<span class="nc" id="L2963">			return SeekBarWidget.super.getBackgroundTintList();</span>
		}

		/**
		 */
		@Override
		@TargetApi(Build.VERSION_CODES.LOLLIPOP)
		void superSetBackgroundTintMode(PorterDuff.Mode tintMode) {
<span class="nc" id="L2971">			SeekBarWidget.super.setBackgroundTintMode(tintMode);</span>
<span class="nc" id="L2972">		}</span>

		/**
		 */
		@Override
		@TargetApi(Build.VERSION_CODES.LOLLIPOP)
		PorterDuff.Mode superGetBackgroundTintMode() {
<span class="nc" id="L2979">			return SeekBarWidget.super.getBackgroundTintMode();</span>
		}
	}
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.eclemma.org/jacoco">JaCoCo</a> 0.7.5.201505241946</span>Generated by the Android Gradle plugin 2.3.0</div></body></html>