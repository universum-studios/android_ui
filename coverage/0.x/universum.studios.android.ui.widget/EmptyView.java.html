<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../.resources/report.css" type="text/css"/><link rel="shortcut icon" href="../.resources/report.gif" type="image/gif"/><title>EmptyView.java</title><link rel="stylesheet" href="../.resources/prettify.css" type="text/css"/><script type="text/javascript" src="../.resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=0;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../.sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">debugAndroidTest</a> &gt; <a href="index.source.html" class="el_package">universum.studios.android.ui.widget</a> &gt; <span class="el_source">EmptyView.java</span></div><h1>EmptyView.java</h1><pre class="source lang-java linenums">/*
 * =================================================================================================
 *                             Copyright (C) 2017 Universum Studios
 * =================================================================================================
 *         Licensed under the Apache License, Version 2.0 or later (further &quot;License&quot; only).
 * -------------------------------------------------------------------------------------------------
 * You may use this file only in compliance with the License. More details and copy of this License 
 * you may obtain at
 * 
 * 		http://www.apache.org/licenses/LICENSE-2.0
 * 
 * You can redistribute, modify or publish any part of the code written within this file but as it 
 * is described in the License, the software distributed under the License is distributed on an 
 * &quot;AS IS&quot; BASIS, WITHOUT WARRANTIES or CONDITIONS OF ANY KIND.
 * 
 * See the License for the specific language governing permissions and limitations under the License.
 * =================================================================================================
 */
package universum.studios.android.ui.widget;

import android.animation.Animator;
import android.annotation.TargetApi;
import android.content.Context;
import android.content.res.Resources;
import android.content.res.TypedArray;
import android.os.Build;
import android.support.annotation.AttrRes;
import android.support.annotation.NonNull;
import android.support.annotation.Nullable;
import android.support.annotation.StringRes;
import android.support.annotation.StyleRes;
import android.text.SpannableStringBuilder;
import android.text.TextUtils;
import android.util.AttributeSet;
import android.view.accessibility.AccessibilityEvent;
import android.view.accessibility.AccessibilityNodeInfo;
import android.view.animation.AlphaAnimation;
import android.view.animation.Animation;

import java.util.LinkedList;

import universum.studios.android.ui.R;
import universum.studios.android.ui.UiConfig;

/**
 * A {@link TextViewWidget} implementation that can be used as empty view for collection views like
 * {@link android.widget.ListView ListView} or {@link android.widget.GridView GridView} or {@code RecyclerView}.
 * &lt;p&gt;
 * A desired text for EmptyView can be specified as for ordinary TextView via {@link #setText(int)}
 * or {@link #setText(CharSequence)} where the specified text will be trimmed if such feature is
 * enabled via {@link #setTrimTextEnabled(boolean)}. By default this feature is &lt;b&gt;enabled&lt;/b&gt;.
 * The current &quot;empty&quot; text can be also cross-faded with a new one via {@link #crossFadeText(int)}
 * or {@link #crossFadeText(CharSequence)}. Duration for this animation can be specified via
 * {@link #setFadeDuration(long)} as total duration for both &lt;b&gt;fade out&lt;/b&gt; and &lt;b&gt;fade in&lt;/b&gt;
 * animations together.
 *
 * &lt;h3&gt;XML attributes&lt;/h3&gt;
 * See {@link TextViewWidget},
 * {@link R.styleable#Ui_EmptyView EmptyView Attributes}
 *
 * &lt;h3&gt;Default style attribute&lt;/h3&gt;
 * {@link R.attr#uiEmptyViewStyle uiEmptyViewStyle}
 *
 * @author Martin Albedinsky
 * @see TextViewWidget
 */
public class EmptyView extends TextViewWidget {

	/**
	 * Interface ===================================================================================
	 */

	/**
	 * Constants ===================================================================================
	 */

	/**
	 * Log TAG.
	 */
	// private static final String TAG = &quot;EmptyView&quot;;

	/**
	 * Static members ==============================================================================
	 */

	/**
	 * Members =====================================================================================
	 */

	/**
	 * Application resources.
	 */
	private Resources mResources;

	/**
	 * Animations helper used to run animations upon this view regardless current Android version.
	 */
	private Animations mAnimations;

	/**
	 * Flag indicating whether a text set to this view should be trimmed or not.
	 */
<span class="nc" id="L103">	private boolean mTrimTextEnabled = true;</span>

	/**
	 * Constructors ================================================================================
	 */

	/**
	 * Same as {@link #EmptyView(android.content.Context, android.util.AttributeSet)} without attributes.
	 */
	public EmptyView(@NonNull Context context) {
<span class="nc" id="L113">		this(context, null);</span>
<span class="nc" id="L114">	}</span>

	/**
	 * Same as {@link #EmptyView(android.content.Context, android.util.AttributeSet, int)} with
	 * {@link R.attr#uiEmptyViewStyle} as attribute for default style.
	 */
	public EmptyView(@NonNull Context context, @Nullable AttributeSet attrs) {
<span class="nc" id="L121">		this(context, attrs, R.attr.uiEmptyViewStyle);</span>
<span class="nc" id="L122">	}</span>

	/**
	 * Same as {@link #EmptyView(android.content.Context, android.util.AttributeSet, int, int)} with
	 * {@code 0} as default style.
	 */
	public EmptyView(@NonNull Context context, @Nullable AttributeSet attrs, @AttrRes int defStyleAttr) {
<span class="nc" id="L129">		super(context, attrs, defStyleAttr);</span>
<span class="nc" id="L130">		this.init(context, attrs, defStyleAttr, 0);</span>
<span class="nc" id="L131">	}</span>

	/**
	 * Creates a new instance of EmptyView for the given &lt;var&gt;context&lt;/var&gt;.
	 *
	 * @param context      Context in which will be the new view presented.
	 * @param attrs        Set of Xml attributes used to configure the new instance of this view.
	 * @param defStyleAttr An attribute which contains a reference to a default style resource for
	 *                     this view within a theme of the given context.
	 * @param defStyleRes  Resource id of the default style for the new view.
	 */
	@TargetApi(Build.VERSION_CODES.LOLLIPOP)
	public EmptyView(@NonNull Context context, @Nullable AttributeSet attrs, @AttrRes int defStyleAttr, @StyleRes int defStyleRes) {
<span class="nc" id="L144">		super(context, attrs, defStyleAttr, defStyleRes);</span>
<span class="nc" id="L145">		this.init(context, attrs, defStyleAttr, defStyleRes);</span>
<span class="nc" id="L146">	}</span>

	/**
	 * Methods =====================================================================================
	 */

	/**
	 * Called from one of constructors of this view to perform its initialization.
	 * &lt;p&gt;
	 * Initialization is done via parsing of the specified &lt;var&gt;attrs&lt;/var&gt; set and obtaining for
	 * this view specific data from it that can be used to configure this new view instance. The
	 * specified &lt;var&gt;defStyleAttr&lt;/var&gt; and &lt;var&gt;defStyleRes&lt;/var&gt; are used to obtain default data
	 * from the current theme provided by the specified &lt;var&gt;context&lt;/var&gt;.
	 */
	private void init(Context context, AttributeSet attrs, int defStyleAttr, int defStyleRes) {
<span class="nc" id="L161">		this.mAnimations = Animations.get(this);</span>
<span class="nc" id="L162">		this.mResources = context.getResources();</span>

		/**
		 * Process attributes.
		 */
<span class="nc" id="L167">		final TypedArray typedArray = context.obtainStyledAttributes(attrs, R.styleable.Ui_EmptyView, defStyleAttr, defStyleRes);</span>
<span class="nc bnc" id="L168" title="All 2 branches missed.">		if (typedArray != null) {</span>
<span class="nc" id="L169">			final int n = typedArray.getIndexCount();</span>
<span class="nc bnc" id="L170" title="All 2 branches missed.">			for (int i = 0; i &lt; n; i++) {</span>
<span class="nc" id="L171">				int index = typedArray.getIndex(i);</span>
<span class="nc bnc" id="L172" title="All 2 branches missed.">				if (index == R.styleable.Ui_EmptyView_android_fadeDuration) {</span>
<span class="nc" id="L173">					setFadeDuration(typedArray.getInt(index, (int) mAnimations.fadeDuration));</span>
<span class="nc bnc" id="L174" title="All 2 branches missed.">				} else if (index == R.styleable.Ui_EmptyView_uiTrimTextEnabled) {</span>
<span class="nc" id="L175">					setTrimTextEnabled(typedArray.getBoolean(index, mTrimTextEnabled));</span>
				}
			}
<span class="nc" id="L178">			typedArray.recycle();</span>
		}

		// If no id has been specified, ensure that we have at least the framework's default one.
<span class="nc bnc" id="L182" title="All 2 branches missed.">		if (getId() == NO_ID) setId(android.R.id.empty);</span>
<span class="nc" id="L183">	}</span>

	/**
	 */
	@Override
	@TargetApi(Build.VERSION_CODES.ICE_CREAM_SANDWICH)
	public void onInitializeAccessibilityEvent(@NonNull AccessibilityEvent event) {
<span class="nc" id="L190">		super.onInitializeAccessibilityEvent(event);</span>
<span class="nc" id="L191">		event.setClassName(EmptyView.class.getName());</span>
<span class="nc" id="L192">	}</span>

	/**
	 */
	@Override
	@TargetApi(Build.VERSION_CODES.ICE_CREAM_SANDWICH)
	public void onInitializeAccessibilityNodeInfo(@NonNull AccessibilityNodeInfo info) {
<span class="nc" id="L199">		super.onInitializeAccessibilityNodeInfo(info);</span>
<span class="nc" id="L200">		info.setClassName(EmptyView.class.getName());</span>
<span class="nc" id="L201">	}</span>

	/**
	 * Specifies a duration determining how long should take the cross fade animation whenever one
	 * of {@code crossFade(...)} methods has been invoked, that is, how long it will take to fade
	 * (change) the current text for the new one.
	 * &lt;p&gt;
	 * Default duration is set to &lt;b&gt;600 ms&lt;/b&gt;.
	 *
	 * @param duration The desired duration in milliseconds.
	 * @see #getFadeDuration()
	 */
	public void setFadeDuration(long duration) {
<span class="nc" id="L214">		mAnimations.fadeDuration = Math.max(0, duration / 2);</span>
<span class="nc" id="L215">	}</span>

	/**
	 * Returns the duration of the cross fade animation.
	 *
	 * @return Duration for both fade in + out animations together in milliseconds.
	 * @see #setFadeDuration(long)
	 */
	public long getFadeDuration() {
<span class="nc" id="L224">		return mAnimations.fadeDuration * 2;</span>
	}

	/**
	 * Specifies a boolean flag indicating whether the cross-fading text should be also trimmed
	 * before it is set to this view or not.
	 * &lt;p&gt;
	 * This feature is by default &lt;b&gt;enabled&lt;/b&gt;.
	 *
	 * @param enabled {@code True} to enable trimming of text, {@code false} otherwise.
	 * @see #isTrimTextEnabled()
	 */
	public void setTrimTextEnabled(boolean enabled) {
<span class="nc" id="L237">		this.mTrimTextEnabled = enabled;</span>
<span class="nc" id="L238">	}</span>

	/**
	 * Returns the boolean flag indicating whether this view will automatically trim the cross-fading
	 * text or not.
	 *
	 * @return {@code True} if trimming of text is enabled, {@code false} otherwise.
	 * @see #setTrimTextEnabled(boolean)
	 */
	public boolean isTrimTextEnabled() {
<span class="nc" id="L248">		return mTrimTextEnabled;</span>
	}

	/**
	 * Clears all texts that are scheduled to be cross faded for this empty view.
	 */
	public void clearTextsToCrossFade() {
<span class="nc" id="L255">		mAnimations.clearTextsToCrossFade();</span>
<span class="nc" id="L256">	}</span>

	/**
	 * Same as {@link #crossFadeText(CharSequence)} for resource id.
	 *
	 * @param resId Resource id of the desired text to be cross-faded with the current one.
	 */
	public void crossFadeText(@StringRes int resId) {
<span class="nc" id="L264">		crossFadeText(mResources.getText(resId));</span>
<span class="nc" id="L265">	}</span>

	/**
	 * Starts &lt;b&gt;cross fade&lt;/b&gt; animation of the text of this empty view.
	 *
	 * @param text The desired text to be cross faded with the current one.
	 */
	public void crossFadeText(@Nullable CharSequence text) {
<span class="nc bnc" id="L273" title="All 4 branches missed.">		final boolean shouldTrim = mTrimTextEnabled &amp;&amp; !TextUtils.isEmpty(text);</span>
<span class="nc bnc" id="L274" title="All 2 branches missed.">		final CharSequence textToCrossFade = shouldTrim ? trimText(text) : text;</span>
<span class="nc bnc" id="L275" title="All 2 branches missed.">		if (mAnimations.shouldCrossFadeText(textToCrossFade)) mAnimations.crossFadeText(textToCrossFade);</span>
<span class="nc" id="L276">	}</span>

	/**
	 * Starts &lt;b&gt;fade in&lt;/b&gt; animation of this view.
	 *
	 * @see #fadeOut()
	 */
	public void fadeIn() {
<span class="nc" id="L284">		mAnimations.fadeIn();</span>
<span class="nc" id="L285">	}</span>

	/**
	 * Starts &lt;b&gt;fade out&lt;/b&gt; animation of this view.
	 *
	 * @see #fadeIn()
	 */
	public void fadeOut() {
<span class="nc" id="L293">		mAnimations.fadeOut();</span>
<span class="nc" id="L294">	}</span>

	/**
	 */
	@Override
	public void setText(CharSequence text, BufferType type) {
<span class="nc bnc" id="L300" title="All 4 branches missed.">		if (TextUtils.isEmpty(text) || !mTrimTextEnabled) {</span>
<span class="nc" id="L301">			super.setText(text, type);</span>
<span class="nc" id="L302">			return;</span>
		}
<span class="nc" id="L304">		super.setText(trimText(text), type);</span>
<span class="nc" id="L305">	}</span>

	/**
	 * Trims the specified text by removing white spaces at its start and also at its end.
	 *
	 * @param text The text to be trimmed.
	 * @return Trimmed text.
	 */
	@NonNull
	public static CharSequence trimText(@NonNull CharSequence text) {
<span class="nc" id="L315">		int length = text.length();</span>
<span class="nc" id="L316">		final int trimmedLength = TextUtils.getTrimmedLength(text);</span>
<span class="nc bnc" id="L317" title="All 2 branches missed.">		if (length &gt; trimmedLength) {</span>
<span class="nc" id="L318">			final SpannableStringBuilder builder = new SpannableStringBuilder(text);</span>

			// Remove white spaces from the start.
<span class="nc" id="L321">			int start = 0;</span>
<span class="nc bnc" id="L322" title="All 4 branches missed.">			while (start &lt; length &amp;&amp; builder.charAt(start) &lt;= ' ') {</span>
<span class="nc" id="L323">				start++;</span>
			}
<span class="nc" id="L325">			builder.delete(0, start);</span>
<span class="nc" id="L326">			length -= start;</span>

			// Remove white spaces from the end.
<span class="nc" id="L329">			int end = length;</span>
<span class="nc bnc" id="L330" title="All 4 branches missed.">			while (end &gt;= 0 &amp;&amp; builder.charAt(end - 1) &lt;= ' ') {</span>
<span class="nc" id="L331">				end--;</span>
			}
<span class="nc" id="L333">			builder.delete(end, length);</span>
<span class="nc" id="L334">			return builder;</span>
		}
<span class="nc" id="L336">		return text;</span>
	}

	/**
	 * Inner classes ===============================================================================
	 */

	/**
	 * Animations interface for this view.
	 */
	private static abstract class Animations {

		/**
		 * Flag to indicate that fade in animation is running.
		 */
		static final int FADE_IN = 0x01;

		/**
		 * Flag to indicate that fade out animation is running.
		 */
		static final int FADE_OUT = 0x02;

		/**
		 * Runnable that can be used to post fade in execution as part of cross fade animation.
		 */
<span class="nc" id="L361">		final Runnable FADE_IN_DURING_CROSS_FADE = new Runnable() {</span>

			/**
			 */
			@Override
			public void run() {
<span class="nc bnc" id="L367" title="All 2 branches missed.">				if (crossFading) fadeIn();</span>
<span class="nc" id="L368">			}</span>
		};

		/**
		 * View upon which will be animations performed.
		 */
		final EmptyView view;

		/**
		 * Queue containing texts that should be cross faded.
		 */
		final LinkedList&lt;CharSequence&gt; textsToCrossFade;

		/**
		 * Type of the fade animation that is running at this time (if any).
		 */
		int fadeType;

		/**
		 * Flag indicating whether we are running cross fade animation or not.
		 */
<span class="nc" id="L389">		boolean crossFading = false;</span>

		/**
		 * Duration in milliseconds used for fade animations.
		 */
<span class="nc" id="L394">		long fadeDuration = UiConfig.ANIMATION_DURATION_MEDIUM;</span>

		/**
		 * Creates a new instance of Animations for the specified &lt;var&gt;view&lt;/var&gt;.
		 *
		 * @param view The empty view for which to run animations.
		 */
<span class="nc" id="L401">		Animations(EmptyView view) {</span>
<span class="nc" id="L402">			this.view = view;</span>
<span class="nc" id="L403">			this.textsToCrossFade = new LinkedList&lt;&gt;();</span>
<span class="nc" id="L404">		}</span>

		/**
		 * Returns a new instance of Animations implementation specific for the current animations
		 * API capabilities.
		 *
		 * @param view The view upon which will the returned Animations object run all requested
		 *             animations.
		 * @return New instance of Animations implementation.
		 */
		static Animations get(EmptyView view) {
<span class="nc bnc" id="L415" title="All 2 branches missed.">			if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.ICE_CREAM_SANDWICH) {</span>
<span class="nc" id="L416">				return new IceCreamSandwichAnimations(view);</span>
			}
<span class="nc" id="L418">			return new DefaultAnimations(view);</span>
		}

		/**
		 * Checks whether the specified text should be cross faded into empty view or not.
		 * &lt;p&gt;
		 * This method compares the given text with the current text of the empty view and also with
		 * the last text that is scheduled to be cross faded (if any).
		 *
		 * @param textToCrossFade The desired text that should be cross faded.
		 * @return {@code True} if the specified text should be cross faded via {@link #crossFadeText(CharSequence)}
		 * because it will change current text of the empty view, {@code false} otherwise.
		 */
		boolean shouldCrossFadeText(CharSequence textToCrossFade) {
<span class="nc bnc" id="L432" title="All 2 branches missed.">			CharSequence currentText = textsToCrossFade.isEmpty() ? view.getText() : textsToCrossFade.getLast();</span>
<span class="nc bnc" id="L433" title="All 4 branches missed.">			final boolean boothInvalid = currentText == null &amp;&amp; textToCrossFade == null;</span>
<span class="nc bnc" id="L434" title="All 4 branches missed.">			final boolean boothValid = currentText != null &amp;&amp; textToCrossFade != null;</span>
<span class="nc bnc" id="L435" title="All 6 branches missed.">			return !boothInvalid &amp;&amp; (!boothValid || !currentText.toString().contentEquals(textToCrossFade.toString()));</span>
		}

		/**
		 * Checks whether there is stored some text that should be cross faded.
		 *
		 * @return {@code True} if {@link #poolTextToCrossFade()} will return the next text that should
		 * be cross-faded, {@code false} if all texts has been successfully cross-faded.
		 */
		final boolean hasTextToCrossFade() {
<span class="nc bnc" id="L445" title="All 2 branches missed.">			return !textsToCrossFade.isEmpty();</span>
		}

		/**
		 * Returns and removes the head text from the current queue of texts to cross fade.
		 *
		 * @return The next text to be cross faded or {@code null} if there are no more texts to
		 * cross fade.
		 * @see #hasTextToCrossFade()
		 */
		CharSequence poolTextToCrossFade() {
<span class="nc" id="L456">			return textsToCrossFade.poll();</span>
		}

		/**
		 * Clears all texts that should be cross faded.
		 */
		void clearTextsToCrossFade() {
<span class="nc" id="L463">			textsToCrossFade.clear();</span>
<span class="nc" id="L464">		}</span>

		/**
		 * Starts cross fade animation of the specified &lt;var&gt;text&lt;/var&gt;. This will decide whether
		 * to start new cross fade or just fade in animation depends on the current state of running
		 * fade animations and how much texts to cross fade are queued.
		 *
		 * @param text The desired text that should be cross faded for the empty view.
		 */
		void crossFadeText(CharSequence text) {
<span class="nc bnc" id="L474" title="All 4 branches missed.">			if (textsToCrossFade.isEmpty() &amp;&amp; !crossFading) {</span>
<span class="nc bnc" id="L475" title="All 2 branches missed.">				if (getCurrentAlpha() == 0) {</span>
<span class="nc" id="L476">					view.setText(text);</span>
<span class="nc" id="L477">					fadeIn();</span>
				} else {
<span class="nc" id="L479">					textsToCrossFade.add(text);</span>
<span class="nc" id="L480">					crossFade();</span>
				}
			} else {
<span class="nc" id="L483">				textsToCrossFade.add(text);</span>
			}
<span class="nc" id="L485">		}</span>

		/**
		 * Starts either fade in or fade out animation of the attached view based on its current alpha
		 * value.
		 *
		 * @return {@code True} if fade in animation has been started, {@code false} if fade out
		 * animation has been started.
		 */
		boolean crossFade() {
<span class="nc" id="L495">			this.crossFading = true;</span>
<span class="nc bnc" id="L496" title="All 2 branches missed.">			if (getCurrentAlpha() == 0) {</span>
<span class="nc" id="L497">				fadeIn();</span>
<span class="nc" id="L498">				return true;</span>
			}
<span class="nc" id="L500">			fadeOut();</span>
<span class="nc" id="L501">			return false;</span>
		}

		/**
		 * Handles animation end that has occurred during the cross fade animation. This will check
		 * the current fade type and based on it will either set the next text to the empty view and
		 * will start the fade in animation to show it or it will start a new cross fade animation
		 * for the next text or does nothing if all texts has been already cross faded.
		 */
		void handleAnimationEndDuringCrossFade() {
<span class="nc bnc" id="L511" title="All 3 branches missed.">			switch (fadeType) {</span>
				case FADE_OUT:
<span class="nc" id="L513">					view.setText(poolTextToCrossFade());</span>
<span class="nc" id="L514">					view.postDelayed(FADE_IN_DURING_CROSS_FADE, 50);</span>
<span class="nc" id="L515">					break;</span>
				case FADE_IN:
<span class="nc bnc" id="L517" title="All 2 branches missed.">					if (hasTextToCrossFade()) {</span>
<span class="nc" id="L518">						crossFade();</span>
					} else {
<span class="nc" id="L520">						crossFading = false;</span>
					}
					break;
			}
<span class="nc" id="L524">		}</span>

		/**
		 * Returns current alpha of the empty view.
		 *
		 * @return Alpha value from the range {@code [0, 255]}.
		 */
		abstract float getCurrentAlpha();

		/**
		 * Starts fade in animation of the attached view.
		 */
		abstract void fadeIn();

		/**
		 * Starts fade out animation of the attached view.
		 */
		abstract void fadeOut();
	}

	/**
	 * Default implementation of {@link Animations}.
	 */
	private static final class DefaultAnimations extends Animations implements Animation.AnimationListener {

		/**
		 * Animation used to fade in the empty view.
		 */
<span class="nc" id="L552">		final AlphaAnimation FADE_IN_ANIMATION = new AlphaAnimation(0.0f, 1.0f);</span>

		/**
		 * Animation used to fade out the empty view.
		 */
<span class="nc" id="L557">		final AlphaAnimation FADE_OUT_ANIMATION = new AlphaAnimation(1.0f, 0.0f);</span>

		/**
		 * Current animated alpha of the empty view.
		 */
<span class="nc" id="L562">		float alpha = 1.0f;</span>

		/**
		 * Creates a new instance of DefaultAnimations for the specified empty &lt;var&gt;view&lt;/var&gt;.
		 */
		DefaultAnimations(EmptyView view) {
<span class="nc" id="L568">			super(view);</span>
<span class="nc" id="L569">			FADE_IN_ANIMATION.setAnimationListener(this);</span>
<span class="nc" id="L570">			FADE_OUT_ANIMATION.setAnimationListener(this);</span>
<span class="nc" id="L571">		}</span>

		/**
		 */
		@Override
		float getCurrentAlpha() {
<span class="nc" id="L577">			return alpha;</span>
		}

		/**
		 */
		@Override
		void fadeIn() {
<span class="nc" id="L584">			this.fadeType = FADE_IN;</span>
<span class="nc" id="L585">			FADE_IN_ANIMATION.setDuration(fadeDuration);</span>
<span class="nc" id="L586">			view.setVisibility(VISIBLE);</span>
<span class="nc" id="L587">			view.startAnimation(FADE_IN_ANIMATION);</span>
<span class="nc" id="L588">		}</span>

		/**
		 */
		@Override
		void fadeOut() {
<span class="nc" id="L594">			this.fadeType = FADE_OUT;</span>
<span class="nc" id="L595">			FADE_OUT_ANIMATION.setDuration(fadeDuration);</span>
<span class="nc" id="L596">			view.startAnimation(FADE_OUT_ANIMATION);</span>
<span class="nc" id="L597">		}</span>

		/**
		 */
		@Override
		public void onAnimationStart(Animation animation) {
			// Ignored.
<span class="nc" id="L604">		}</span>

		/**
		 */
		@Override
		public void onAnimationEnd(Animation animation) {
			// This is not much good solution of determining the current alpha value, but.
<span class="nc bnc" id="L611" title="All 3 branches missed.">			switch (fadeType) {</span>
				case FADE_OUT:
<span class="nc" id="L613">					alpha = 0;</span>
<span class="nc" id="L614">					view.setVisibility(INVISIBLE);</span>
<span class="nc" id="L615">					break;</span>
				case FADE_IN:
<span class="nc" id="L617">					alpha = 1f;</span>
					break;
			}

<span class="nc bnc" id="L621" title="All 2 branches missed.">			if (crossFading) handleAnimationEndDuringCrossFade();</span>
<span class="nc" id="L622">		}</span>

		/**
		 */
		@Override
		public void onAnimationRepeat(Animation animation) {
			// Ignored.
<span class="nc" id="L629">		}</span>
	}

	/**
	 * An {@link Animations} implementation used for post {@link android.os.Build.VERSION_CODES#ICE_CREAM_SANDWICH ICE_CREAM_SANDWICH}
	 * Android versions.
	 */
	@TargetApi(Build.VERSION_CODES.ICE_CREAM_SANDWICH)
	private static final class IceCreamSandwichAnimations extends Animations implements Animator.AnimatorListener {

		/**
		 * Creates a new instance of IceCreamSandwichAnimations for the specified empty &lt;var&gt;view&lt;/var&gt;.
		 */
		IceCreamSandwichAnimations(EmptyView view) {
<span class="nc" id="L643">			super(view);</span>
<span class="nc" id="L644">		}</span>

		/**
		 */
		@Override
		float getCurrentAlpha() {
<span class="nc" id="L650">			return view.getAlpha();</span>
		}

		/**
		 */
		@Override
		void fadeIn() {
<span class="nc" id="L657">			this.fadeType = FADE_IN;</span>
<span class="nc" id="L658">			view.animate().alpha(1)</span>
<span class="nc" id="L659">					.setListener(this)</span>
<span class="nc" id="L660">					.setDuration(fadeDuration)</span>
<span class="nc" id="L661">					.start();</span>
<span class="nc" id="L662">		}</span>

		/**
		 */
		@Override
		void fadeOut() {
<span class="nc" id="L668">			this.fadeType = FADE_OUT;</span>
<span class="nc" id="L669">			view.animate().alpha(0)</span>
<span class="nc" id="L670">					.setListener(this)</span>
<span class="nc" id="L671">					.setDuration(fadeDuration)</span>
<span class="nc" id="L672">					.start();</span>
<span class="nc" id="L673">		}</span>

		/**
		 */
		@Override
		public void onAnimationStart(Animator animation) {
			// Ignored.
<span class="nc" id="L680">		}</span>

		/**
		 */
		@Override
		public void onAnimationEnd(Animator animation) {
<span class="nc bnc" id="L686" title="All 2 branches missed.">			if (crossFading) handleAnimationEndDuringCrossFade();</span>
<span class="nc" id="L687">		}</span>

		/**
		 */
		@Override
		public void onAnimationCancel(Animator animation) {
			// Ignored.
<span class="nc" id="L694">		}</span>

		/**
		 */
		@Override
		public void onAnimationRepeat(Animator animation) {
			// Ignored.
<span class="nc" id="L701">		}</span>
	}
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.eclemma.org/jacoco">JaCoCo</a> 0.7.5.201505241946</span>Generated by the Android Gradle plugin 2.3.0</div></body></html>