<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../.resources/report.css" type="text/css"/><link rel="shortcut icon" href="../.resources/report.gif" type="image/gif"/><title>TextAppearance.java</title><link rel="stylesheet" href="../.resources/prettify.css" type="text/css"/><script type="text/javascript" src="../.resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=0;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../.sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">debugAndroidTest</a> &gt; <a href="index.source.html" class="el_package">universum.studios.android.ui.widget</a> &gt; <span class="el_source">TextAppearance.java</span></div><h1>TextAppearance.java</h1><pre class="source lang-java linenums">/*
 * =================================================================================================
 *                             Copyright (C) 2017 Universum Studios
 * =================================================================================================
 *         Licensed under the Apache License, Version 2.0 or later (further &quot;License&quot; only).
 * -------------------------------------------------------------------------------------------------
 * You may use this file only in compliance with the License. More details and copy of this License 
 * you may obtain at
 * 
 * 		http://www.apache.org/licenses/LICENSE-2.0
 * 
 * You can redistribute, modify or publish any part of the code written within this file but as it 
 * is described in the License, the software distributed under the License is distributed on an 
 * &quot;AS IS&quot; BASIS, WITHOUT WARRANTIES or CONDITIONS OF ANY KIND.
 * 
 * See the License for the specific language governing permissions and limitations under the License.
 * =================================================================================================
 */
package universum.studios.android.ui.widget;

import android.content.Context;
import android.content.res.ColorStateList;
import android.content.res.TypedArray;
import android.graphics.Canvas;
import android.graphics.Color;
import android.graphics.Paint;
import android.graphics.Typeface;
import android.support.annotation.ColorInt;
import android.support.annotation.IntDef;
import android.support.annotation.NonNull;
import android.support.annotation.Nullable;
import android.support.annotation.StyleRes;
import android.text.TextUtils;

import java.lang.annotation.Retention;
import java.lang.annotation.RetentionPolicy;

import universum.studios.android.font.Font;
import universum.studios.android.ui.R;

/**
 * TextAppearance contains attributes that can be specified to 'describe' appearance of a text that
 * is drawn on {@link Canvas}. See {@link R.styleable#Ui_TextAppearance TextAppearance attributes}
 * to see which attributes can be specified.
 * &lt;p&gt;
 * An instance of TextAppearance object can be instantiated via {@link #TextAppearance()} constructor
 * and then values for the desired attributes can be specified vie one of setter methods or they can
 * be parsed form a desired &lt;b&gt;text appearance&lt;/b&gt; style via {@link #fromStyle(Context, int)} and than
 * accessed via one of getter methods.
 *
 * @author Martin Albedinsky
 */
public final class TextAppearance {

	/**
	 * Interface ===================================================================================
	 */

	/**
	 * Constants ===================================================================================
	 */

	/**
	 * Log TAG.
	 */
	// private static final String TAG = &quot;TextAppearance&quot;;

	/**
	 * Defines an annotation for determining set of available text styles.
	 */
	@Retention(RetentionPolicy.SOURCE)
	@IntDef({Typeface.NORMAL, Typeface.BOLD, Typeface.ITALIC, Typeface.BOLD_ITALIC})
	public @interface TextStyle {
	}

	/**
	 * Defines an annotation for determining set of typeface indexes used to identify a specific
	 * typeface.
	 */
	@Retention(RetentionPolicy.SOURCE)
	@IntDef({SANS_SERIF, SERIF, MONOSPACE})
	public @interface TypefaceIndex {
	}

	/**
	 * Flag for &lt;b&gt;sans-serif&lt;/b&gt; typeface.
	 */
	public static final int SANS_SERIF = 1;

	/**
	 * Flag for &lt;b&gt;serif&lt;/b&gt; typeface.
	 */
	public static final int SERIF = 2;

	/**
	 * Flag for &lt;b&gt;monospace&lt;/b&gt; typeface.
	 */
	public static final int MONOSPACE = 3;

	/**
	 * Static members ==============================================================================
	 */

	/**
	 * Default colors state list used for text of TextAppearance instances.
	 * &lt;p&gt;
	 * Contains single {@link Color#BLACK BLACK} color.
	 */
<span class="nc" id="L109">	public static final ColorStateList TEXT_COLORS = ColorStateList.valueOf(Color.BLACK);</span>

	/**
	 * Members =====================================================================================
	 */

	/**
	 * Raw text size in pixels.
	 */
	private float mTextSize;

	/**
	 * State list of text colors.
	 */
<span class="nc" id="L123">	private ColorStateList mTextColors = TEXT_COLORS;</span>

	/**
	 * Style of text.
	 */
<span class="nc" id="L128">	private int mTextStyle = Typeface.NORMAL;</span>

	/**
	 * Index of text typeface.
	 */
	private int mTypefaceIndex;

	/**
	 * Font family of text.
	 */
	private String mFontFamily;

	/**
	 * Typeface created from {@link #mFontFamily} or {@link #mTypefaceIndex}.
	 */
	private Typeface mTypeface;

	/**
	 * Boolean flag indicating whether we should re-create the typeface instance the next time it is
	 * needed or not.
	 */
	private boolean mInvalidateTypeface;

	/**
	 * Constructors ================================================================================
	 */

	/**
	 * Creates a new instance of empty TextAppearance.
	 */
<span class="nc" id="L158">	public TextAppearance() {</span>
<span class="nc" id="L159">		this.reset();</span>
<span class="nc" id="L160">	}</span>

	/**
	 * Methods =====================================================================================
	 */

	/**
	 * Set ups this text appearance holder with text appearance values from the specified &lt;var&gt;resId&lt;/var&gt;
	 * style.
	 *
	 * @param context Context used to parse text appearance attributes from the specified style resource.
	 * @param resId   Resource id of the desired TextAppearance style from which to parse attributes.
	 * @return {@code True} if some of attributes of this text appearance has changed, {@code false}
	 * otherwise.
	 */
	public boolean fromStyle(@NonNull Context context, @StyleRes int resId) {
<span class="nc" id="L176">		this.reset();</span>
<span class="nc" id="L177">		final TypedArray typedArray = context.obtainStyledAttributes(resId, R.styleable.Ui_TextAppearance);</span>
<span class="nc bnc" id="L178" title="All 2 branches missed.">		if (typedArray != null) {</span>
<span class="nc" id="L179">			final int n = typedArray.getIndexCount();</span>
<span class="nc bnc" id="L180" title="All 2 branches missed.">			for (int i = 0; i &lt; n; i++) {</span>
<span class="nc" id="L181">				final int index = typedArray.getIndex(i);</span>
<span class="nc bnc" id="L182" title="All 2 branches missed.">				if (index == R.styleable.Ui_TextAppearance_android_textSize) {</span>
<span class="nc" id="L183">					this.mTextSize = typedArray.getDimensionPixelSize(index, (int) mTextSize);</span>
<span class="nc bnc" id="L184" title="All 2 branches missed.">				} else if (index == R.styleable.Ui_TextAppearance_android_textColor) {</span>
<span class="nc" id="L185">					this.mTextColors = typedArray.getColorStateList(index);</span>
<span class="nc bnc" id="L186" title="All 2 branches missed.">				} else if (index == R.styleable.Ui_TextAppearance_android_textStyle) {</span>
<span class="nc" id="L187">					this.mTextStyle = typedArray.getInt(index, mTextStyle);</span>
<span class="nc bnc" id="L188" title="All 2 branches missed.">				} else if (index == R.styleable.Ui_TextAppearance_android_typeface) {</span>
<span class="nc" id="L189">					this.mTypefaceIndex = typedArray.getInt(index, mTypefaceIndex);</span>
<span class="nc bnc" id="L190" title="All 2 branches missed.">				} else if (index == R.styleable.Ui_TextAppearance_android_fontFamily) {</span>
<span class="nc" id="L191">					this.mFontFamily = typedArray.getString(index);</span>
<span class="nc bnc" id="L192" title="All 2 branches missed.">				} else if (index == R.styleable.Ui_TextAppearance_uiFont) {</span>
<span class="nc" id="L193">					final String fontPath = typedArray.getString(index);</span>
<span class="nc bnc" id="L194" title="All 2 branches missed.">					if (!TextUtils.isEmpty(fontPath)) {</span>
<span class="nc" id="L195">						this.mTypeface = Font.create(fontPath).getTypeface(context);</span>
					}
				}
			}
<span class="nc" id="L199">			typedArray.recycle();</span>
<span class="nc bnc" id="L200" title="All 2 branches missed.">			return n &gt; 0;</span>
		}
<span class="nc" id="L202">		return false;</span>
	}

	/**
	 * Sets a size for text.
	 *
	 * @param size The desired text size in floating pixels.
	 * @return {@code True} if text size of this text appearance has changed, {@code false}
	 * otherwise.
	 * @see #getTextSize()
	 */
	public boolean setTextSize(float size) {
<span class="nc bnc" id="L214" title="All 2 branches missed.">		if (mTextSize != size) {</span>
<span class="nc" id="L215">			this.mTextSize = size;</span>
<span class="nc" id="L216">			return true;</span>
		}
<span class="nc" id="L218">		return false;</span>
	}

	/**
	 * Returns the size for text specified for this text appearance.
	 * &lt;p&gt;
	 * Default value: &lt;b&gt;{@code 0}&lt;/b&gt;
	 *
	 * @return This appearance's text size.
	 * @see #setTextSize(float)
	 * @see #updatePaintTextSize(Paint)
	 */
	public float getTextSize() {
<span class="nc" id="L231">		return mTextSize;</span>
	}

	/**
	 * Sets a stateful set of colors for text.
	 *
	 * @param colors The desired colors. May be {@code null} to clear the current ones.
	 * @return {@code True} if colors of this text appearance have changed, {@code false} otherwise.
	 * @see #getTextColor()
	 */
	public boolean setTextColor(@Nullable ColorStateList colors) {
<span class="nc bnc" id="L242" title="All 2 branches missed.">		if (mTextColors != colors) {</span>
<span class="nc" id="L243">			this.mTextColors = colors;</span>
<span class="nc" id="L244">			return true;</span>
		}
<span class="nc" id="L246">		return false;</span>
	}

	/**
	 * Returns the colors for text specified for this text appearance.
	 * &lt;p&gt;
	 * If no colors has been specified the {@link #TEXT_COLORS} is returned by default.
	 *
	 * @return This appearance's text colors.
	 * @see #setTextColor(ColorStateList)
	 * @see #updatePaintColor(Paint, int[])
	 */
	@NonNull
	public ColorStateList getTextColor() {
<span class="nc" id="L260">		return mTextColors;</span>
	}

	/**
	 * Sets a style for text.
	 *
	 * @param style The desired text style. One of {@link Typeface#NORMAL}, {@link Typeface#ITALIC},
	 *              {@link Typeface#BOLD}, {@link Typeface#BOLD_ITALIC}.
	 * @return {@code True} if text style of this text appearance has changed, {@code false} otherwise.
	 * @see #getTextStyle()
	 */
	public boolean setTextStyle(@TextStyle int style) {
<span class="nc bnc" id="L272" title="All 2 branches missed.">		if (mTextStyle != style) {</span>
<span class="nc" id="L273">			this.mTextStyle = style;</span>
<span class="nc" id="L274">			this.mInvalidateTypeface = true;</span>
<span class="nc" id="L275">			return true;</span>
		}
<span class="nc" id="L277">		return false;</span>
	}

	/**
	 * Returns the style for text specified for this text appearance.
	 *
	 * @return This appearance's text size.
	 * @see #setTextStyle(int)
	 * @see #updatePaintTypeface(Paint)
	 */
	@TextStyle
	public int getTextStyle() {
<span class="nc" id="L289">		return mTextStyle;</span>
	}

	/**
	 * Sets an index of typeface for text.
	 * &lt;p&gt;
	 * This index will be used to resolve proper instance of typeface whenever it is requested via
	 * {@link #getTypeface()} and some of typeface related attributes have changed.
	 *
	 * @param index The desired typeface index. One of {@link #SANS_SERIF}, {@link #SERIF}, {@link #MONOSPACE}.
	 * @return {@code True} if index of typeface of this text appearance has changed, {@code false}
	 * otherwise.
	 * @see #getTypefaceIndex()
	 * @see #setTypeface(Typeface)
	 * @see #setFontFamily(String)
	 */
	public boolean setTypefaceIndex(@TypefaceIndex int index) {
<span class="nc bnc" id="L306" title="All 2 branches missed.">		if (mTypefaceIndex != index) {</span>
<span class="nc" id="L307">			this.mTypefaceIndex = index;</span>
<span class="nc" id="L308">			this.mInvalidateTypeface = true;</span>
<span class="nc" id="L309">			return true;</span>
		}
<span class="nc" id="L311">		return false;</span>
	}

	/**
	 * Returns the index of typeface for text specified for this text appearance.
	 *
	 * @return This appearance's typeface index.
	 * @see #setTypefaceIndex(int)
	 * @see #updatePaintTypeface(Paint)
	 */
	@TypefaceIndex
	public int getTypefaceIndex() {
<span class="nc" id="L323">		return mTypefaceIndex;</span>
	}

	/**
	 * Sets a typeface for text.
	 *
	 * @param typeface The desired typeface. May be {@code null} to clear the current one.
	 * @return {@code True} if typeface of this text appearance has changed, {@code false} otherwise.
	 * @see #getTypeface()
	 * @see #setTypefaceIndex(int)
	 * @see #setFontFamily(String)
	 */
	public boolean setTypeface(@Nullable Typeface typeface) {
<span class="nc bnc" id="L336" title="All 2 branches missed.">		if (mTypeface != typeface) {</span>
<span class="nc" id="L337">			this.mTypeface = typeface;</span>
<span class="nc" id="L338">			this.mInvalidateTypeface = false;</span>
<span class="nc" id="L339">			return true;</span>
		}
<span class="nc" id="L341">		return false;</span>
	}

	/**
	 * Returns the typeface for text specified for this text appearance.
	 * &lt;p&gt;
	 * &lt;b&gt;Note&lt;/b&gt;, that whenever one of typeface related attributes (text style, typeface index,
	 * font family) changes and this method is invoked a new proper instance of typeface will be
	 * resolved based on current values of these attributes.
	 *
	 * @return This appearance's typeface.
	 * @see #updatePaintTypeface(Paint)
	 */
	@Nullable
	public Typeface getTypeface() {
<span class="nc" id="L356">		this.ensureTypeface();</span>
<span class="nc" id="L357">		return mTypeface;</span>
	}

	/**
	 * Ensures that the typeface is initialized (if possible).
	 */
	private void ensureTypeface() {
<span class="nc bnc" id="L364" title="All 4 branches missed.">		if (mTypeface == null || mInvalidateTypeface) {</span>
<span class="nc" id="L365">			this.mInvalidateTypeface = false;</span>
<span class="nc bnc" id="L366" title="All 2 branches missed.">			if (!TextUtils.isEmpty(mFontFamily)) {</span>
<span class="nc" id="L367">				this.mTypeface = Typeface.create(mFontFamily, mTextStyle);</span>
			} else {
<span class="nc bnc" id="L369" title="All 4 branches missed.">				switch (mTypefaceIndex) {</span>
					case SANS_SERIF:
<span class="nc" id="L371">						this.mTypeface = Typeface.SANS_SERIF;</span>
<span class="nc" id="L372">						break;</span>
					case SERIF:
<span class="nc" id="L374">						this.mTypeface = Typeface.SERIF;</span>
<span class="nc" id="L375">						break;</span>
					case MONOSPACE:
<span class="nc" id="L377">						this.mTypeface = Typeface.MONOSPACE;</span>
						break;
				}
			}
		}
<span class="nc" id="L382">	}</span>

	/**
	 * Sets a font family for text's typeface.
	 * &lt;p&gt;
	 * Font family will be used to resolve proper instance of typeface whenever it is requested via
	 * {@link #getTypeface()} and some of typeface related attributes have changed.
	 *
	 * @param fontFamily The desired font family. May be {@code null} to clear the current one.
	 * @return {@code True} if font family of this text appearance has changed, {@code false} otherwise.
	 * @see #getFontFamily()
	 */
	public boolean setFontFamily(@Nullable String fontFamily) {
<span class="nc bnc" id="L395" title="All 4 branches missed.">		if (mFontFamily == null || !mFontFamily.equals(fontFamily)) {</span>
<span class="nc" id="L396">			this.mFontFamily = fontFamily;</span>
<span class="nc" id="L397">			this.mTypeface = null;</span>
<span class="nc" id="L398">			return true;</span>
		}
<span class="nc" id="L400">		return false;</span>
	}

	/**
	 * Checks whether this text appearance has its font family specified or not.
	 *
	 * @return {@code True} if font family is specified, {@code false} otherwise.
	 * @see #setFontFamily(String)
	 * @see #getFontFamily()
	 */
	public boolean hasFontFamily() {
<span class="nc bnc" id="L411" title="All 2 branches missed.">		return !TextUtils.isEmpty(mFontFamily);</span>
	}

	/**
	 * Returns the font family for text's typeface specified for this text appearance.
	 *
	 * @return This appearance's font family.
	 * @see #hasFontFamily()
	 * @see #setFontFamily(String)
	 * @see #updatePaintTypeface(Paint)
	 */
	@Nullable
	public String getFontFamily() {
<span class="nc" id="L424">		return mFontFamily;</span>
	}

	/**
	 * Updates all text related settings for the given &lt;var&gt;paint&lt;/var&gt; with current configuration
	 * of this text appearance.
	 *
	 * @param paint    The paint to be updated.
	 * @param stateSet Set of states used to resolve actual value of stateful text setting like its
	 *                 color.
	 * @return {@code True} if at least one setting of the paint has changed, {@code false} otherwise.
	 * @see #updatePaintTextSize(Paint)
	 * @see #updatePaintColor(Paint, int[])
	 * @see #updatePaintTypeface(Paint)
	 */
	public boolean updatePaint(@NonNull Paint paint, @Nullable int[] stateSet) {
<span class="nc" id="L440">		boolean updated = updatePaintTextSize(paint);</span>
<span class="nc" id="L441">		updated |= updatePaintColor(paint, stateSet);</span>
<span class="nc" id="L442">		updated |= updatePaintTypeface(paint);</span>
<span class="nc" id="L443">		return updated;</span>
	}

	/**
	 * Updates text size setting for the given &lt;var&gt;paint&lt;/var&gt; to the one specified for this
	 * text appearance.
	 *
	 * @param paint The paint to be updated.
	 * @return {@code True} if paint's text setting has changed, {@code false} otherwise.
	 * @see #setTextSize(float)
	 * @see #updatePaintTextSize(Paint, float)
	 */
	public boolean updatePaintTextSize(@NonNull Paint paint) {
<span class="nc" id="L456">		return updatePaintTextSize(paint, mTextSize);</span>
	}

	/**
	 * Updates text size setting for the given &lt;var&gt;paint&lt;/var&gt; to the specified one.
	 *
	 * @param paint    The paint to be updated.
	 * @param textSize The desired text size in floating pixels.
	 * @return {@code True} if paint's text setting has changed, {@code false} otherwise.
	 * @see Paint#setTextSize(float)
	 */
	public static boolean updatePaintTextSize(@NonNull Paint paint, float textSize) {
<span class="nc bnc" id="L468" title="All 2 branches missed.">		if (paint.getTextSize() != textSize) {</span>
<span class="nc" id="L469">			paint.setTextSize(textSize);</span>
<span class="nc" id="L470">			return true;</span>
		}
<span class="nc" id="L472">		return false;</span>
	}

	/**
	 * Updates color setting for the given &lt;var&gt;paint&lt;/var&gt; to the one specified for this text
	 * appearance.
	 *
	 * @param paint    The paint to be updated.
	 * @param stateSet Set of states used to resolve actual color from the stateful text colors
	 *                 specified for this text appearance (if any).
	 * @return {@code True} if paint's color setting has changed, {@code false} otherwise.
	 * @see #setTextColor(ColorStateList)
	 * @see #updatePaintColor(Paint, int[], ColorStateList)
	 */
	public boolean updatePaintColor(@NonNull Paint paint, @Nullable int[] stateSet) {
<span class="nc" id="L487">		return updatePaintColor(paint, stateSet, mTextColors);</span>
	}

	/**
	 * Updates color setting for the given &lt;var&gt;paint&lt;/var&gt; to the actual one picked from the given
	 * &lt;var&gt;colors&lt;/var&gt; according to the specified &lt;var&gt;stateSet&lt;/var&gt;.
	 *
	 * @param paint    The paint to be updated.
	 * @param stateSet Set of states used pick the actual color to set to the paint.
	 * @param colors   Stateful colors list to the actual color from.
	 * @return {@code True} if paint's color setting has changed, {@code false} otherwise.
	 * @see #updatePaintColor(Paint, int)
	 */
	@SuppressWarnings(&quot;ResourceType&quot;)
	public static boolean updatePaintColor(@NonNull Paint paint, @Nullable int[] stateSet, @Nullable ColorStateList colors) {
<span class="nc bnc" id="L502" title="All 6 branches missed.">		return colors != null &amp;&amp; updatePaintColor(paint, colors.isStateful() ?</span>
<span class="nc" id="L503">				colors.getColorForState(stateSet, colors.getDefaultColor()) :</span>
<span class="nc" id="L504">				colors.getDefaultColor()</span>
		);
	}

	/**
	 * Updates color setting for the given &lt;var&gt;paint&lt;/var&gt; the the specified one.
	 *
	 * @param paint The paint to be updated.
	 * @param color The desired color.
	 * @return {@code True} if paint's color setting has changed, {@code false} otherwise.
	 * @see Paint#setColor(int)
	 */
	public static boolean updatePaintColor(@NonNull Paint paint, @ColorInt int color) {
<span class="nc bnc" id="L517" title="All 2 branches missed.">		if (paint.getColor() != color) {</span>
<span class="nc" id="L518">			paint.setColor(color);</span>
<span class="nc" id="L519">			return true;</span>
		}
<span class="nc" id="L521">		return false;</span>
	}

	/**
	 * Updates typeface setting for the given &lt;var&gt;paint&lt;/var&gt; to the one specified for this text
	 * appearance.
	 *
	 * @param paint The paint to be updated.
	 * @return {@code True} if paint's typeface setting has changed, {@code false} otherwise.
	 * @see #setTypeface(Typeface)
	 * @see #updatePaintTypeface(Paint, Typeface, int)
	 */
	public boolean updatePaintTypeface(@NonNull Paint paint) {
<span class="nc" id="L534">		this.ensureTypeface();</span>
<span class="nc" id="L535">		return updatePaintTypeface(paint, mTypeface, mTextStyle);</span>
	}

	/**
	 * Updates typeface setting for the given &lt;var&gt;paint&lt;/var&gt; to the specified one.
	 *
	 * @param paint    The paint to be updated.
	 * @param typeface The desired typeface. May be {@code null} to resolve instance of typeface
	 *                 from the specified style.
	 * @param style    The desired text style used to resolve proper instance of typeface.
	 * @return {@code True} if paint's typeface setting has changed, {@code false} otherwise.
	 * @see Paint#setTypeface(Typeface)
	 */
	public static boolean updatePaintTypeface(@NonNull Paint paint, @Nullable Typeface typeface, @TextStyle int style) {
<span class="nc bnc" id="L549" title="All 2 branches missed.">		if (style &gt; 0) {</span>
<span class="nc bnc" id="L550" title="All 2 branches missed.">			if (typeface == null) {</span>
<span class="nc" id="L551">				typeface = Typeface.defaultFromStyle(style);</span>
			} else {
<span class="nc" id="L553">				typeface = Typeface.create(typeface, style);</span>
			}
<span class="nc bnc" id="L555" title="All 2 branches missed.">			final int typefaceStyle = typeface != null ? typeface.getStyle() : 0;</span>
<span class="nc" id="L556">			final int need = style &amp; ~typefaceStyle;</span>
<span class="nc bnc" id="L557" title="All 2 branches missed.">			paint.setFakeBoldText((need &amp; Typeface.BOLD) != 0);</span>
<span class="nc bnc" id="L558" title="All 2 branches missed.">			paint.setTextSkewX((need &amp; Typeface.ITALIC) != 0 ? -0.25f : 0);</span>
<span class="nc" id="L559">			paint.setTypeface(typeface);</span>
<span class="nc" id="L560">		} else {</span>
<span class="nc" id="L561">			paint.setFakeBoldText(false);</span>
<span class="nc" id="L562">			paint.setTextSkewX(0);</span>
<span class="nc" id="L563">			paint.setTypeface(typeface);</span>
		}
<span class="nc" id="L565">		return true;</span>
	}

	/**
	 * Updates typeface setting for the given &lt;var&gt;paint&lt;/var&gt; to the specified one.
	 *
	 * @param paint    The paint to be updated.
	 * @param typeface The desired typeface.
	 * @return {@code True} if paint's typeface setting has changed, {@code false} otherwise.
	 * @see Paint#setTypeface(Typeface)
	 */
	public static boolean updatePaintTypeface(@NonNull Paint paint, @Nullable Typeface typeface) {
<span class="nc bnc" id="L577" title="All 2 branches missed.">		if (paint.getTypeface() != typeface) {</span>
<span class="nc" id="L578">			paint.setTypeface(typeface);</span>
<span class="nc" id="L579">			return true;</span>
		}
<span class="nc" id="L581">		return false;</span>
	}

	/**
	 * Resets the current text appearance values.
	 */
	private void reset() {
<span class="nc" id="L588">		this.mTextSize = -1;</span>
<span class="nc" id="L589">		this.mTextColors = null;</span>
<span class="nc" id="L590">		this.mTextStyle = -1;</span>
<span class="nc" id="L591">		this.mTypefaceIndex = -1;</span>
<span class="nc" id="L592">		this.mFontFamily = null;</span>
<span class="nc" id="L593">		this.mTypeface = null;</span>
<span class="nc" id="L594">	}</span>

	/**
	 * Inner classes ===============================================================================
	 */
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.eclemma.org/jacoco">JaCoCo</a> 0.7.5.201505241946</span>Generated by the Android Gradle plugin 2.3.0</div></body></html>